<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="wjizhong">
    <link rel="canonical" href="https://wjizhong.github.io/%E5%B7%A5%E7%A8%8B%E5%86%85%E5%AE%B9/%E5%89%8D%E7%AB%AF%E6%95%99%E7%A8%8B/">
    <link rel="shortcut icon" href="https://pic.pngsucai.com/00/18/26/4a7884c36067e596.jpg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>å‰ç«¯æ•™ç¨‹ - å›¾åƒ/è§†é¢‘ç®—æ³•</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "vue\u6559\u7a0b", url: "#_top", level:1, children: [
              {title: "\u4e00\u3001\u57fa\u7840", url: "#_1", level:2, children: [
                  {title: "1.1 \u4ecb\u7ecd", url: "#11", level:3, children: [
                  ]},
                  {title: "1.2 Vue\u5b9e\u4f8b", url: "#12-vue", level:3, children: [
                  ]},
                  {title: "1.3 \u6a21\u677f\u8bed\u6cd5", url: "#13", level:3, children: [
                  ]},
                  {title: "1.4 \u8ba1\u7b97\u5c5e\u6027\u548c\u4fa6\u542c\u5668", url: "#14", level:3, children: [
                  ]},
                  {title: "1.5 Class\u4e0eStyle \u7ed1\u5b9a", url: "#15-classstyle", level:3, children: [
                  ]},
                  {title: "1.6 \u6761\u4ef6\u6e32\u67d3", url: "#16", level:3, children: [
                  ]},
                  {title: "1.7 \u5217\u8868\u6e32\u67d3", url: "#17", level:3, children: [
                  ]},
                  {title: "1.7 \u4e8b\u4ef6\u5904\u7406", url: "#17_1", level:3, children: [
                  ]},
                  {title: "1.8 \u8868\u5355\u8f93\u5165\u7ed1\u5b9a", url: "#18", level:3, children: [
                  ]},
                  {title: "1.9 \u7ec4\u4ef6\u57fa\u7840", url: "#19", level:3, children: [
                  ]}, 
              ]},
              {title: "\u4e8c\u3001\u6df1\u5165\u4e86\u89e3\u7ec4\u4ef6", url: "#_2", level:2, children: [
                  {title: "2.1 \u7ec4\u4ef6\u6ce8\u518c", url: "#21", level:3, children: [
                  ]},
                  {title: "2.2 Prop", url: "#22-prop", level:3, children: [
                  ]},
                  {title: "2.3 \u81ea\u5b9a\u4e49\u4e8b\u4ef6", url: "#23", level:3, children: [
                  ]},
                  {title: "2.4 \u63d2\u69fd", url: "#24", level:3, children: [
                  ]},
                  {title: "2.5 \u52a8\u6001\u7ec4\u4ef6&amp;\u5f02\u6b65\u7ec4\u4ef6", url: "#25", level:3, children: [
                  ]},
                  {title: "2.6 \u5904\u7406\u8fb9\u754c\u60c5\u51b5", url: "#26", level:3, children: [
                  ]}, 
              ]},
              {title: "\u4e09\u3001\u8fc7\u6e21&amp;\u52a8\u753b", url: "#_3", level:2, children: [
                  {title: "3.1 \u8fdb\u5165/\u79bb\u5f00&amp;\u5217\u8868\u8fc7\u6e21", url: "#31", level:3, children: [
                  ]},
                  {title: "3.2 \u72b6\u6001\u8fc7\u6e21", url: "#32", level:3, children: [
                  ]},
                  {title: "3.3 \u6df1\u5165\u54cd\u5e94\u5f0f\u539f\u7406", url: "#33", level:3, children: [
                  ]}, 
              ]},
              {title: "\u56db\u3001Vue Router", url: "#vue-router", level:2, children: [
                  {title: "4.1 \u8d77\u6b65", url: "#41", level:3, children: [
                  ]},
                  {title: "4.2 \u52a8\u6001\u8def\u7531\u5339\u914d", url: "#42", level:3, children: [
                  ]},
                  {title: "4.3 \u5d4c\u5957\u8def\u7531", url: "#43", level:3, children: [
                  ]},
                  {title: "4.4 \u7f16\u7a0b\u5f0f\u7684\u5bfc\u822a", url: "#44", level:3, children: [
                  ]},
                  {title: "4.5 \u547d\u540d\u8def\u7531", url: "#45", level:3, children: [
                  ]},
                  {title: "4.6 \u547d\u540d\u89c6\u56fe", url: "#46", level:3, children: [
                  ]},
                  {title: "4.7 \u91cd\u5b9a\u5411\u548c\u522b\u540d", url: "#47", level:3, children: [
                  ]},
                  {title: "4.8 \u8def\u7531\u7ec4\u4ef6\u4f20\u53c2", url: "#48", level:3, children: [
                  ]},
                  {title: "4.9 HTML5 History\u6a21\u5f0f", url: "#49-html5-history", level:3, children: [
                  ]},
                  {title: "4.10 \u5bfc\u822a\u5b88\u536b", url: "#410", level:3, children: [
                  ]},
                  {title: "4.11 \u8def\u7531\u5143\u4fe1\u606f", url: "#411", level:3, children: [
                  ]},
                  {title: "4.12 \u8fc7\u6e21\u52a8\u6548", url: "#412", level:3, children: [
                  ]},
                  {title: "4.13 \u6570\u636e\u83b7\u53d6", url: "#413", level:3, children: [
                  ]},
                  {title: "4.14 \u6eda\u52a8\u884c\u4e3a", url: "#414", level:3, children: [
                  ]},
                  {title: "4.15 \u8def\u7531\u61d2\u52a0\u8f7d", url: "#415", level:3, children: [
                  ]}, 
              ]},
              {title: "\u4e94\u3001vuex", url: "#vuex", level:2, children: [
                  {title: "5.1 \u5b89\u88c5\u4f7f\u7528vuex", url: "#51-vuex", level:3, children: [
                  ]},
                  {title: "5.3 modules", url: "#53-modules", level:3, children: [
                  ]},
                  {title: "5.4 mutations", url: "#54-mutations", level:3, children: [
                  ]},
                  {title: "5.5 actions", url: "#55-actions", level:3, children: [
                  ]},
                  {title: "5.6 getters", url: "#56-getters", level:3, children: [
                  ]},
                  {title: "5.7 mapState\u3001mapGetters\u548cmapActions", url: "#57-mapstatemapgettersmapactions", level:3, children: [
                  ]}, 
              ]},
          ]},
        ];
    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    <style>
blockquote{
    font-size: 99%;
}
</style>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  CommonHTML: {
    scale: 100
  }
});
</script>
<script type="text/javascript" async
src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


    
    
      
    

    

    <h1 id="vue">vueæ•™ç¨‹</h1>
<p>å‚è€ƒåœ°å€:<code>https://cn.vuejs.org/v2/guide/typescript.html</code></p>
<h2 id="_1">ä¸€ã€åŸºç¡€</h2>
<h3 id="11">1.1 ä»‹ç»</h3>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=0"><strong>Vue.js æ˜¯ä»€ä¹ˆ</strong></a></li>
</ul>
<p>Vueæ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯,Vueè¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨,Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚,ä¸ä»…æ˜“äºä¸Šæ‰‹,è¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢,å½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶,Vueä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨æ·±å…¥å­¦ä¹  Vue ä¹‹å‰å¯¹å®ƒæœ‰æ›´å¤šäº†è§£,åˆ¶ä½œäº†<a href="https://cn.vuejs.org/v2/guide/index.html#">ä¸€ä¸ªè§†é¢‘</a>,å¸¦æ‚¨äº†è§£å…¶æ ¸å¿ƒæ¦‚å¿µå’Œä¸€ä¸ªç¤ºä¾‹å·¥ç¨‹ã€‚</p>
<ul>
<li><strong>å®‰è£…</strong></li>
</ul>
<p>å°è¯•Vue.jsæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨JSFiddleä¸Šçš„Hello Worldä¾‹å­ã€‚ä½ å¯ä»¥åœ¨æµè§ˆå™¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å®ƒ,è·Ÿç€ä¾‹å­å­¦ä¹ ä¸€äº›åŸºç¡€ç”¨æ³•,æˆ–è€…ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ª.htmlæ–‡ä»¶,ç„¶åé€šè¿‡å¦‚ä¸‹æ–¹å¼å¼•å…¥Vue:</p>
<pre><code class="javascript">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt;
</code></pre>

<p>æˆ–è€…:</p>
<pre><code class="javascript">&lt;!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ --&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt;
</code></pre>

<p>å®‰è£…æ•™ç¨‹ç»™å‡ºäº†æ›´å¤šå®‰è£…Vueçš„æ–¹å¼ã€‚è¯·æ³¨æ„æˆ‘ä»¬ä¸æ¨èæ–°æ‰‹ç›´æ¥ä½¿ç”¨vue-cli,å°¤å…¶æ˜¯åœ¨ä½ è¿˜ä¸ç†Ÿæ‚‰åŸºäºNode.jsçš„æ„å»ºå·¥å…·æ—¶ã€‚</p>
<p>å¦‚æœä½ å–œæ¬¢äº¤äº’å¼çš„ä¸œè¥¿,ä½ ä¹Ÿå¯ä»¥æŸ¥é˜…è¿™ä¸ªScrimbaä¸Šçš„ç³»åˆ—æ•™ç¨‹,å®ƒæ‰åˆäº†å½•å±å’Œä»£ç è¯•éªŒç”°,å¹¶å…è®¸ä½ éšæ—¶æš‚åœå’Œæ’­æ”¾ã€‚</p>
<ul>
<li><strong>å£°æ˜å¼æ¸²æŸ“</strong></li>
</ul>
<p>Vue.jsçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå…è®¸é‡‡ç”¨ç®€æ´çš„æ¨¡æ¿è¯­æ³•æ¥å£°æ˜å¼åœ°å°†æ•°æ®æ¸²æŸ“è¿›DOMçš„ç³»ç»Ÿ:</p>
<pre><code class="html">&lt;div id=&quot;app&quot;&gt;
    {{ message }}
&lt;/div&gt;
var app = new Vue({
    el: '#app',
    data: {
        message: 'Hello Vue!'
    }
})
</code></pre>

<p>æˆ‘ä»¬å·²ç»æˆåŠŸåˆ›å»ºäº†ç¬¬ä¸€ä¸ªVueåº”ç”¨!çœ‹èµ·æ¥è¿™è·Ÿæ¸²æŸ“ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡æ¿éå¸¸ç±»ä¼¼,ä½†æ˜¯Vueåœ¨èƒŒååšäº†å¤§é‡å·¥ä½œã€‚ç°åœ¨æ•°æ®å’ŒDOMå·²ç»è¢«å»ºç«‹äº†å…³è”,æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å“åº”å¼çš„ã€‚æˆ‘ä»¬è¦æ€ä¹ˆç¡®è®¤å‘¢?æ‰“å¼€ä½ çš„æµè§ˆå™¨çš„JavaScriptæ§åˆ¶å°(å°±åœ¨è¿™ä¸ªé¡µé¢æ‰“å¼€),å¹¶ä¿®æ”¹app.messageçš„å€¼,ä½ å°†çœ‹åˆ°ä¸Šä¾‹ç›¸åº”åœ°æ›´æ–°ã€‚</p>
<p>é™¤äº†æ–‡æœ¬æ’å€¼,æˆ‘ä»¬è¿˜å¯ä»¥åƒè¿™æ ·æ¥ç»‘å®šå…ƒç´ ç‰¹æ€§ï¼š</p>
<pre><code class="html">&lt;div id=&quot;app-2&quot;&gt;
    &lt;span v-bind:title=&quot;message&quot;&gt;
        é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„æç¤ºä¿¡æ¯ï¼
    &lt;/span&gt;
&lt;/div&gt;
var app2 = new Vue({
    el: '#app-2',
    data: {
        message: 'é¡µé¢åŠ è½½äº ' + new Date().toLocaleString()
    }
})
</code></pre>

<p>ä½ çœ‹åˆ°çš„v-bindç‰¹æ€§è¢«ç§°ä¸ºæŒ‡ä»¤,æŒ‡ä»¤å¸¦æœ‰å‰ç¼€ v-,ä»¥è¡¨ç¤ºå®ƒä»¬æ˜¯Vueæä¾›çš„ç‰¹æ®Šç‰¹æ€§ã€‚å¯èƒ½ä½ å·²ç»çŒœåˆ°äº†,å®ƒä»¬ä¼šåœ¨æ¸²æŸ“çš„DOMä¸Šåº”ç”¨ç‰¹æ®Šçš„å“åº”å¼è¡Œä¸ºã€‚åœ¨è¿™é‡Œ,è¯¥æŒ‡ä»¤çš„æ„æ€æ˜¯:"å°†è¿™ä¸ªå…ƒç´ èŠ‚ç‚¹çš„titleç‰¹æ€§å’ŒVueå®ä¾‹çš„messageå±æ€§ä¿æŒä¸€è‡´"ã€‚å¦‚æœä½ å†æ¬¡æ‰“å¼€æµè§ˆå™¨çš„JavaScriptæ§åˆ¶å°,è¾“å…¥<code>app2.message='æ–°æ¶ˆæ¯'</code>,å°±ä¼šå†ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªç»‘å®šäº†titleç‰¹æ€§çš„HTMLå·²ç»è¿›è¡Œäº†æ›´æ–°ã€‚</p>
<ul>
<li><strong>æ¡ä»¶ä¸å¾ªç¯</strong></li>
</ul>
<p>æ§åˆ¶åˆ‡æ¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¾ç¤ºä¹Ÿç›¸å½“ç®€å•:</p>
<pre><code class="html">&lt;div id=&quot;app-3&quot;&gt;
    &lt;p v-if=&quot;seen&quot;&gt;ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†&lt;/p&gt;
&lt;/div&gt;
var app3 = new Vue({
    el: '#app-3',
    data: {
        seen: true
    }
})
</code></pre>

<p>ç»§ç»­åœ¨æ§åˆ¶å°è¾“å…¥<code>app3.seen = false</code>,ä½ ä¼šå‘ç°ä¹‹å‰æ˜¾ç¤ºçš„æ¶ˆæ¯æ¶ˆå¤±äº†ã€‚è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†æˆ‘ä»¬ä¸ä»…å¯ä»¥æŠŠæ•°æ®ç»‘å®šåˆ°DOMæ–‡æœ¬æˆ–ç‰¹æ€§,è¿˜å¯ä»¥ç»‘å®šåˆ°DOMç»“æ„ã€‚æ­¤å¤–,Vueä¹Ÿæä¾›ä¸€ä¸ªå¼ºå¤§çš„è¿‡æ¸¡æ•ˆæœç³»ç»Ÿ,å¯ä»¥åœ¨Vueæ’å…¥/æ›´æ–°/ç§»é™¤å…ƒç´ æ—¶è‡ªåŠ¨åº”ç”¨è¿‡æ¸¡æ•ˆæœã€‚</p>
<p>è¿˜æœ‰å…¶å®ƒå¾ˆå¤šæŒ‡ä»¤,æ¯ä¸ªéƒ½æœ‰ç‰¹æ®Šçš„åŠŸèƒ½ã€‚ä¾‹å¦‚v-foræŒ‡ä»¤å¯ä»¥ç»‘å®šæ•°ç»„çš„æ•°æ®æ¥æ¸²æŸ“ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨:</p>
<pre><code class="html">&lt;div id=&quot;app-4&quot;&gt;
    &lt;ol&gt;
        &lt;li v-for=&quot;todo in todos&quot;&gt;
            {{ todo.text }}
        &lt;/li&gt;
    &lt;/ol&gt;
&lt;/div&gt;
var app4 = new Vue({
    el: '#app-4',
    data: {
        todos: [
            { text: 'å­¦ä¹  JavaScript' },
            { text: 'å­¦ä¹  Vue' },
            { text: 'æ•´ä¸ªç‰›é¡¹ç›®' }
        ]
    }
})
</code></pre>

<p>åœ¨æ§åˆ¶å°é‡Œ,è¾“å…¥<code>app4.todos.push({ text: 'æ–°é¡¹ç›®' })</code>,ä½ ä¼šå‘ç°åˆ—è¡¨æœ€åæ·»åŠ äº†ä¸€ä¸ªæ–°é¡¹ç›®ã€‚</p>
<ul>
<li><strong>å¤„ç†ç”¨æˆ·è¾“å…¥</strong></li>
</ul>
<p>ä¸ºäº†è®©ç”¨æˆ·å’Œä½ çš„åº”ç”¨è¿›è¡Œäº¤äº’,æˆ‘ä»¬å¯ä»¥ç”¨ v-onæŒ‡ä»¤æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨,é€šè¿‡å®ƒè°ƒç”¨åœ¨Vueå®ä¾‹ä¸­å®šä¹‰çš„æ–¹æ³•:</p>
<pre><code class="html">&lt;div id=&quot;app-5&quot;&gt;
    &lt;p&gt;{{ message }}&lt;/p&gt;
    &lt;button v-on:click=&quot;reverseMessage&quot;&gt;åè½¬æ¶ˆæ¯&lt;/button&gt;
&lt;/div&gt;
var app5 = new Vue({
    el: '#app-5',
    data: {
        message: 'Hello Vue.js!'
    },
    methods: {
        reverseMessage: function () {
            this.message = this.message.split('').reverse().join('')
        }
    }
})
</code></pre>

<p>æ³¨æ„åœ¨reverseMessageæ–¹æ³•ä¸­,æˆ‘ä»¬æ›´æ–°äº†åº”ç”¨çš„çŠ¶æ€,ä½†æ²¡æœ‰è§¦ç¢°DOMâ€”â€”æ‰€æœ‰çš„DOMæ“ä½œéƒ½ç”±Vueæ¥å¤„ç†,ä½ ç¼–å†™çš„ä»£ç åªéœ€è¦å…³æ³¨é€»è¾‘å±‚é¢å³å¯ã€‚Vueè¿˜æä¾›äº†v-modelæŒ‡ä»¤,å®ƒèƒ½è½»æ¾å®ç°è¡¨å•è¾“å…¥å’Œåº”ç”¨çŠ¶æ€ä¹‹é—´çš„åŒå‘ç»‘å®šã€‚</p>
<pre><code class="html">&lt;div id=&quot;app-6&quot;&gt;
    &lt;p&gt;{{ message }}&lt;/p&gt;
    &lt;input v-model=&quot;message&quot;&gt;
&lt;/div&gt;
var app6 = new Vue({
    el: '#app-6',
    data: {
        message: 'Hello Vue!'
    }
})
</code></pre>

<ul>
<li><strong>ç»„ä»¶åŒ–åº”ç”¨æ„å»º</strong></li>
</ul>
<p>ç»„ä»¶ç³»ç»Ÿæ˜¯Vueçš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µ,å› ä¸ºå®ƒæ˜¯ä¸€ç§æŠ½è±¡,å…è®¸æˆ‘ä»¬ä½¿ç”¨å°å‹ã€ç‹¬ç«‹å’Œé€šå¸¸å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤§å‹åº”ç”¨ã€‚ä»”ç»†æƒ³æƒ³,å‡ ä¹ä»»æ„ç±»å‹çš„åº”ç”¨ç•Œé¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘:</p>
<p><img alt="" src="https://cn.vuejs.org/images/components.png" /></p>
<p>åœ¨Vueé‡Œ,ä¸€ä¸ªç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‹¥æœ‰é¢„å®šä¹‰é€‰é¡¹çš„ä¸€ä¸ªVueå®ä¾‹ã€‚åœ¨Vueä¸­æ³¨å†Œç»„ä»¶å¾ˆç®€å•:</p>
<pre><code class="javascript">// å®šä¹‰åä¸º todo-item çš„æ–°ç»„ä»¶
Vue.component('todo-item', {
  template: '&lt;li&gt;è¿™æ˜¯ä¸ªå¾…åŠé¡¹&lt;/li&gt;'
})
var app = new Vue(...)
</code></pre>

<p>ç°åœ¨ä½ å¯ä»¥ç”¨å®ƒæ„å»ºå¦ä¸€ä¸ªç»„ä»¶æ¨¡æ¿:</p>
<pre><code class="html">&lt;ol&gt;
    &lt;!-- åˆ›å»ºä¸€ä¸ª todo-item ç»„ä»¶çš„å®ä¾‹ --&gt;
    &lt;todo-item&gt;&lt;/todo-item&gt;
&lt;/ol&gt;
</code></pre>

<p>ä½†æ˜¯è¿™æ ·ä¼šä¸ºæ¯ä¸ªå¾…åŠé¡¹æ¸²æŸ“åŒæ ·çš„æ–‡æœ¬,è¿™çœ‹èµ·æ¥å¹¶ä¸ç‚«é…·ã€‚æˆ‘ä»¬åº”è¯¥èƒ½ä»çˆ¶ä½œç”¨åŸŸå°†æ•°æ®ä¼ åˆ°å­ç»„ä»¶æ‰å¯¹ã€‚è®©æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹ç»„ä»¶çš„å®šä¹‰,ä½¿ä¹‹èƒ½å¤Ÿæ¥å—ä¸€ä¸ªpropï¼š</p>
<pre><code class="javascript">Vue.component('todo-item', {
    // todo-itemç»„ä»¶ç°åœ¨æ¥å—ä¸€ä¸ª
    // &quot;prop&quot;,ç±»ä¼¼äºä¸€ä¸ªè‡ªå®šä¹‰ç‰¹æ€§ã€‚
    // è¿™ä¸ªpropåä¸ºtodoã€‚
    props: ['todo'],
    template: '&lt;li&gt;{{ todo.text }}&lt;/li&gt;'
})
</code></pre>

<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨v-bindæŒ‡ä»¤å°†å¾…åŠé¡¹ä¼ åˆ°å¾ªç¯è¾“å‡ºçš„æ¯ä¸ªç»„ä»¶ä¸­:</p>
<pre><code class="html">&lt;div id=&quot;app-7&quot;&gt;
    &lt;ol&gt;
        &lt;!--
            ç°åœ¨æˆ‘ä»¬ä¸ºæ¯ä¸ªtodo-itemæä¾›todoå¯¹è±¡
            todoå¯¹è±¡æ˜¯å˜é‡,å³å…¶å†…å®¹å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚
            æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶æä¾›ä¸€ä¸ªâ€œkeyâ€,ç¨åå†
            ä½œè¯¦ç»†è§£é‡Šã€‚
        --&gt;
        &lt;todo-item
            v-for=&quot;item in groceryList&quot;
            v-bind:todo=&quot;item&quot;
            v-bind:key=&quot;item.id&quot;
        &gt;&lt;/todo-item&gt;
    &lt;/ol&gt;
&lt;/div&gt;
Vue.component('todo-item', {
    props: ['todo'],
    template: '&lt;li&gt;{{ todo.text }}&lt;/li&gt;'
})

var app7 = new Vue({
    el: '#app-7',
    data: {
        groceryList: [
            { id: 0, text: 'è”¬èœ' },
            { id: 1, text: 'å¥¶é…ª' },
            { id: 2, text: 'éšä¾¿å…¶å®ƒä»€ä¹ˆäººåƒçš„ä¸œè¥¿' }
        ]
    }
})
</code></pre>

<p>å°½ç®¡è¿™åªæ˜¯ä¸€ä¸ªåˆ»æ„è®¾è®¡çš„ä¾‹å­,ä½†æ˜¯æˆ‘ä»¬å·²ç»è®¾æ³•å°†åº”ç”¨åˆ†å‰²æˆäº†ä¸¤ä¸ªæ›´å°çš„å•å…ƒã€‚å­å•å…ƒé€šè¿‡propæ¥å£ä¸çˆ¶å•å…ƒè¿›è¡Œäº†è‰¯å¥½çš„è§£è€¦ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥è¿›ä¸€æ­¥æ”¹è¿›<code>&lt;todo-item&gt;</code>ç»„ä»¶,æä¾›æ›´ä¸ºå¤æ‚çš„æ¨¡æ¿å’Œé€»è¾‘,è€Œä¸ä¼šå½±å“åˆ°çˆ¶å•å…ƒã€‚</p>
<p>HTMLä¾‹å­:</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;Vueæµ‹è¯•å®ä¾‹&lt;/title&gt;
    &lt;script src=&quot;https://cdn.staticfile.org/vue/2.4.2/vue.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=&quot;vue_det&quot;&gt;
        &lt;h1&gt;site : {{site}}&lt;/h1&gt;
        &lt;h1&gt;url : {{url}}&lt;/h1&gt;
        &lt;h1&gt;{{details()}}&lt;/h1&gt;
    &lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        var vm = new Vue({
            el: '#vue_det',
            data: {
                site: &quot;æµ‹è¯•å®ä¾‹&quot;,
                url: &quot;www.baidu.com&quot;,
                alexa: &quot;10000&quot;
            },
            methods: {
                details: function() {
                    return  this.site + &quot; - å›½å†…çš„æœç´¢å¼•æ“!&quot;;
                }
            }
        })
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h3 id="12-vue">1.2 Vueå®ä¾‹</h3>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=2"><strong>åˆ›å»ºä¸€ä¸ªVueå®ä¾‹</strong></a></li>
</ul>
<p>æ¯ä¸ªVueåº”ç”¨éƒ½æ˜¯é€šè¿‡ç”¨Vueå‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„Vueå®ä¾‹å¼€å§‹çš„:</p>
<pre><code class="javascript">var vm = new Vue({
  // é€‰é¡¹
})
</code></pre>

<p>è™½ç„¶æ²¡æœ‰å®Œå…¨éµå¾ªMVVMæ¨¡å‹,ä½†æ˜¯Vueçš„è®¾è®¡ä¹Ÿå—åˆ°äº†å®ƒçš„å¯å‘ã€‚å› æ­¤åœ¨æ–‡æ¡£ä¸­ç»å¸¸ä¼šä½¿ç”¨vm(ViewModelçš„ç¼©å†™)è¿™ä¸ªå˜é‡åè¡¨ç¤ºVueå®ä¾‹ã€‚å½“åˆ›å»ºä¸€ä¸ªVueå®ä¾‹æ—¶,ä½ å¯ä»¥ä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ã€‚</p>
<p>ä¸€ä¸ªVueåº”ç”¨ç”±ä¸€ä¸ªé€šè¿‡new Vueåˆ›å»ºçš„æ ¹Vueå®ä¾‹,ä»¥åŠå¯é€‰çš„åµŒå¥—çš„ã€å¯å¤ç”¨çš„ç»„ä»¶æ ‘ç»„æˆã€‚ä¸¾ä¸ªä¾‹å­,ä¸€ä¸ªtodoåº”ç”¨çš„ç»„ä»¶æ ‘å¯ä»¥æ˜¯è¿™æ ·çš„:</p>
<pre><code class="javascript">æ ¹å®ä¾‹
â””â”€ TodoList
   â”œâ”€ TodoItem
   â”‚  â”œâ”€ DeleteTodoButton
   â”‚  â””â”€ EditTodoButton
   â””â”€ TodoListFooter
      â”œâ”€ ClearTodosButton
      â””â”€ TodoListStatistics
</code></pre>

<p>æ‰€æœ‰çš„Vueç»„ä»¶éƒ½æ˜¯Vueå®ä¾‹,å¹¶ä¸”æ¥å—ç›¸åŒçš„é€‰é¡¹å¯¹è±¡(ä¸€äº›æ ¹å®ä¾‹ç‰¹æœ‰çš„é€‰é¡¹é™¤å¤–)ã€‚</p>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=3"><strong>æ•°æ®ä¸æ–¹æ³•</strong></a></li>
</ul>
<p>å½“ä¸€ä¸ªVueå®ä¾‹è¢«åˆ›å»ºæ—¶,å®ƒå°†dataå¯¹è±¡ä¸­çš„æ‰€æœ‰çš„å±æ€§åŠ å…¥åˆ°Vueçš„å“åº”å¼ç³»ç»Ÿä¸­ã€‚å½“è¿™äº›å±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶,è§†å›¾å°†ä¼šäº§ç”Ÿâ€œå“åº”â€,å³åŒ¹é…æ›´æ–°ä¸ºæ–°çš„å€¼ã€‚</p>
<pre><code class="javascript">// æˆ‘ä»¬çš„æ•°æ®å¯¹è±¡
var data = { a: 1 }

// è¯¥å¯¹è±¡è¢«åŠ å…¥åˆ°ä¸€ä¸ª Vue å®ä¾‹ä¸­
var vm = new Vue({
    data: data
})

// è·å¾—è¿™ä¸ªå®ä¾‹ä¸Šçš„å±æ€§
// è¿”å›æºæ•°æ®ä¸­å¯¹åº”çš„å­—æ®µ
vm.a == data.a // =&gt; true

// è®¾ç½®å±æ€§ä¹Ÿä¼šå½±å“åˆ°åŸå§‹æ•°æ®
vm.a = 2
data.a // =&gt; 2

// â€¦â€¦åä¹‹äº¦ç„¶
data.a = 3
vm.a // =&gt; 3
</code></pre>

<p>å½“è¿™äº›æ•°æ®æ”¹å˜æ—¶,è§†å›¾ä¼šè¿›è¡Œé‡æ¸²æŸ“ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯åªæœ‰å½“å®ä¾‹è¢«åˆ›å»ºæ—¶å°±å·²ç»å­˜åœ¨äºdataä¸­çš„å±æ€§æ‰æ˜¯å“åº”å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ æ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§,æ¯”å¦‚:</p>
<pre><code class="javascript">vm.b = 'hi'
</code></pre>

<p>é‚£ä¹ˆå¯¹bçš„æ”¹åŠ¨å°†ä¸ä¼šè§¦å‘ä»»ä½•è§†å›¾çš„æ›´æ–°ã€‚å¦‚æœä½ çŸ¥é“ä½ ä¼šåœ¨æ™šäº›æ—¶å€™éœ€è¦ä¸€ä¸ªå±æ€§,ä½†æ˜¯ä¸€å¼€å§‹å®ƒä¸ºç©ºæˆ–ä¸å­˜åœ¨,é‚£ä¹ˆä½ ä»…éœ€è¦è®¾ç½®ä¸€äº›åˆå§‹å€¼ã€‚æ¯”å¦‚:</p>
<pre><code class="javascript">data: {
  newTodoText: '',
  visitCount: 0,
  hideCompletedTodos: false,
  todos: [],
  error: null
}
</code></pre>

<p>è¿™é‡Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯ä½¿ç”¨<code>Object.freeze()</code>,è¿™ä¼šé˜»æ­¢ä¿®æ”¹ç°æœ‰çš„å±æ€§,ä¹Ÿæ„å‘³ç€å“åº”ç³»ç»Ÿæ— æ³•å†è¿½è¸ªå˜åŒ–ã€‚</p>
<pre><code class="javascript">var obj = {
  foo: 'bar'
}
Object.freeze(obj)

new Vue({
    el: '#app',
    data: obj
})
&lt;div id=&quot;app&quot;&gt;
    &lt;p&gt;{{ foo }}&lt;/p&gt;
    &lt;!-- è¿™é‡Œçš„fooä¸ä¼šæ›´æ–°ï¼ --&gt;
    &lt;button v-on:click=&quot;foo = 'baz'&quot;&gt;Change it&lt;/button&gt;
&lt;/div&gt;
</code></pre>

<p>é™¤äº†æ•°æ®å±æ€§,Vueå®ä¾‹è¿˜æš´éœ²äº†ä¸€äº›æœ‰ç”¨çš„å®ä¾‹å±æ€§ä¸æ–¹æ³•ã€‚å®ƒä»¬éƒ½æœ‰å‰ç¼€<code>$</code>,ä»¥ä¾¿ä¸ç”¨æˆ·å®šä¹‰çš„å±æ€§åŒºåˆ†å¼€æ¥ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">var data = { a: 1 }
var vm = new Vue({
  el: '#example',
  data: data
})

vm.$data === data // =&gt; true
vm.$el === document.getElementById('example') // =&gt; true

// $watchæ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•
vm.$watch('a', function (newValue, oldValue) {
  // è¿™ä¸ªå›è°ƒå°†åœ¨vm.aæ”¹å˜åè°ƒç”¨
})
</code></pre>

<p>ä»¥åä½ å¯ä»¥åœ¨<a href="https://cn.vuejs.org/v2/api/#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">APIå‚è€ƒ</a>ä¸­æŸ¥é˜…åˆ°å®Œæ•´çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•çš„åˆ—è¡¨ã€‚</p>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=4"><strong>å®ä¾‹ç”Ÿå‘½å‘¨æœŸé’©å­</strong></a></li>
</ul>
<p>æ¯ä¸ªVueå®ä¾‹åœ¨è¢«åˆ›å»ºæ—¶éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹â€”â€”ä¾‹å¦‚,éœ€è¦è®¾ç½®æ•°æ®ç›‘å¬ã€ç¼–è¯‘æ¨¡æ¿ã€å°†å®ä¾‹æŒ‚è½½åˆ°DOMå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–°DOMç­‰ã€‚åŒæ—¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿä¼šè¿è¡Œä¸€äº›å«åšç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°,è¿™ç»™äº†ç”¨æˆ·åœ¨ä¸åŒé˜¶æ®µæ·»åŠ è‡ªå·±çš„ä»£ç çš„æœºä¼šã€‚</p>
<p>æ¯”å¦‚<code>created</code>é’©å­å¯ä»¥ç”¨æ¥åœ¨ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºä¹‹åæ‰§è¡Œä»£ç :</p>
<pre><code class="javascript">new Vue({
    data: {
        a: 1
    },
    created: function () {
        // thisæŒ‡å‘vmå®ä¾‹
        console.log('a is: ' + this.a)
    }
})
// =&gt; &quot;a is: 1&quot;
</code></pre>

<p>ä¹Ÿæœ‰ä¸€äº›å…¶å®ƒçš„é’©å­,åœ¨å®ä¾‹ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨,å¦‚<code>mounted</code>ã€<code>updated</code>å’Œ<code>destroyed</code>ã€‚ç”Ÿå‘½å‘¨æœŸé’©å­çš„<code>this</code>ä¸Šä¸‹æ–‡æŒ‡å‘è°ƒç”¨å®ƒçš„Vueå®ä¾‹ã€‚ä¸è¦åœ¨é€‰é¡¹å±æ€§æˆ–å›è°ƒä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°,æ¯”å¦‚<code>created:() =&gt; console.log(this.a)</code>æˆ–<code>vm.$watch('a', newValue =&gt; this.myMethod())</code>ã€‚å› ä¸ºç®­å¤´å‡½æ•°å¹¶æ²¡æœ‰this,thisä¼šä½œä¸ºå˜é‡ä¸€ç›´å‘ä¸Šçº§è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾,ç›´è‡³æ‰¾åˆ°ä¸ºæ­¢,ç»å¸¸å¯¼è‡´Uncaught TypeError: Cannot read property of undefinedæˆ–Uncaught TypeError: this.myMethod is not a functionä¹‹ç±»çš„é”™è¯¯ã€‚</p>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸå›¾ç¤º</strong></li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ ä¸éœ€è¦ç«‹é©¬å¼„æ˜ç™½æ‰€æœ‰çš„ä¸œè¥¿,ä¸è¿‡éšç€ä½ çš„ä¸æ–­å­¦ä¹ å’Œä½¿ç”¨,å®ƒçš„å‚è€ƒä»·å€¼ä¼šè¶Šæ¥è¶Šé«˜ã€‚</p>
<p><img alt="Vueå®ä¾‹ç”Ÿå‘½å‘¨æœŸ" src="http://cn.vuejs.org/images/lifecycle.png" /></p>
<h3 id="13">1.3 æ¨¡æ¿è¯­æ³•</h3>
<p>Vue.jsä½¿ç”¨äº†åŸºäºHTMLçš„æ¨¡æ¿è¯­æ³•,å…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°†DOMç»‘å®šè‡³åº•å±‚Vueå®ä¾‹çš„æ•°æ®ã€‚æ‰€æœ‰Vue.jsçš„æ¨¡æ¿éƒ½æ˜¯åˆæ³•çš„HTML,æ‰€ä»¥èƒ½è¢«éµå¾ªè§„èŒƒçš„æµè§ˆå™¨å’ŒHTMLè§£æå™¨è§£æã€‚åœ¨åº•å±‚çš„å®ç°ä¸Š,Vueå°†æ¨¡æ¿ç¼–è¯‘æˆè™šæ‹ŸDOMæ¸²æŸ“å‡½æ•°ã€‚ç»“åˆå“åº”ç³»ç»Ÿ,Vueèƒ½å¤Ÿæ™ºèƒ½åœ°è®¡ç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘ç»„ä»¶,å¹¶æŠŠDOMæ“ä½œæ¬¡æ•°å‡åˆ°æœ€å°‘ã€‚å¦‚æœä½ ç†Ÿæ‚‰è™šæ‹ŸDOMå¹¶ä¸”åçˆ±JavaScriptçš„åŸå§‹åŠ›é‡,ä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ¨¡æ¿,ç›´æ¥å†™æ¸²æŸ“(render)å‡½æ•°,ä½¿ç”¨å¯é€‰çš„JSXè¯­æ³•ã€‚</p>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=5"><strong>æ’å€¼</strong></a></li>
</ul>
<blockquote>
<ul>
<li><strong>æ–‡æœ¬</strong></li>
</ul>
</blockquote>
<p>æ•°æ®ç»‘å®šæœ€å¸¸è§çš„å½¢å¼å°±æ˜¯ä½¿ç”¨â€œMustacheâ€è¯­æ³•(åŒå¤§æ‹¬å·)çš„æ–‡æœ¬æ’å€¼:</p>
<pre><code class="html">&lt;span&gt;Message: {{ msg }}&lt;/span&gt;
</code></pre>

<p>Mustacheæ ‡ç­¾å°†ä¼šè¢«æ›¿ä»£ä¸ºå¯¹åº”æ•°æ®å¯¹è±¡ä¸Šmsgå±æ€§çš„å€¼ã€‚æ— è®ºä½•æ—¶,ç»‘å®šçš„æ•°æ®å¯¹è±¡ä¸Šmsgå±æ€§å‘ç”Ÿäº†æ”¹å˜,æ’å€¼å¤„çš„å†…å®¹éƒ½ä¼šæ›´æ–°ã€‚é€šè¿‡ä½¿ç”¨<code>v-once</code>æŒ‡ä»¤,ä½ ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼,å½“æ•°æ®æ”¹å˜æ—¶,æ’å€¼å¤„çš„å†…å®¹ä¸ä¼šæ›´æ–°ã€‚ä½†è¯·ç•™å¿ƒè¿™ä¼šå½±å“åˆ°è¯¥èŠ‚ç‚¹ä¸Šçš„å…¶å®ƒæ•°æ®ç»‘å®š:</p>
<pre><code class="html">&lt;span v-once&gt;è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}&lt;/span&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>åŸå§‹HTML</strong></li>
</ul>
</blockquote>
<p>åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬,è€ŒéHTMLä»£ç ã€‚ä¸ºäº†è¾“å‡ºçœŸæ­£çš„HTML,ä½ éœ€è¦ä½¿ç”¨<code>v-html</code>æŒ‡ä»¤:</p>
<pre><code class="html">&lt;p&gt;Using mustaches: {{ rawHtml }}&lt;/p&gt;
&lt;p&gt;Using v-html directive: &lt;span v-html=&quot;rawHtml&quot;&gt;&lt;/span&gt;&lt;/p&gt;
</code></pre>

<p>è¿™ä¸ªspançš„å†…å®¹å°†ä¼šè¢«æ›¿æ¢æˆä¸ºå±æ€§å€¼<code>rawHtml</code>,ç›´æ¥ä½œä¸ºHTMLâ€”â€”ä¼šå¿½ç•¥è§£æå±æ€§å€¼ä¸­çš„æ•°æ®ç»‘å®šã€‚æ³¨æ„,ä½ ä¸èƒ½ä½¿ç”¨<code>v-html</code>æ¥å¤åˆå±€éƒ¨æ¨¡æ¿,å› ä¸ºVueä¸æ˜¯åŸºäºå­—ç¬¦ä¸²çš„æ¨¡æ¿å¼•æ“ã€‚åä¹‹,å¯¹äºç”¨æˆ·ç•Œé¢(UI),ç»„ä»¶æ›´é€‚åˆä½œä¸ºå¯é‡ç”¨å’Œå¯ç»„åˆçš„åŸºæœ¬å•ä½ã€‚</p>
<p><strong>ä½ çš„ç«™ç‚¹ä¸ŠåŠ¨æ€æ¸²æŸ“çš„ä»»æ„HTMLå¯èƒ½ä¼šéå¸¸å±é™©,å› ä¸ºå®ƒå¾ˆå®¹æ˜“å¯¼è‡´XSSæ”»å‡»ã€‚è¯·åªå¯¹å¯ä¿¡å†…å®¹ä½¿ç”¨HTMLæ’å€¼,ç»ä¸è¦å¯¹ç”¨æˆ·æä¾›çš„å†…å®¹ä½¿ç”¨æ’å€¼ã€‚</strong></p>
<blockquote>
<ul>
<li><strong>ç‰¹æ€§</strong></li>
</ul>
</blockquote>
<p>Mustacheè¯­æ³•ä¸èƒ½ä½œç”¨åœ¨HTMLç‰¹æ€§ä¸Š,é‡åˆ°è¿™ç§æƒ…å†µåº”è¯¥ä½¿ç”¨<code>v-bind</code>æŒ‡ä»¤:</p>
<pre><code class="html">&lt;div v-bind:id=&quot;dynamicId&quot;&gt;&lt;/div&gt;
</code></pre>

<p>å¯¹äºå¸ƒå°”ç‰¹æ€§(å®ƒä»¬åªè¦å­˜åœ¨å°±æ„å‘³ç€å€¼ä¸º<code>true</code>),<code>v-bind</code>å·¥ä½œèµ·æ¥ç•¥æœ‰ä¸åŒ,åœ¨è¿™ä¸ªä¾‹å­ä¸­:</p>
<pre><code class="html">&lt;button v-bind:disabled=&quot;isButtonDisabled&quot;&gt;Button&lt;/button&gt;
</code></pre>

<p>å¦‚æœ<code>isButtonDisabled</code>çš„å€¼æ˜¯<code>null</code>ã€<code>undefined</code>æˆ–<code>false</code>,åˆ™<code>disabled</code>ç‰¹æ€§ç”šè‡³ä¸ä¼šè¢«åŒ…å«åœ¨æ¸²æŸ“å‡ºæ¥çš„<code>&lt;button&gt;</code>å…ƒç´ ä¸­ã€‚</p>
<blockquote>
<ul>
<li><strong>ä½¿ç”¨JavaScriptè¡¨è¾¾å¼</strong></li>
</ul>
</blockquote>
<p>è¿„ä»Šä¸ºæ­¢,åœ¨æˆ‘ä»¬çš„æ¨¡æ¿ä¸­,æˆ‘ä»¬ä¸€ç›´éƒ½åªç»‘å®šç®€å•çš„å±æ€§é”®å€¼ã€‚ä½†å®é™…ä¸Š,å¯¹äºæ‰€æœ‰çš„æ•°æ®ç»‘å®š,Vue.jséƒ½æä¾›äº†å®Œå…¨çš„JavaScriptè¡¨è¾¾å¼æ”¯æŒã€‚</p>
<pre><code class="javascript">{{ number + 1 }}
{{ ok ? 'YES' : 'NO' }}
{{ message.split('').reverse().join('') }}
&lt;div v-bind:id=&quot;'list-' + id&quot;&gt;&lt;/div&gt;
</code></pre>

<p>è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨æ‰€å±Vueå®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸ºJavaScriptè¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯,æ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«å•ä¸ªè¡¨è¾¾å¼,æ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<pre><code class="javascript">&lt;!-- è¿™æ˜¯è¯­å¥,ä¸æ˜¯è¡¨è¾¾å¼ --&gt;
{{ var a = 1 }}
&lt;!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆ,è¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ --&gt;
{{ if (ok) { return message } }}
</code></pre>

<p>æ¨¡æ¿è¡¨è¾¾å¼éƒ½è¢«æ”¾åœ¨æ²™ç›’ä¸­,åªèƒ½è®¿é—®å…¨å±€å˜é‡çš„ä¸€ä¸ªç™½åå•,å¦‚Mathå’ŒDateã€‚ä½ ä¸åº”è¯¥åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¯•å›¾è®¿é—®ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</p>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=6"><strong>æŒ‡ä»¤</strong></a></li>
</ul>
<p>æŒ‡ä»¤(Directives)æ˜¯å¸¦æœ‰v-å‰ç¼€çš„ç‰¹æ®Šç‰¹æ€§ã€‚æŒ‡ä»¤ç‰¹æ€§çš„å€¼é¢„æœŸæ˜¯å•ä¸ªJavaScriptè¡¨è¾¾å¼(<code>v-for</code>æ˜¯ä¾‹å¤–æƒ…å†µ,ç¨åæˆ‘ä»¬å†è®¨è®º)ã€‚æŒ‡ä»¤çš„èŒè´£æ˜¯,å½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶,å°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“,å“åº”å¼åœ°ä½œç”¨äºDOMã€‚å›é¡¾æˆ‘ä»¬åœ¨ä»‹ç»ä¸­çœ‹åˆ°çš„ä¾‹å­:</p>
<pre><code class="javascript">&lt;p v-if=&quot;seen&quot;&gt;ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†&lt;/p&gt;
</code></pre>

<p>è¿™é‡Œ,<code>v-if</code>æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼<code>seen</code>çš„å€¼çš„çœŸå‡æ¥æ’å…¥/ç§»é™¤<code>&lt;p&gt;</code>å…ƒç´ ã€‚</p>
<blockquote>
<ul>
<li><strong>å‚æ•°</strong></li>
</ul>
</blockquote>
<p>ä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€,åœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚ä¾‹å¦‚,v-bind æŒ‡ä»¤å¯ä»¥ç”¨äºå“åº”å¼åœ°æ›´æ–°HTMLç‰¹æ€§:</p>
<pre><code class="html">&lt;a v-bind:href=&quot;url&quot;&gt;...&lt;/a&gt;
</code></pre>

<p>åœ¨è¿™é‡Œ<code>href</code>æ˜¯å‚æ•°,å‘ŠçŸ¥<code>v-bind</code>æŒ‡ä»¤å°†è¯¥å…ƒç´ çš„<code>href</code>ç‰¹æ€§ä¸è¡¨è¾¾å¼<code>url</code>çš„å€¼ç»‘å®šã€‚</p>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯<code>v-on</code>æŒ‡ä»¤,å®ƒç”¨äºç›‘å¬DOMäº‹ä»¶:</p>
<pre><code class="html">&lt;a v-on:click=&quot;doSomething&quot;&gt;...&lt;/a&gt;
</code></pre>

<p>åœ¨è¿™é‡Œå‚æ•°æ˜¯ç›‘å¬çš„äº‹ä»¶åã€‚æˆ‘ä»¬ä¹Ÿä¼šæ›´è¯¦ç»†åœ°è®¨è®ºäº‹ä»¶å¤„ç†ã€‚</p>
<blockquote>
<ul>
<li><strong>åŠ¨æ€å‚æ•°</strong></li>
</ul>
</blockquote>
<p>å¯ä»¥ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„JavaScriptè¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°:</p>
<pre><code class="html">&lt;!-- æ³¨æ„,å‚æ•°è¡¨è¾¾å¼çš„å†™æ³•å­˜åœ¨ä¸€äº›çº¦æŸ,å¦‚ä¹‹åçš„â€œå¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸâ€ç« èŠ‚æ‰€è¿°ã€‚--&gt;
&lt;a v-bind:[attributeName]=&quot;url&quot;&gt; ... &lt;/a&gt;
</code></pre>

<p>è¿™é‡Œçš„attributeNameä¼šè¢«ä½œä¸ºä¸€ä¸ªJavaScriptè¡¨è¾¾å¼è¿›è¡ŒåŠ¨æ€æ±‚å€¼,æ±‚å¾—çš„å€¼å°†ä¼šä½œä¸ºæœ€ç»ˆçš„å‚æ•°æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚,å¦‚æœä½ çš„Vueå®ä¾‹æœ‰ä¸€ä¸ª<code>data</code>å±æ€§<code>attributeName</code>,å…¶å€¼ä¸º"href",é‚£ä¹ˆè¿™ä¸ªç»‘å®šå°†ç­‰ä»·äº<code>v-bind:href</code>ã€‚åŒæ ·åœ°,ä½ å¯ä»¥ä½¿ç”¨åŠ¨æ€å‚æ•°ä¸ºä¸€ä¸ªåŠ¨æ€çš„äº‹ä»¶åç»‘å®šå¤„ç†å‡½æ•°:</p>
<pre><code class="html">&lt;a v-on:[eventName]=&quot;doSomething&quot;&gt; ... &lt;/a&gt;
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­,å½“<code>eventName</code>çš„å€¼ä¸º"<code>focus</code>"æ—¶,<code>v-on:[eventName]</code>å°†ç­‰ä»·äº<code>v-on:focus</code>ã€‚</p>
<p><strong>å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ:åŠ¨æ€å‚æ•°é¢„æœŸä¼šæ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²,å¼‚å¸¸æƒ…å†µä¸‹å€¼ä¸ºnullã€‚è¿™ä¸ªç‰¹æ®Šçš„nullå€¼å¯ä»¥è¢«æ˜¾æ€§åœ°ç”¨äºç§»é™¤ç»‘å®šã€‚ä»»ä½•å…¶å®ƒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½å°†ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Šã€‚</strong></p>
<p><strong>å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ:åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸ,å› ä¸ºæŸäº›å­—ç¬¦,å¦‚ç©ºæ ¼å’Œå¼•å·,æ”¾åœ¨HTML attributeåé‡Œæ˜¯æ— æ•ˆçš„ã€‚ä¾‹å¦‚:</strong></p>
<pre><code class="html">&lt;!-- è¿™ä¼šè§¦å‘ä¸€ä¸ªç¼–è¯‘è­¦å‘Š --&gt;
&lt;a v-bind:['foo' + bar]=&quot;value&quot;&gt; ... &lt;/a&gt;
</code></pre>

<p><strong>å˜é€šçš„åŠæ³•æ˜¯ä½¿ç”¨æ²¡æœ‰ç©ºæ ¼æˆ–å¼•å·çš„è¡¨è¾¾å¼,æˆ–ç”¨è®¡ç®—å±æ€§æ›¿ä»£è¿™ç§å¤æ‚è¡¨è¾¾å¼ã€‚</strong></p>
<p>åœ¨DOMä¸­ä½¿ç”¨æ¨¡æ¿æ—¶(ç›´æ¥åœ¨ä¸€ä¸ªHTMLæ–‡ä»¶é‡Œæ’°å†™æ¨¡æ¿),è¿˜éœ€è¦é¿å…ä½¿ç”¨å¤§å†™å­—ç¬¦æ¥å‘½åé”®å,å› ä¸ºæµè§ˆå™¨ä¼šæŠŠattributeåå…¨éƒ¨å¼ºåˆ¶è½¬ä¸ºå°å†™:</p>
<pre><code class="html">&lt;!--
åœ¨DOMä¸­ä½¿ç”¨æ¨¡æ¿æ—¶è¿™æ®µä»£ç ä¼šè¢«è½¬æ¢ä¸ºv-bind:[someattr]ã€‚
é™¤éåœ¨å®ä¾‹ä¸­æœ‰ä¸€ä¸ªåä¸ºâ€œsomeattrâ€çš„property,å¦åˆ™ä»£ç ä¸ä¼šå·¥ä½œã€‚
--&gt;
&lt;a v-bind:[someAttr]=&quot;value&quot;&gt; ... &lt;/a&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>ä¿®é¥°ç¬¦</strong></li>
</ul>
</blockquote>
<p>ä¿®é¥°ç¬¦(modifier)æ˜¯ä»¥åŠè§’å¥å·.æŒ‡æ˜çš„ç‰¹æ®Šåç¼€,ç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šã€‚ä¾‹å¦‚,<code>.prevent</code>ä¿®é¥°ç¬¦å‘Šè¯‰<code>v-on</code>æŒ‡ä»¤å¯¹äºè§¦å‘çš„äº‹ä»¶è°ƒç”¨<code>event.preventDefault()</code>:</p>
<pre><code class="html">&lt;form v-on:submit.prevent=&quot;onSubmit&quot;&gt;...&lt;/form&gt;
</code></pre>

<p>åœ¨æ¥ä¸‹æ¥å¯¹<code>v-on</code>å’Œ<code>v-for</code>ç­‰åŠŸèƒ½çš„æ¢ç´¢ä¸­,ä½ ä¼šçœ‹åˆ°ä¿®é¥°ç¬¦çš„å…¶å®ƒä¾‹å­ã€‚</p>
<ul>
<li><strong>ç¼©å†™</strong></li>
</ul>
<p>v-å‰ç¼€ä½œä¸ºä¸€ç§è§†è§‰æç¤º,ç”¨æ¥è¯†åˆ«æ¨¡æ¿ä¸­Vueç‰¹å®šçš„ç‰¹æ€§ã€‚å½“ä½ åœ¨ä½¿ç”¨Vue.jsä¸ºç°æœ‰æ ‡ç­¾æ·»åŠ åŠ¨æ€è¡Œä¸º(dynamic behavior)æ—¶,v-å‰ç¼€å¾ˆæœ‰å¸®åŠ©,ç„¶è€Œ,å¯¹äºä¸€äº›é¢‘ç¹ç”¨åˆ°çš„æŒ‡ä»¤æ¥è¯´,å°±ä¼šæ„Ÿåˆ°ä½¿ç”¨ç¹çã€‚åŒæ—¶,åœ¨æ„å»ºç”±Vueç®¡ç†æ‰€æœ‰æ¨¡æ¿çš„å•é¡µé¢åº”ç”¨ç¨‹åº(SPA-single page application)æ—¶,v-å‰ç¼€ä¹Ÿå˜å¾—æ²¡é‚£ä¹ˆé‡è¦äº†ã€‚å› æ­¤,Vueä¸º<code>v-bind</code>å’Œ<code>v-on</code>è¿™ä¸¤ä¸ªæœ€å¸¸ç”¨çš„æŒ‡ä»¤,æä¾›äº†ç‰¹å®šç®€å†™:</p>
<p><code>v-bind</code>ç¼©å†™</p>
<pre><code class="html">&lt;!-- å®Œæ•´è¯­æ³• --&gt;
&lt;a v-bind:href=&quot;url&quot;&gt;...&lt;/a&gt;
&lt;!-- ç¼©å†™ --&gt;
&lt;a :href=&quot;url&quot;&gt;...&lt;/a&gt;
â€¦
</code></pre>

<p><code>v-on</code>ç¼©å†™</p>
<pre><code class="html">&lt;!-- å®Œæ•´è¯­æ³• --&gt;
&lt;a v-on:click=&quot;doSomething&quot;&gt;...&lt;/a&gt;
&lt;!-- ç¼©å†™ --&gt;
&lt;a @click=&quot;doSomething&quot;&gt;...&lt;/a&gt;
â€¦
</code></pre>

<p>å®ƒä»¬çœ‹èµ·æ¥å¯èƒ½ä¸æ™®é€šçš„HTMLç•¥æœ‰ä¸åŒ,ä½†<code>:</code>ä¸<code>@</code>å¯¹äºç‰¹æ€§åæ¥è¯´éƒ½æ˜¯åˆæ³•å­—ç¬¦,åœ¨æ‰€æœ‰æ”¯æŒVueçš„æµè§ˆå™¨éƒ½èƒ½è¢«æ­£ç¡®åœ°è§£æã€‚è€Œä¸”,å®ƒä»¬ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆæ¸²æŸ“çš„æ ‡è®°ä¸­ã€‚ç¼©å†™è¯­æ³•æ˜¯å®Œå…¨å¯é€‰çš„,ä½†éšç€ä½ æ›´æ·±å…¥åœ°äº†è§£å®ƒä»¬çš„ä½œç”¨,ä½ ä¼šåº†å¹¸æ‹¥æœ‰å®ƒä»¬ã€‚</p>
<h3 id="14">1.4 è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨</h3>
<ul>
<li><strong>åŸºç¡€ä¾‹å­</strong><blockquote>
<ul>
<li><strong>è®¡ç®—å±æ€§</strong></li>
</ul>
</blockquote>
</li>
</ul>
<p>æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©,ä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;div id=&quot;example&quot;&gt;
  {{ message.split('').reverse().join('') }}
&lt;/div&gt;
</code></pre>

<p>åœ¨è¿™ä¸ªåœ°æ–¹,æ¨¡æ¿ä¸å†æ˜¯ç®€å•çš„å£°æ˜å¼é€»è¾‘ã€‚ä½ å¿…é¡»çœ‹ä¸€æ®µæ—¶é—´æ‰èƒ½æ„è¯†åˆ°,è¿™é‡Œæ˜¯æƒ³è¦æ˜¾ç¤ºå˜é‡messageçš„ç¿»è½¬å­—ç¬¦ä¸²ã€‚å½“ä½ æƒ³è¦åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡å¼•ç”¨æ­¤å¤„çš„ç¿»è½¬å­—ç¬¦ä¸²æ—¶,å°±ä¼šæ›´åŠ éš¾ä»¥å¤„ç†ã€‚æ‰€ä»¥,å¯¹äºä»»ä½•å¤æ‚é€»è¾‘,ä½ éƒ½åº”å½“ä½¿ç”¨è®¡ç®—å±æ€§ã€‚</p>
<pre><code class="html">&lt;div id=&quot;example&quot;&gt;
    &lt;p&gt;Original message: &quot;{{ message }}&quot;&lt;/p&gt;
    &lt;p&gt;Computed reversed message: &quot;{{ reversedMessage }}&quot;&lt;/p&gt;
&lt;/div&gt;
var vm = new Vue({
    el: '#example',
    data: {
        message: 'Hello'
    },
    computed: {
        // è®¡ç®—å±æ€§çš„ getter
        reversedMessage: function () {
            // `this` æŒ‡å‘ vm å®ä¾‹
            return this.message.split('').reverse().join('')
        }
    }
})
</code></pre>

<p>è¿™é‡Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªè®¡ç®—å±æ€§<code>reversedMessage</code>ã€‚æˆ‘ä»¬æä¾›çš„å‡½æ•°å°†ç”¨ä½œå±æ€§<code>vm.reversedMessage</code>çš„<code>getter</code>å‡½æ•°:</p>
<pre><code class="html">console.log(vm.reversedMessage) // =&gt; 'olleH'
vm.message = 'Goodbye'
console.log(vm.reversedMessage) // =&gt; 'eybdooG'
</code></pre>

<p>ä½ å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°,è‡ªè¡Œä¿®æ”¹ä¾‹å­ä¸­çš„vmã€‚<code>vm.reversedMessage</code>çš„å€¼å§‹ç»ˆå–å†³äº<code>vm.message</code>çš„å€¼ã€‚ä½ å¯ä»¥åƒç»‘å®šæ™®é€šå±æ€§ä¸€æ ·åœ¨æ¨¡æ¿ä¸­ç»‘å®šè®¡ç®—å±æ€§ã€‚VueçŸ¥é“<code>vm.reversedMessage</code>ä¾èµ–äº<code>vm.message</code>,å› æ­¤å½“<code>vm.message</code>å‘ç”Ÿæ”¹å˜æ—¶,æ‰€æœ‰ä¾èµ–<code>vm.reversedMessage</code>çš„ç»‘å®šä¹Ÿä¼šæ›´æ–°ã€‚è€Œä¸”æœ€å¦™çš„æ˜¯æˆ‘ä»¬å·²ç»ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºäº†è¿™ç§ä¾èµ–å…³ç³»:è®¡ç®—å±æ€§çš„getterå‡½æ•°æ˜¯æ²¡æœ‰å‰¯ä½œç”¨(side effect)çš„,è¿™ä½¿å®ƒæ›´æ˜“äºæµ‹è¯•å’Œç†è§£ã€‚</p>
<blockquote>
<ul>
<li><strong>è®¡ç®—å±æ€§ç¼“å­˜vsæ–¹æ³•</strong></li>
</ul>
</blockquote>
<p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨æ–¹æ³•æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ:</p>
<pre><code class="html">&lt;p&gt;Reversed message: &quot;{{ reversedMessage() }}&quot;&lt;/p&gt;
// åœ¨ç»„ä»¶ä¸­
methods: {
    reversedMessage: function () {
        return this.message.split('').reverse().join('')
    }
}
</code></pre>

<p>æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ç„¶è€Œ,ä¸åŒçš„æ˜¯è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦messageè¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜,å¤šæ¬¡è®¿é—®<code>reversedMessage</code>è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœ,è€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>è¿™ä¹ŸåŒæ ·æ„å‘³ç€ä¸‹é¢çš„è®¡ç®—å±æ€§å°†ä¸å†æ›´æ–°,å› ä¸º<code>Date.now()</code>ä¸æ˜¯å“åº”å¼ä¾èµ–:</p>
<pre><code class="javascript">computed: {
    now: function () {
        return Date.now()
    }
}
</code></pre>

<p>ç›¸æ¯”ä¹‹ä¸‹,æ¯å½“è§¦å‘é‡æ–°æ¸²æŸ“æ—¶,è°ƒç”¨æ–¹æ³•å°†æ€»ä¼šå†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜?å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§çš„è®¡ç®—å±æ€§A,å®ƒéœ€è¦éå†ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšå¤§é‡çš„è®¡ç®—ã€‚ç„¶åæˆ‘ä»¬å¯èƒ½æœ‰å…¶ä»–çš„è®¡ç®—å±æ€§ä¾èµ–äºAã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜,æˆ‘ä»¬å°†ä¸å¯é¿å…çš„å¤šæ¬¡æ‰§è¡ŒAçš„getter!å¦‚æœä½ ä¸å¸Œæœ›æœ‰ç¼“å­˜,è¯·ç”¨æ–¹æ³•æ¥æ›¿ä»£ã€‚</p>
<blockquote>
<ul>
<li><strong>è®¡ç®—å±æ€§vsä¾¦å¬å±æ€§</strong></li>
</ul>
</blockquote>
<p>Vueæä¾›äº†ä¸€ç§æ›´é€šç”¨çš„æ–¹å¼æ¥è§‚å¯Ÿå’Œå“åº”Vueå®ä¾‹ä¸Šçš„æ•°æ®å˜åŠ¨:ä¾¦å¬å±æ€§ã€‚å½“ä½ æœ‰ä¸€äº›æ•°æ®éœ€è¦éšç€å…¶å®ƒæ•°æ®å˜åŠ¨è€Œå˜åŠ¨æ—¶,ä½ å¾ˆå®¹æ˜“æ»¥ç”¨watchâ€”â€”ç‰¹åˆ«æ˜¯å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡AngularJSã€‚ç„¶è€Œ,é€šå¸¸æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨è®¡ç®—å±æ€§è€Œä¸æ˜¯å‘½ä»¤å¼çš„watchå›è°ƒã€‚ç»†æƒ³ä¸€ä¸‹è¿™ä¸ªä¾‹å­:</p>
<pre><code class="html">&lt;div id=&quot;demo&quot;&gt;{{ fullName }}&lt;/div&gt;
var vm = new Vue({
    el: '#demo',
    data: {
        firstName: 'Foo',
        lastName: 'Bar',
        fullName: 'Foo Bar'
    },
    watch: {
        firstName: function (val) {
            this.fullName = val + ' ' + this.lastName
        },
        lastName: function (val) {
            this.fullName = this.firstName + ' ' + val
        }
    }
})
</code></pre>

<p>ä¸Šé¢ä»£ç æ˜¯å‘½ä»¤å¼ä¸”é‡å¤çš„ã€‚å°†å®ƒä¸è®¡ç®—å±æ€§çš„ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒ:</p>
<pre><code class="javascript">var vm = new Vue({
    el: '#demo',
    data: {
        firstName: 'Foo',
        lastName: 'Bar'
    },
    computed: {
        fullName: function () {
            return this.firstName + ' ' + this.lastName
        }
    }
})
</code></pre>

<p>å¥½å¾—å¤šäº†,ä¸æ˜¯å—?</p>
<blockquote>
<ul>
<li><strong>è®¡ç®—å±æ€§çš„setter</strong></li>
</ul>
</blockquote>
<p>è®¡ç®—å±æ€§é»˜è®¤åªæœ‰getter,ä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªsetter:</p>
<pre><code class="javascript">// ...
computed: {
    fullName: {
        // getter
        get: function () {
            return this.firstName + ' ' + this.lastName
        },
        // setter
        set: function (newValue) {
            var names = newValue.split(' ')
            this.firstName = names[0]
            this.lastName = names[names.length - 1]
        }
    }
}
// ...
</code></pre>

<p>ç°åœ¨å†è¿è¡Œ<code>vm.fullName='John Doe'</code>æ—¶,<code>setter</code>ä¼šè¢«è°ƒç”¨,<code>vm.firstName</code>å’Œ<code>vm.lastName</code>ä¹Ÿä¼šç›¸åº”åœ°è¢«æ›´æ–°ã€‚</p>
<ul>
<li><strong>ä¾¦å¬å™¨</strong></li>
</ul>
<p>è™½ç„¶è®¡ç®—å±æ€§åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›´åˆé€‚,ä½†æœ‰æ—¶ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¾¦å¬å™¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆVueé€šè¿‡watché€‰é¡¹æä¾›äº†ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³•,æ¥å“åº”æ•°æ®çš„å˜åŒ–ã€‚å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶,è¿™ä¸ªæ–¹å¼æ˜¯æœ€æœ‰ç”¨çš„ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;div id=&quot;watch-example&quot;&gt;
    &lt;p&gt;
        Ask a yes/no question:
        &lt;input v-model=&quot;question&quot;&gt;
    &lt;/p&gt;
    &lt;p&gt;{{ answer }}&lt;/p&gt;
&lt;/div&gt;
&lt;!-- å› ä¸ºAJAXåº“å’Œé€šç”¨å·¥å…·çš„ç”Ÿæ€å·²ç»ç›¸å½“ä¸°å¯Œ,Vueæ ¸å¿ƒä»£ç æ²¡æœ‰é‡å¤ --&gt;
&lt;!-- æä¾›è¿™äº›åŠŸèƒ½ä»¥ä¿æŒç²¾ç®€ã€‚è¿™ä¹Ÿå¯ä»¥è®©ä½ è‡ªç”±é€‰æ‹©è‡ªå·±æ›´ç†Ÿæ‚‰çš„å·¥å…·ã€‚ --&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
var watchExampleVM = new Vue({
    el: '#watch-example',
    data: {
        question: '',
        answer: 'I cannot give you an answer until you ask a question!'
    },
    watch: {
        // å¦‚æœquestionå‘ç”Ÿæ”¹å˜,è¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ
        question: function (newQuestion, oldQuestion) {
            this.answer = 'Waiting for you to stop typing...'
            this.debouncedGetAnswer()
        }
    },
    created: function () {
        // _.debounceæ˜¯ä¸€ä¸ªé€šè¿‡Lodashé™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚
        // åœ¨è¿™ä¸ªä¾‹å­ä¸­,æˆ‘ä»¬å¸Œæœ›é™åˆ¶è®¿é—®yesno.wtf/apiçš„é¢‘ç‡
        // AJAXè¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº
        // _.debounceå‡½æ•° (åŠå…¶è¿‘äº²_.throttle)çš„çŸ¥è¯†,
        // è¯·å‚è€ƒ:https://lodash.com/docs#debounce
        this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)
    },
    methods: {
        getAnswer: function () {
            if (this.question.indexOf('?') === -1) {
                this.answer = 'Questions usually contain a question mark. ;-)'
                return
            }
            this.answer = 'Thinking...'
            var vm = this
            axios.get('https://yesno.wtf/api')
                .then(function (response) {
                vm.answer = _.capitalize(response.data.answer)
                })
                .catch(function (error) {
                vm.answer = 'Error! Could not reach the API. ' + error
                })
        }
    }
})
&lt;/script&gt;
</code></pre>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­,ä½¿ç”¨watché€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ(è®¿é—®ä¸€ä¸ªAPI),é™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡,å¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰,è®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚é™¤äº†watché€‰é¡¹ä¹‹å¤–,æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤å¼çš„<a href="https://cn.vuejs.org/v2/api/#vm-watch">vm.$watch API</a>ã€‚</p>
<h3 id="15-classstyle">1.5 Classä¸Style ç»‘å®š</h3>
<p>æ“ä½œå…ƒç´ çš„classåˆ—è¡¨å’Œå†…è”æ ·å¼æ˜¯æ•°æ®ç»‘å®šçš„ä¸€ä¸ªå¸¸è§éœ€æ±‚ã€‚å› ä¸ºå®ƒä»¬éƒ½æ˜¯å±æ€§,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨v-bindå¤„ç†å®ƒä»¬:åªéœ€è¦é€šè¿‡è¡¨è¾¾å¼è®¡ç®—å‡ºå­—ç¬¦ä¸²ç»“æœå³å¯ã€‚ä¸è¿‡,å­—ç¬¦ä¸²æ‹¼æ¥éº»çƒ¦ä¸”æ˜“é”™ã€‚å› æ­¤,åœ¨å°†v-bindç”¨äºclasså’Œstyleæ—¶,Vue.js åšäº†ä¸“é—¨çš„å¢å¼ºã€‚è¡¨è¾¾å¼ç»“æœçš„ç±»å‹é™¤äº†å­—ç¬¦ä¸²ä¹‹å¤–,è¿˜å¯ä»¥æ˜¯å¯¹è±¡æˆ–æ•°ç»„ã€‚</p>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=7"><strong>ç»‘å®šHTML Class</strong></a></li>
</ul>
<blockquote>
<ul>
<li>å¯¹è±¡è¯­æ³•</li>
</ul>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä¼ ç»™v-bind:classä¸€ä¸ªå¯¹è±¡,ä»¥åŠ¨æ€åœ°åˆ‡æ¢class:</p>
<pre><code class="html">&lt;div v-bind:class=&quot;{ active: isActive }&quot;&gt;&lt;/div&gt;
</code></pre>

<p>ä¸Šé¢çš„è¯­æ³•è¡¨ç¤º<code>active</code>è¿™ä¸ª<code>class</code>å­˜åœ¨ä¸å¦å°†å–å†³äºæ•°æ®å±æ€§<code>isActive</code>çš„<code>truthiness</code>ã€‚</p>
<p>ä½ å¯ä»¥åœ¨å¯¹è±¡ä¸­ä¼ å…¥æ›´å¤šå±æ€§æ¥åŠ¨æ€åˆ‡æ¢å¤šä¸ªclassã€‚æ­¤å¤–,v-bind:classæŒ‡ä»¤ä¹Ÿå¯ä»¥ä¸æ™®é€šçš„classå±æ€§å…±å­˜ã€‚å½“æœ‰å¦‚ä¸‹æ¨¡æ¿:</p>
<pre><code class="html">&lt;div
  class=&quot;static&quot;
  v-bind:class=&quot;{ active: isActive, 'text-danger': hasError }&quot;
&gt;&lt;/div&gt;
</code></pre>

<p>å’Œå¦‚ä¸‹ data:</p>
<pre><code class="javascript">data: {
  isActive: true,
  hasError: false
}
</code></pre>

<p>ç»“æœæ¸²æŸ“ä¸º:<code>&lt;div class="static active"&gt;&lt;/div&gt;</code>ã€‚å½“<code>isActive</code>æˆ–è€…<code>hasError</code>å˜åŒ–æ—¶,<code>class</code>åˆ—è¡¨å°†ç›¸åº”åœ°æ›´æ–°ã€‚ä¾‹å¦‚,å¦‚æœ<code>hasError</code>çš„å€¼ä¸º<code>true</code>,<code>class</code>åˆ—è¡¨å°†å˜ä¸º"<code>static active text-danger</code>"ã€‚</p>
<p>ç»‘å®šçš„æ•°æ®å¯¹è±¡ä¸å¿…å†…è”å®šä¹‰åœ¨æ¨¡æ¿é‡Œ:</p>
<pre><code class="html">&lt;div v-bind:class=&quot;classObject&quot;&gt;&lt;/div&gt;
data: {
    classObject: {
        active: true,
        'text-danger': false
    }
}
</code></pre>

<p>æ¸²æŸ“çš„ç»“æœå’Œä¸Šé¢ä¸€æ ·ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œç»‘å®šä¸€ä¸ªè¿”å›å¯¹è±¡çš„è®¡ç®—å±æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨ä¸”å¼ºå¤§çš„æ¨¡å¼:</p>
<pre><code class="javascript">&lt;div v-bind:class=&quot;classObject&quot;&gt;&lt;/div&gt;
data: {
  isActive: true,
  error: null
},
computed: {
    classObject: function () {
        return {
            active: this.isActive &amp;&amp; !this.error,
            'text-danger': this.error &amp;&amp; this.error.type === 'fatal'
        }
    }
}
</code></pre>

<blockquote>
<ul>
<li><strong>æ•°ç»„è¯­æ³•</strong></li>
</ul>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªæ•°ç»„ä¼ ç»™v-bind:class,ä»¥åº”ç”¨ä¸€ä¸ªclassåˆ—è¡¨:</p>
<pre><code class="html">&lt;div v-bind:class=&quot;[activeClass, errorClass]&quot;&gt;&lt;/div&gt;
data: {
    activeClass: 'active',
    errorClass: 'text-danger'
}
</code></pre>

<p>æ¸²æŸ“ä¸º:<code>&lt;div class="active text-danger"&gt;&lt;/div&gt;</code>,å¦‚æœä½ ä¹Ÿæƒ³æ ¹æ®æ¡ä»¶åˆ‡æ¢åˆ—è¡¨ä¸­çš„<code>class</code>,å¯ä»¥ç”¨ä¸‰å…ƒè¡¨è¾¾å¼:</p>
<pre><code class="html">&lt;div v-bind:class=&quot;[isActive ? activeClass : '', errorClass]&quot;&gt;&lt;/div&gt;
</code></pre>

<p>è¿™æ ·å†™å°†å§‹ç»ˆæ·»åŠ <code>errorClass</code>,ä½†æ˜¯åªæœ‰åœ¨<code>isActive</code>æ˜¯<code>truthy</code>æ—¶æ‰æ·»åŠ <code>activeClass</code>ã€‚</p>
<p>ä¸è¿‡,å½“æœ‰å¤šä¸ªæ¡ä»¶<code>class</code>æ—¶è¿™æ ·å†™æœ‰äº›ç¹çã€‚æ‰€ä»¥åœ¨æ•°ç»„è¯­æ³•ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡è¯­æ³•:</p>
<pre><code class="html">&lt;div v-bind:class=&quot;[{ active: isActive }, errorClass]&quot;&gt;&lt;/div&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>ç”¨åœ¨ç»„ä»¶ä¸Š</strong></li>
</ul>
</blockquote>
<p>è¿™ä¸ªç« èŠ‚å‡è®¾ä½ å·²ç»å¯¹Vueç»„ä»¶æœ‰ä¸€å®šçš„äº†è§£ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å…ˆè·³è¿‡è¿™é‡Œ,ç¨åå†å›è¿‡å¤´æ¥çœ‹ã€‚</p>
<p>å½“åœ¨ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ä¸Šä½¿ç”¨<code>class</code>å±æ€§æ—¶,è¿™äº›<code>class</code>å°†è¢«æ·»åŠ åˆ°è¯¥ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šé¢ã€‚è¿™ä¸ªå…ƒç´ ä¸Šå·²ç»å­˜åœ¨çš„classä¸ä¼šè¢«è¦†ç›–ã€‚ä¾‹å¦‚,å¦‚æœä½ å£°æ˜äº†è¿™ä¸ªç»„ä»¶:</p>
<pre><code class="javascript">Vue.component('my-component', {
    template: '&lt;p class=&quot;foo bar&quot;&gt;Hi&lt;/p&gt;'
})
</code></pre>

<p>ç„¶ååœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™æ·»åŠ ä¸€äº›class:</p>
<pre><code class="html">&lt;my-component class=&quot;baz boo&quot;&gt;&lt;/my-component&gt;
</code></pre>

<p>HTML å°†è¢«æ¸²æŸ“ä¸º:<code>&lt;p class="foo bar baz boo"&gt;Hi&lt;/p&gt;</code>,å¯¹äºå¸¦æ•°æ®ç»‘å®š<code>class</code>ä¹ŸåŒæ ·é€‚ç”¨:</p>
<pre><code class="html">&lt;my-component v-bind:class=&quot;{ active: isActive }&quot;&gt;&lt;/my-component&gt;
</code></pre>

<p>å½“<code>isActive</code>ä¸º<code>truthy</code>æ—¶,HTMLå°†è¢«æ¸²æŸ“æˆä¸º:<code>&lt;p class="foo bar active"&gt;Hi&lt;/p&gt;</code>ã€‚</p>
<ul>
<li><strong>ç»‘å®šå†…è”æ ·å¼</strong></li>
</ul>
<blockquote>
<ul>
<li><strong>å¯¹è±¡è¯­æ³•</strong></li>
</ul>
</blockquote>
<p><code>v-bind:style</code>çš„å¯¹è±¡è¯­æ³•ååˆ†ç›´è§‚â€”â€”çœ‹ç€éå¸¸åƒCSS,ä½†å…¶å®æ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ã€‚CSSå±æ€§åå¯ä»¥ç”¨é©¼å³°å¼(camelCase)æˆ–çŸ­æ¨ªçº¿åˆ†éš”(kebab-case,è®°å¾—ç”¨å¼•å·æ‹¬èµ·æ¥)æ¥å‘½å:</p>
<pre><code class="html">&lt;div v-bind:style=&quot;{ color: activeColor, fontSize: fontSize + 'px' }&quot;&gt;&lt;/div&gt;
data: {
    activeColor: 'red',
    fontSize: 30
}
</code></pre>

<p>ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªæ ·å¼å¯¹è±¡é€šå¸¸æ›´å¥½,è¿™ä¼šè®©æ¨¡æ¿æ›´æ¸…æ™°:</p>
<pre><code class="html">&lt;div v-bind:style=&quot;styleObject&quot;&gt;&lt;/div&gt;
data: {
    styleObject: {
        color: 'red',
        fontSize: '13px'
    }
}
</code></pre>

<p>åŒæ ·çš„,å¯¹è±¡è¯­æ³•å¸¸å¸¸ç»“åˆè¿”å›å¯¹è±¡çš„è®¡ç®—å±æ€§ä½¿ç”¨ã€‚</p>
<blockquote>
<ul>
<li><strong>æ•°ç»„è¯­æ³•</strong></li>
</ul>
</blockquote>
<p><code>v-bind:style</code>çš„æ•°ç»„è¯­æ³•å¯ä»¥å°†å¤šä¸ªæ ·å¼å¯¹è±¡åº”ç”¨åˆ°åŒä¸€ä¸ªå…ƒç´ ä¸Š:<code>&lt;div v-bind:style="[baseStyles, overridingStyles]"&gt;&lt;/div&gt;</code>ã€‚</p>
<blockquote>
<ul>
<li><strong>è‡ªåŠ¨æ·»åŠ å‰ç¼€</strong></li>
</ul>
</blockquote>
<p>å½“v-bind:styleä½¿ç”¨éœ€è¦æ·»åŠ æµè§ˆå™¨å¼•æ“å‰ç¼€çš„CSSå±æ€§æ—¶,å¦‚<code>transform</code>,Vue.jsä¼šè‡ªåŠ¨ä¾¦æµ‹å¹¶æ·»åŠ ç›¸åº”çš„å‰ç¼€ã€‚</p>
<blockquote>
<ul>
<li><strong>å¤šé‡å€¼</strong></li>
</ul>
</blockquote>
<p>å¯ä»¥ä¸ºstyleç»‘å®šä¸­çš„å±æ€§æä¾›ä¸€ä¸ªåŒ…å«å¤šä¸ªå€¼çš„æ•°ç»„,å¸¸ç”¨äºæä¾›å¤šä¸ªå¸¦å‰ç¼€çš„å€¼,ä¾‹å¦‚:</p>
<pre><code class="html">&lt;div :style=&quot;{ display: ['-webkit-box', '-ms-flexbox', 'flex'] }&quot;&gt;&lt;/div&gt;
</code></pre>

<p>è¿™æ ·å†™åªä¼šæ¸²æŸ“æ•°ç»„ä¸­æœ€åä¸€ä¸ªè¢«æµè§ˆå™¨æ”¯æŒçš„å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­,å¦‚æœæµè§ˆå™¨æ”¯æŒä¸å¸¦æµè§ˆå™¨å‰ç¼€çš„<code>flexbox</code>,é‚£ä¹ˆå°±åªä¼šæ¸²æŸ“<code>display: flex</code>ã€‚</p>
<h3 id="16">1.6 æ¡ä»¶æ¸²æŸ“</h3>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=8"><strong>v-if</strong></a></li>
</ul>
<p><code>v-if</code>æŒ‡ä»¤ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚è¿™å—å†…å®¹åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å›truthyå€¼çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚</p>
<pre><code class="html">&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;
</code></pre>

<p>ä¹Ÿå¯ä»¥ç”¨<code>v-else</code>æ·»åŠ ä¸€ä¸ªâ€œ<code>else</code>å—â€:</p>
<pre><code class="html">&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;
&lt;h1 v-else&gt;Oh no ğŸ˜¢&lt;/h1&gt;
</code></pre>

<blockquote>
<ul>
<li>åœ¨<code>&lt;template&gt;</code>å…ƒç´ ä¸Šä½¿ç”¨<code>v-if</code>æ¡ä»¶æ¸²æŸ“åˆ†ç»„</li>
</ul>
</blockquote>
<p>å› ä¸ºv-ifæ˜¯ä¸€ä¸ªæŒ‡ä»¤,æ‰€ä»¥å¿…é¡»å°†å®ƒæ·»åŠ åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šã€‚ä½†æ˜¯å¦‚æœæƒ³åˆ‡æ¢å¤šä¸ªå…ƒç´ å‘¢?æ­¤æ—¶å¯ä»¥æŠŠä¸€ä¸ª<code>&lt;template&gt;</code>å…ƒç´ å½“åšä¸å¯è§çš„åŒ…è£¹å…ƒç´ ,å¹¶åœ¨ä¸Šé¢ä½¿ç”¨<code>v-if</code>ã€‚æœ€ç»ˆçš„æ¸²æŸ“ç»“æœå°†ä¸åŒ…å«<code>&lt;template&gt;</code>å…ƒç´ ã€‚</p>
<pre><code class="html">&lt;template v-if=&quot;ok&quot;&gt;
    &lt;h1&gt;Title&lt;/h1&gt;
    &lt;p&gt;Paragraph 1&lt;/p&gt;
    &lt;p&gt;Paragraph 2&lt;/p&gt;
&lt;/template&gt;
</code></pre>

<blockquote>
<ul>
<li><strong><code>v-else</code></strong></li>
</ul>
</blockquote>
<p>ä½ å¯ä»¥ä½¿ç”¨<code>v-else</code>æŒ‡ä»¤æ¥è¡¨ç¤º<code>v-if</code>çš„â€œ<code>else</code>å—â€:</p>
<pre><code class="html">&lt;div v-if=&quot;Math.random() &gt; 0.5&quot;&gt;
    Now you see me
&lt;/div&gt;
&lt;div v-else&gt;
    Now you don't
&lt;/div&gt;
</code></pre>

<p><code>v-else</code>å…ƒç´ å¿…é¡»ç´§è·Ÿåœ¨å¸¦<code>v-if</code>æˆ–è€…<code>v-else-if</code>çš„å…ƒç´ çš„åé¢,å¦åˆ™å®ƒå°†ä¸ä¼šè¢«è¯†åˆ«ã€‚</p>
<blockquote>
<ul>
<li><strong>v-else-if</strong></li>
</ul>
</blockquote>
<p><code>v-else-if</code>,é¡¾åæ€ä¹‰,å……å½“<code>v-if</code>çš„â€œ<code>else-if</code>å—â€,å¯ä»¥è¿ç»­ä½¿ç”¨:</p>
<pre><code class="html">&lt;div v-if=&quot;type === 'A'&quot;&gt;
    A
&lt;/div&gt;
&lt;div v-else-if=&quot;type === 'B'&quot;&gt;
    B
&lt;/div&gt;
&lt;div v-else-if=&quot;type === 'C'&quot;&gt;
    C
&lt;/div&gt;
&lt;div v-else&gt;
    Not A/B/C
&lt;/div&gt;
</code></pre>

<p>ç±»ä¼¼äº<code>v-else</code>,<code>v-else-if</code>ä¹Ÿå¿…é¡»ç´§è·Ÿåœ¨å¸¦<code>v-if</code>æˆ–è€…<code>v-else-if</code>çš„å…ƒç´ ä¹‹åã€‚</p>
<blockquote>
<ul>
<li><strong>ç”¨keyç®¡ç†å¯å¤ç”¨çš„å…ƒç´ </strong></li>
</ul>
</blockquote>
<p>Vueä¼šå°½å¯èƒ½é«˜æ•ˆåœ°æ¸²æŸ“å…ƒç´ ,é€šå¸¸ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“ã€‚è¿™ä¹ˆåšé™¤äº†ä½¿Vueå˜å¾—éå¸¸å¿«ä¹‹å¤–,è¿˜æœ‰å…¶å®ƒä¸€äº›å¥½å¤„ã€‚ä¾‹å¦‚,å¦‚æœä½ å…è®¸ç”¨æˆ·åœ¨ä¸åŒçš„ç™»å½•æ–¹å¼ä¹‹é—´åˆ‡æ¢:</p>
<pre><code class="html">&lt;template v-if=&quot;loginType === 'username'&quot;&gt;
  &lt;label&gt;Username&lt;/label&gt;
  &lt;input placeholder=&quot;Enter your username&quot;&gt;
&lt;/template&gt;
&lt;template v-else&gt;
  &lt;label&gt;Email&lt;/label&gt;
  &lt;input placeholder=&quot;Enter your email address&quot;&gt;
&lt;/template&gt;
</code></pre>

<p>é‚£ä¹ˆåœ¨ä¸Šé¢çš„ä»£ç ä¸­åˆ‡æ¢loginTypeå°†ä¸ä¼šæ¸…é™¤ç”¨æˆ·å·²ç»è¾“å…¥çš„å†…å®¹ã€‚å› ä¸ºä¸¤ä¸ªæ¨¡æ¿ä½¿ç”¨äº†ç›¸åŒçš„å…ƒç´ ,<code>&lt;input&gt;</code>ä¸ä¼šè¢«æ›¿æ¢æ‰â€”â€”ä»…ä»…æ˜¯æ›¿æ¢äº†å®ƒçš„<code>placeholder</code>ã€‚è¿™æ ·ä¹Ÿä¸æ€»æ˜¯ç¬¦åˆå®é™…éœ€æ±‚,æ‰€ä»¥Vueä¸ºä½ æä¾›äº†ä¸€ç§æ–¹å¼æ¥è¡¨è¾¾â€œè¿™ä¸¤ä¸ªå…ƒç´ æ˜¯å®Œå…¨ç‹¬ç«‹çš„,ä¸è¦å¤ç”¨å®ƒä»¬â€ã€‚åªéœ€æ·»åŠ ä¸€ä¸ªå…·æœ‰å”¯ä¸€å€¼çš„<code>key</code>å±æ€§å³å¯:</p>
<pre><code class="html">&lt;template v-if=&quot;loginType === 'username'&quot;&gt;
    &lt;label&gt;Username&lt;/label&gt;
    &lt;input placeholder=&quot;Enter your username&quot; key=&quot;username-input&quot;&gt;
&lt;/template&gt;
&lt;template v-else&gt;
    &lt;label&gt;Email&lt;/label&gt;
    &lt;input placeholder=&quot;Enter your email address&quot; key=&quot;email-input&quot;&gt;
&lt;/template&gt;
</code></pre>

<p>ç°åœ¨,æ¯æ¬¡åˆ‡æ¢æ—¶,è¾“å…¥æ¡†éƒ½å°†è¢«é‡æ–°æ¸²æŸ“ã€‚æ³¨æ„,<code>&lt;label&gt;</code>å…ƒç´ ä»ç„¶ä¼šè¢«é«˜æ•ˆåœ°å¤ç”¨,å› ä¸ºå®ƒä»¬æ²¡æœ‰æ·»åŠ <code>key</code>å±æ€§ã€‚</p>
<ul>
<li><strong><code>v-show</code></strong></li>
</ul>
<p>å¦ä¸€ä¸ªç”¨äºæ ¹æ®æ¡ä»¶å±•ç¤ºå…ƒç´ çš„é€‰é¡¹æ˜¯<code>v-show</code>æŒ‡ä»¤ã€‚ç”¨æ³•å¤§è‡´ä¸€æ ·:</p>
<pre><code class="html">&lt;h1 v-show=&quot;ok&quot;&gt;Hello!&lt;/h1&gt;
</code></pre>

<p>ä¸åŒçš„æ˜¯å¸¦æœ‰<code>v-show</code>çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨DOMä¸­ã€‚<code>v-show</code>åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„CSSå±æ€§displayã€‚æ³¨æ„,<code>v-show</code>ä¸æ”¯æŒ<code>&lt;template&gt;</code>å…ƒç´ ,ä¹Ÿä¸æ”¯æŒ<code>v-else</code>ã€‚</p>
<blockquote>
<ul>
<li><strong><code>v-if</code> vs <code>v-show</code></strong></li>
</ul>
</blockquote>
<p><code>v-if</code>æ˜¯â€œçœŸæ­£â€çš„æ¡ä»¶æ¸²æŸ“,å› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºã€‚<code>v-if</code>ä¹Ÿæ˜¯æƒ°æ€§çš„:å¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡,åˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶,æ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚ç›¸æ¯”ä¹‹ä¸‹,<code>v-show</code>å°±ç®€å•å¾—å¤šâ€”â€”ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆ,å…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“,å¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäºCSSè¿›è¡Œåˆ‡æ¢ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´,<code>v-if</code>æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€,è€Œ<code>v-show</code>æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤,å¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢,åˆ™ä½¿ç”¨<code>v-show</code>è¾ƒå¥½;å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜,åˆ™ä½¿ç”¨<code>v-if</code>è¾ƒå¥½ã€‚</p>
<blockquote>
<ul>
<li><strong><code>v-if</code>ä¸<code>v-for</code>ä¸€èµ·ä½¿ç”¨</strong></li>
</ul>
</blockquote>
<p>ä¸æ¨èåŒæ—¶ä½¿ç”¨v-ifå’Œv-forã€‚è¯·æŸ¥é˜…<a href="https://cn.vuejs.org/v2/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E7%94%A8%E5%9C%A8%E4%B8%80%E8%B5%B7-%E5%BF%85%E8%A6%81">é£æ ¼æŒ‡å—</a>ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚å½“<code>v-if</code>ä¸<code>v-for</code>ä¸€èµ·ä½¿ç”¨æ—¶,<code>v-for</code>å…·æœ‰æ¯”<code>v-if</code>æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚è¯·æŸ¥é˜…åˆ—è¡¨æ¸²æŸ“æŒ‡å—ä»¥è·å–è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 id="17">1.7 åˆ—è¡¨æ¸²æŸ“</h3>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=9"><strong>ç”¨<code>v-for</code>æŠŠä¸€ä¸ªæ•°ç»„å¯¹åº”ä¸ºä¸€ç»„å…ƒç´ </strong></a></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>v-for</code>æŒ‡ä»¤åŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚<code>v-for</code>æŒ‡ä»¤éœ€è¦ä½¿ç”¨<code>item in items</code>å½¢å¼çš„ç‰¹æ®Šè¯­æ³•,å…¶ä¸­<code>items</code>æ˜¯æºæ•°æ®æ•°ç»„,è€Œ<code>item</code>åˆ™æ˜¯è¢«è¿­ä»£çš„æ•°ç»„å…ƒç´ çš„åˆ«åã€‚</p>
<pre><code class="html">&lt;ul id=&quot;example-1&quot;&gt;
    &lt;li v-for=&quot;item in items&quot;&gt;
        {{ item.message }}
    &lt;/li&gt;
&lt;/ul&gt;
var example1 = new Vue({
    el: '#example-1',
    data: {
        items: [
            { message: 'Foo' },
            { message: 'Bar' }
        ]
    }
})
</code></pre>

<p>åœ¨<code>v-for</code>å—ä¸­,æˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„å±æ€§ã€‚<code>v-for</code>è¿˜æ”¯æŒä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°,å³å½“å‰é¡¹çš„ç´¢å¼•ã€‚</p>
<pre><code class="html">&lt;ul id=&quot;example-2&quot;&gt;
    &lt;li v-for=&quot;(item, index) in items&quot;&gt;
        {{ parentMessage }} - {{ index }} - {{ item.message }}
    &lt;/li&gt;
&lt;/ul&gt;
var example2 = new Vue({
    el: '#example-2',
    data: {
        parentMessage: 'Parent',
        items: [
            { message: 'Foo' },
            { message: 'Bar' }
        ]
    }
})
</code></pre>

<p>ä½ ä¹Ÿå¯ä»¥ç”¨<code>of</code>æ›¿ä»£<code>in</code>ä½œä¸ºåˆ†éš”ç¬¦,å› ä¸ºå®ƒæ›´æ¥è¿‘JavaScriptè¿­ä»£å™¨çš„è¯­æ³•:</p>
<pre><code class="html">&lt;div v-for=&quot;item of items&quot;&gt;&lt;/div&gt;
</code></pre>

<ul>
<li><strong>åœ¨<code>v-for</code>é‡Œä½¿ç”¨å¯¹è±¡</strong></li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥ç”¨<code>v-for</code>æ¥éå†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚</p>
<pre><code class="html">&lt;ul id=&quot;v-for-object&quot; class=&quot;demo&quot;&gt;
    &lt;li v-for=&quot;value in object&quot;&gt;
        {{ value }}
    &lt;/li&gt;
&lt;/ul&gt;
new Vue({
    el: '#v-for-object',
    data: {
        object: {
            title: 'How to do lists in Vue',
            author: 'Jane Doe',
            publishedAt: '2016-04-10'
        }
    }
})
</code></pre>

<p>ä½ ä¹Ÿå¯ä»¥æä¾›ç¬¬äºŒä¸ªçš„å‚æ•°ä¸º<code>property</code>åç§°(ä¹Ÿå°±æ˜¯é”®å):</p>
<pre><code class="html">&lt;div v-for=&quot;(value, name) in object&quot;&gt;
    {{ name }}: {{ value }}
&lt;/div&gt;
</code></pre>

<p>è¿˜å¯ä»¥ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°ä½œä¸ºç´¢å¼•:</p>
<pre><code class="html">&lt;div v-for=&quot;(value, name, index) in object&quot;&gt;
    {{ index }}. {{ name }}: {{ value }}
&lt;/div&gt;
</code></pre>

<p>åœ¨éå†å¯¹è±¡æ—¶,ä¼šæŒ‰<code>Object.keys()</code>çš„ç»“æœéå†,ä½†æ˜¯ä¸èƒ½ä¿è¯å®ƒçš„ç»“æœåœ¨ä¸åŒçš„JavaScriptå¼•æ“ä¸‹éƒ½ä¸€è‡´ã€‚</p>
<blockquote>
<ul>
<li><strong>ç»´æŠ¤çŠ¶æ€</strong></li>
</ul>
</blockquote>
<p>å½“Vueæ­£åœ¨æ›´æ–°ä½¿ç”¨<code>v-for</code>æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶,å®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜,Vueå°†ä¸ä¼šç§»åŠ¨DOMå…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåº,è€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ,å¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„,ä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶DOMçŠ¶æ€(ä¾‹å¦‚:è¡¨å•è¾“å…¥å€¼)çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚</p>
<p>ä¸ºäº†ç»™Vueä¸€ä¸ªæç¤º,ä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½,ä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ,ä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€<code>key</code>å±æ€§:</p>
<pre><code class="html">&lt;div v-for=&quot;item in items&quot; v-bind:key=&quot;item.id&quot;&gt;
    &lt;!-- å†…å®¹ --&gt;
&lt;/div&gt;
</code></pre>

<p>å»ºè®®å°½å¯èƒ½åœ¨ä½¿ç”¨<code>v-for</code>æ—¶æä¾›<code>key attribute</code>,é™¤ééå†è¾“å‡ºçš„DOMå†…å®¹éå¸¸ç®€å•,æˆ–è€…æ˜¯åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡ã€‚å› ä¸ºå®ƒæ˜¯Vueè¯†åˆ«èŠ‚ç‚¹çš„ä¸€ä¸ªé€šç”¨æœºåˆ¶,keyå¹¶ä¸ä»…ä¸<code>v-for</code>ç‰¹åˆ«å…³è”ã€‚åé¢æˆ‘ä»¬å°†åœ¨æŒ‡å—ä¸­çœ‹åˆ°,å®ƒè¿˜å…·æœ‰å…¶å®ƒç”¨é€”ã€‚</p>
<p><strong>ä¸è¦ä½¿ç”¨å¯¹è±¡æˆ–æ•°ç»„ä¹‹ç±»çš„éåŸºæœ¬ç±»å‹å€¼ä½œä¸º<code>v-for</code>çš„<code>key</code>ã€‚è¯·ç”¨å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹çš„å€¼ã€‚</strong></p>
<ul>
<li><strong>æ•°ç»„æ›´æ–°æ£€æµ‹</strong></li>
</ul>
<blockquote>
<ul>
<li><strong>å˜å¼‚æ–¹æ³•(mutation method)</strong></li>
</ul>
</blockquote>
<p>Vueå°†è¢«ä¾¦å¬çš„æ•°ç»„çš„å˜å¼‚æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹,æ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚è¿™äº›è¢«åŒ…è£¹è¿‡çš„æ–¹æ³•åŒ…æ‹¬:<code>push()</code>,<code>pop()</code>,<code>shift()</code>,<code>unshift()</code>,<code>splice()</code>,<code>sort()</code>å’Œ<code>reverse()</code>ã€‚ä½ å¯ä»¥æ‰“å¼€æ§åˆ¶å°,ç„¶åå¯¹å‰é¢ä¾‹å­çš„<code>items</code>æ•°ç»„å°è¯•è°ƒç”¨å˜å¼‚æ–¹æ³•ã€‚æ¯”å¦‚<code>example1.items.push({ message: 'Baz' })</code>ã€‚</p>
<blockquote>
<ul>
<li><strong>æ›¿æ¢æ•°ç»„</strong></li>
</ul>
</blockquote>
<p>å˜å¼‚æ–¹æ³•,é¡¾åæ€ä¹‰,ä¼šæ”¹å˜è°ƒç”¨äº†è¿™äº›æ–¹æ³•çš„åŸå§‹æ•°ç»„ã€‚ç›¸æ¯”ä¹‹ä¸‹,ä¹Ÿæœ‰éå˜å¼‚(<code>non-mutating method</code>)æ–¹æ³•,ä¾‹å¦‚<code>filter()</code>ã€<code>concat()</code>å’Œ<code>slice()</code>ã€‚å®ƒä»¬ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„,è€Œæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚å½“ä½¿ç”¨éå˜å¼‚æ–¹æ³•æ—¶,å¯ä»¥ç”¨æ–°æ•°ç»„æ›¿æ¢æ—§æ•°ç»„:</p>
<pre><code class="javascript">example1.items = example1.items.filter(function (item) {
    return item.message.match(/Foo/)
})
</code></pre>

<p>ä½ å¯èƒ½è®¤ä¸ºè¿™å°†å¯¼è‡´Vueä¸¢å¼ƒç°æœ‰DOMå¹¶é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ã€‚å¹¸è¿çš„æ˜¯,äº‹å®å¹¶éå¦‚æ­¤ã€‚Vueä¸ºäº†ä½¿å¾—DOMå…ƒç´ å¾—åˆ°æœ€å¤§èŒƒå›´çš„é‡ç”¨è€Œå®ç°äº†ä¸€äº›æ™ºèƒ½çš„å¯å‘å¼æ–¹æ³•,æ‰€ä»¥ç”¨ä¸€ä¸ªå«æœ‰ç›¸åŒå…ƒç´ çš„æ•°ç»„å»æ›¿æ¢åŸæ¥çš„æ•°ç»„æ˜¯éå¸¸é«˜æ•ˆçš„æ“ä½œã€‚</p>
<blockquote>
<ul>
<li><strong>æ³¨æ„äº‹é¡¹</strong></li>
</ul>
</blockquote>
<p>ç”±äºJavaScriptçš„é™åˆ¶,Vueä¸èƒ½æ£€æµ‹ä»¥ä¸‹æ•°ç»„çš„å˜åŠ¨:</p>
<blockquote>
<ol>
<li>å½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶,ä¾‹å¦‚:<code>vm.items[indexOfItem] = newValue</code></li>
<li>å½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶,ä¾‹å¦‚:<code>vm.items.length = newLength</code></li>
</ol>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­:</p>
<pre><code class="javascript">var vm = new Vue({
    data: {
        items: ['a', 'b', 'c']
    }
})
vm.items[1] = 'x' // ä¸æ˜¯å“åº”æ€§çš„
vm.items.length = 2 // ä¸æ˜¯å“åº”æ€§çš„
</code></pre>

<p>ä¸ºäº†è§£å†³ç¬¬ä¸€ç±»é—®é¢˜,ä»¥ä¸‹ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥å®ç°å’Œ<code>vm.items[indexOfItem] = newValue</code>ç›¸åŒçš„æ•ˆæœ,åŒæ—¶ä¹Ÿå°†åœ¨å“åº”å¼ç³»ç»Ÿå†…è§¦å‘çŠ¶æ€æ›´æ–°:</p>
<pre><code class="javascript">// Vue.set
Vue.set(vm.items, indexOfItem, newValue)
// Array.prototype.splice
vm.items.splice(indexOfItem, 1, newValue)
</code></pre>

<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>vm.$set</code>å®ä¾‹æ–¹æ³•,è¯¥æ–¹æ³•æ˜¯å…¨å±€æ–¹æ³•<code>Vue.set</code>çš„ä¸€ä¸ªåˆ«å:</p>
<pre><code class="javascript">vm.$set(vm.items, indexOfItem, newValue)
</code></pre>

<p>ä¸ºäº†è§£å†³ç¬¬äºŒç±»é—®é¢˜,ä½ å¯ä»¥ä½¿ç”¨<code>splice</code>:</p>
<pre><code class="javascript">vm.items.splice(newLength)
</code></pre>

<ul>
<li><strong>å¯¹è±¡å˜æ›´æ£€æµ‹æ³¨æ„äº‹é¡¹</strong></li>
</ul>
<p>è¿˜æ˜¯ç”±äºJavaScriptçš„é™åˆ¶,Vueä¸èƒ½æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤:</p>
<pre><code class="javascript">var vm = new Vue({
    data: {
        a: 1
    }
})
// vm.aç°åœ¨æ˜¯å“åº”å¼çš„

vm.b = 2
// vm.bä¸æ˜¯å“åº”å¼çš„
</code></pre>

<p>å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹,Vueä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§ã€‚ä½†æ˜¯,å¯ä»¥ä½¿ç”¨<code>Vue.set(object, propertyName, value)</code>æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ã€‚ä¾‹å¦‚,å¯¹äº:</p>
<pre><code class="javascript">var vm = new Vue({
    data: {
        userProfile: {
            name: 'Anika'
        }
    }
})
</code></pre>

<p>ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„age å±æ€§åˆ°åµŒå¥—çš„<code>userProfile</code>å¯¹è±¡:<code>Vue.set(vm.userProfile, 'age', 27)</code>,ä½ è¿˜å¯ä»¥ä½¿ç”¨<code>vm.$set</code>å®ä¾‹æ–¹æ³•,å®ƒåªæ˜¯å…¨å±€<code>Vue.set</code>çš„åˆ«å:<code>vm.$set(vm.userProfile, 'age', 27)</code>ã€‚</p>
<p>æœ‰æ—¶ä½ å¯èƒ½éœ€è¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°å±æ€§,æ¯”å¦‚ä½¿ç”¨<code>Object.assign()</code>æˆ–<code>_.extend()</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ åº”è¯¥ç”¨ä¸¤ä¸ªå¯¹è±¡çš„å±æ€§åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚æ‰€ä»¥,å¦‚æœä½ æƒ³æ·»åŠ æ–°çš„å“åº”å¼å±æ€§,ä¸è¦åƒè¿™æ ·:</p>
<pre><code class="javascript">Object.assign(vm.userProfile, {
    age: 27,
    favoriteColor: 'Vue Green'
})
</code></pre>

<p>ä½ åº”è¯¥è¿™æ ·åš:</p>
<pre><code class="javascript">vm.userProfile = Object.assign({}, vm.userProfile, {
    age: 27,
    favoriteColor: 'Vue Green'
})
</code></pre>

<ul>
<li><strong>æ˜¾ç¤ºè¿‡æ»¤/æ’åºåçš„ç»“æœ</strong></li>
</ul>
<p>æœ‰æ—¶,æˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºä¸€ä¸ªæ•°ç»„ç»è¿‡è¿‡æ»¤æˆ–æ’åºåçš„ç‰ˆæœ¬,è€Œä¸å®é™…æ”¹å˜æˆ–é‡ç½®åŸå§‹æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,å¯ä»¥åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§,æ¥è¿”å›è¿‡æ»¤æˆ–æ’åºåçš„æ•°ç»„ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">&lt;li v-for=&quot;n in evenNumbers&quot;&gt;{{ n }}&lt;/li&gt;
data: {
    numbers: [ 1, 2, 3, 4, 5 ]
},
computed: {
    evenNumbers: function () {
        return this.numbers.filter(function (number) {
            return number % 2 === 0
        })
    }
}
</code></pre>

<p>åœ¨è®¡ç®—å±æ€§ä¸é€‚ç”¨çš„æƒ…å†µä¸‹(ä¾‹å¦‚,åœ¨åµŒå¥—v-forå¾ªç¯ä¸­)ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•:</p>
<pre><code class="javascript">&lt;li v-for=&quot;n in even(numbers)&quot;&gt;{{ n }}&lt;/li&gt;
data: {
    numbers: [ 1, 2, 3, 4, 5 ]
},
methods: {
    even: function (numbers) {
        return numbers.filter(function (number) {
            return number % 2 === 0
        })
    }
}
</code></pre>

<ul>
<li><strong>åœ¨<code>v-for</code>é‡Œä½¿ç”¨å€¼èŒƒå›´</strong></li>
</ul>
<p><code>v-for</code>ä¹Ÿå¯ä»¥æ¥å—æ•´æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,å®ƒä¼šæŠŠæ¨¡æ¿é‡å¤å¯¹åº”æ¬¡æ•°ã€‚</p>
<pre><code class="html">&lt;div&gt;
    &lt;span v-for=&quot;n in 10&quot;&gt;{{ n }} &lt;/span&gt;
&lt;/div&gt;
</code></pre>

<p>ç»“æœ:<code>1 2 3 4 5 6 7 8 9 10</code>ã€‚</p>
<ul>
<li><strong>åœ¨<code>&lt;template&gt;</code>ä¸Šä½¿ç”¨<code>v-for</code></strong></li>
</ul>
<p>ç±»ä¼¼äº<code>v-if</code>,ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨å¸¦æœ‰<code>v-for</code>çš„<code>&lt;template&gt;</code>æ¥å¾ªç¯æ¸²æŸ“ä¸€æ®µåŒ…å«å¤šä¸ªå…ƒç´ çš„å†…å®¹ã€‚æ¯”å¦‚:</p>
<pre><code class="html">&lt;ul&gt;
    &lt;template v-for=&quot;item in items&quot;&gt;
        &lt;li&gt;{{ item.msg }}&lt;/li&gt;
        &lt;li class=&quot;divider&quot; role=&quot;presentation&quot;&gt;&lt;/li&gt;
    &lt;/template&gt;
&lt;/ul&gt;
</code></pre>

<ul>
<li><strong><code>v-for</code>ä¸<code>v-if</code>ä¸€åŒä½¿ç”¨</strong></li>
</ul>
<p>æ³¨æ„æˆ‘ä»¬ä¸æ¨èåœ¨åŒä¸€å…ƒç´ ä¸Šä½¿ç”¨<code>v-if</code>å’Œ<code>v-for</code>ã€‚æ›´å¤šç»†èŠ‚å¯æŸ¥é˜…<a href="https://cn.vuejs.org/v2/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E7%94%A8%E5%9C%A8%E4%B8%80%E8%B5%B7-%E5%BF%85%E8%A6%81">é£æ ¼æŒ‡å—</a>ã€‚</p>
<p>å½“å®ƒä»¬å¤„äºåŒä¸€èŠ‚ç‚¹,<code>v-for</code>çš„ä¼˜å…ˆçº§æ¯”<code>v-if</code>æ›´é«˜,è¿™æ„å‘³ç€<code>v-if</code>å°†åˆ†åˆ«é‡å¤è¿è¡Œäºæ¯ä¸ª<code>v-for</code>å¾ªç¯ä¸­ã€‚å½“ä½ åªæƒ³ä¸ºéƒ¨åˆ†é¡¹æ¸²æŸ“èŠ‚ç‚¹æ—¶,è¿™ç§ä¼˜å…ˆçº§çš„æœºåˆ¶ä¼šååˆ†æœ‰ç”¨,å¦‚ä¸‹:</p>
<pre><code class="html">&lt;li v-for=&quot;todo in todos&quot; v-if=&quot;!todo.isComplete&quot;&gt;
    {{ todo }}
&lt;/li&gt;
</code></pre>

<p>ä¸Šé¢çš„ä»£ç å°†åªæ¸²æŸ“æœªå®Œæˆçš„todoã€‚è€Œå¦‚æœä½ çš„ç›®çš„æ˜¯æœ‰æ¡ä»¶åœ°è·³è¿‡å¾ªç¯çš„æ‰§è¡Œ,é‚£ä¹ˆå¯ä»¥å°†<code>v-if</code>ç½®äºå¤–å±‚å…ƒç´ (æˆ–<code>&lt;template&gt;</code>)ä¸Šã€‚å¦‚:</p>
<pre><code class="html">&lt;ul v-if=&quot;todos.length&quot;&gt;
    &lt;li v-for=&quot;todo in todos&quot;&gt;
        {{ todo }}
    &lt;/li&gt;
&lt;/ul&gt;
&lt;p v-else&gt;No todos left!&lt;/p&gt;
</code></pre>

<ul>
<li><strong>åœ¨ç»„ä»¶ä¸Šä½¿ç”¨<code>v-for</code></strong></li>
</ul>
<p>è¿™éƒ¨åˆ†å†…å®¹å‡å®šä½ å·²ç»äº†è§£ç»„ä»¶ç›¸å…³çŸ¥è¯†ã€‚ä½ ä¹Ÿå®Œå…¨å¯ä»¥å…ˆè·³è¿‡å®ƒ,ä»¥åå†å›æ¥æŸ¥çœ‹ã€‚åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Š,ä½ å¯ä»¥åƒåœ¨ä»»ä½•æ™®é€šå…ƒç´ ä¸Šä¸€æ ·ä½¿ç”¨<code>v-for</code>ã€‚</p>
<pre><code class="html">&lt;my-component v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;&lt;/my-component&gt;
</code></pre>

<p>å½“åœ¨ç»„ä»¶ä¸Šä½¿ç”¨<code>v-for</code>æ—¶,<code>key</code>ç°åœ¨æ˜¯å¿…é¡»çš„ã€‚ç„¶è€Œ,ä»»ä½•æ•°æ®éƒ½ä¸ä¼šè¢«è‡ªåŠ¨ä¼ é€’åˆ°ç»„ä»¶é‡Œ,å› ä¸ºç»„ä»¶æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚ä¸ºäº†æŠŠè¿­ä»£æ•°æ®ä¼ é€’åˆ°ç»„ä»¶é‡Œ,æˆ‘ä»¬è¦ä½¿ç”¨<code>prop</code>:</p>
<pre><code class="html">&lt;my-component
  v-for=&quot;(item, index) in items&quot;
  v-bind:item=&quot;item&quot;
  v-bind:index=&quot;index&quot;
  v-bind:key=&quot;item.id&quot;
&gt;&lt;/my-component&gt;
</code></pre>

<p>ä¸è‡ªåŠ¨å°†<code>item</code>æ³¨å…¥åˆ°ç»„ä»¶é‡Œçš„åŸå› æ˜¯,è¿™ä¼šä½¿å¾—ç»„ä»¶ä¸v-forçš„è¿ä½œç´§å¯†è€¦åˆã€‚æ˜ç¡®ç»„ä»¶æ•°æ®çš„æ¥æºèƒ½å¤Ÿä½¿ç»„ä»¶åœ¨å…¶ä»–åœºåˆé‡å¤ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„<code>todo</code>åˆ—è¡¨çš„å®Œæ•´ä¾‹å­:</p>
<pre><code class="html">&lt;div id=&quot;todo-list-example&quot;&gt;
    &lt;form v-on:submit.prevent=&quot;addNewTodo&quot;&gt;
        &lt;label for=&quot;new-todo&quot;&gt;Add a todo&lt;/label&gt;
        &lt;input
            v-model=&quot;newTodoText&quot;
            id=&quot;new-todo&quot;
            placeholder=&quot;E.g. Feed the cat&quot;
        &gt;
        &lt;button&gt;Add&lt;/button&gt;
    &lt;/form&gt;
    &lt;ul&gt;
        &lt;li
            is=&quot;todo-item&quot;
            v-for=&quot;(todo, index) in todos&quot;
            v-bind:key=&quot;todo.id&quot;
            v-bind:title=&quot;todo.title&quot;
            v-on:remove=&quot;todos.splice(index, 1)&quot;
        &gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
</code></pre>

<p>æ³¨æ„è¿™é‡Œçš„<code>is="todo-item"</code>å±æ€§ã€‚è¿™ç§åšæ³•åœ¨ä½¿ç”¨DOMæ¨¡æ¿æ—¶æ˜¯ååˆ†å¿…è¦çš„,å› ä¸ºåœ¨<code>&lt;ul&gt;</code>å…ƒç´ å†…åªæœ‰<code>&lt;li&gt;</code>å…ƒç´ ä¼šè¢«çœ‹ä½œæœ‰æ•ˆå†…å®¹ã€‚è¿™æ ·åšå®ç°çš„æ•ˆæœä¸<code>&lt;todo-item\&gt;</code>ç›¸åŒ,ä½†æ˜¯å¯ä»¥é¿å¼€ä¸€äº›æ½œåœ¨çš„æµè§ˆå™¨è§£æé”™è¯¯ã€‚æŸ¥çœ‹DOMæ¨¡æ¿è§£æè¯´æ˜æ¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
<pre><code class="html">Vue.component('todo-item', {
    template: '\
        &lt;li&gt;\
            {{ title }}\
            &lt;button v-on:click=&quot;$emit(\'remove\')&quot;&gt;Remove&lt;/button&gt;\
        &lt;/li&gt;\
    ',
    props: ['title']
})

new Vue({
    el: '#todo-list-example',
    data: {
        newTodoText: '',
        todos: [
            {
                id: 1,
                title: 'Do the dishes',
            },{
                id: 2,
                title: 'Take out the trash',
            },{
                id: 3,
                title: 'Mow the lawn'
            }
        ],
        nextTodoId: 4
    },
    methods: {
        addNewTodo: function () {
            this.todos.push({
                id: this.nextTodoId++,
                title: this.newTodoText
            })
            this.newTodoText = ''
        }
    }
})
</code></pre>

<h3 id="17_1">1.7 äº‹ä»¶å¤„ç†</h3>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=10"><strong>ç›‘å¬äº‹ä»¶</strong></a></li>
</ul>
<p>å¯ä»¥ç”¨<code>v-on</code>æŒ‡ä»¤ç›‘å¬DOMäº‹ä»¶,å¹¶åœ¨è§¦å‘æ—¶è¿è¡Œä¸€äº›JavaScriptä»£ç ã€‚ç¤ºä¾‹:</p>
<pre><code class="html">&lt;div id=&quot;example-1&quot;&gt;
    &lt;button v-on:click=&quot;counter += 1&quot;&gt;Add 1&lt;/button&gt;
    &lt;p&gt;The button above has been clicked {{ counter }} times.&lt;/p&gt;
&lt;/div&gt;
var example1 = new Vue({
    el: '#example-1',
    data: {
        counter: 0
    }
})
</code></pre>

<ul>
<li><strong>äº‹ä»¶å¤„ç†æ–¹æ³•</strong></li>
</ul>
<p>ç„¶è€Œè®¸å¤šäº‹ä»¶å¤„ç†é€»è¾‘ä¼šæ›´ä¸ºå¤æ‚,æ‰€ä»¥ç›´æ¥æŠŠJavaScriptä»£ç å†™åœ¨<code>v-on</code>æŒ‡ä»¤ä¸­æ˜¯ä¸å¯è¡Œçš„ã€‚å› æ­¤<code>v-on</code>è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªéœ€è¦è°ƒç”¨çš„æ–¹æ³•åç§°ã€‚ç¤ºä¾‹:</p>
<pre><code class="javascript">&lt;div id=&quot;example-2&quot;&gt;
    &lt;!-- greetæ˜¯åœ¨ä¸‹é¢å®šä¹‰çš„æ–¹æ³•å --&gt;
    &lt;button v-on:click=&quot;greet&quot;&gt;Greet&lt;/button&gt;
&lt;/div&gt;
var example2 = new Vue({
    el: '#example-2',
    data: {
        name: 'Vue.js'
    },
    // åœ¨methodså¯¹è±¡ä¸­å®šä¹‰æ–¹æ³•
    methods: {
        greet: function (event) {
            // thisåœ¨æ–¹æ³•é‡ŒæŒ‡å‘å½“å‰Vueå®ä¾‹
            alert('Hello ' + this.name + '!')
            // eventæ˜¯åŸç”ŸDOMäº‹ä»¶
            if (event) {
                alert(event.target.tagName)
            }
        }
    }
})

// ä¹Ÿå¯ä»¥ç”¨JavaScriptç›´æ¥è°ƒç”¨æ–¹æ³•
example2.greet() // =&gt; 'Hello Vue.js!'
</code></pre>

<ul>
<li><strong>å†…è”å¤„ç†å™¨ä¸­çš„æ–¹æ³•</strong></li>
</ul>
<p>é™¤äº†ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªæ–¹æ³•,ä¹Ÿå¯ä»¥åœ¨å†…è”JavaScriptè¯­å¥ä¸­è°ƒç”¨æ–¹æ³•:</p>
<pre><code class="html">&lt;div id=&quot;example-3&quot;&gt;
    &lt;button v-on:click=&quot;say('hi')&quot;&gt;Say hi&lt;/button&gt;
    &lt;button v-on:click=&quot;say('what')&quot;&gt;Say what&lt;/button&gt;
&lt;/div&gt;
new Vue({
    el: '#example-3',
    methods: {
        say: function (message) {
            alert(message)
        }
    }
})
</code></pre>

<p>æœ‰æ—¶ä¹Ÿéœ€è¦åœ¨å†…è”è¯­å¥å¤„ç†å™¨ä¸­è®¿é—®åŸå§‹çš„DOMäº‹ä»¶ã€‚å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡$eventæŠŠå®ƒä¼ å…¥æ–¹æ³•:</p>
<pre><code class="javascript">&lt;button v-on:click=&quot;warn('Form cannot be submitted yet.', $event)&quot;&gt;
    Submit
&lt;/button&gt;
// ...
methods: {
    warn: function (message, event) {
        // ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡
        if (event) event.preventDefault()
        alert(message)
    }
}
</code></pre>

<ul>
<li><strong>äº‹ä»¶ä¿®é¥°ç¬¦</strong></li>
</ul>
<p>åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨<code>event.preventDefault()</code>æˆ–<code>event.stopPropagation()</code>æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­è½»æ¾å®ç°è¿™ç‚¹,ä½†æ›´å¥½çš„æ–¹å¼æ˜¯:æ–¹æ³•åªæœ‰çº¯ç²¹çš„æ•°æ®é€»è¾‘,è€Œä¸æ˜¯å»å¤„ç†DOMäº‹ä»¶ç»†èŠ‚ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,Vue.jsä¸º<code>v-on</code>æä¾›äº†äº‹ä»¶ä¿®é¥°ç¬¦ã€‚ä¹‹å‰æè¿‡,ä¿®é¥°ç¬¦æ˜¯ç”±ç‚¹å¼€å¤´çš„æŒ‡ä»¤åç¼€æ¥è¡¨ç¤ºçš„:<code>.stop</code>,<code>.prevent</code>,<code>.capture</code>,<code>.self</code>,<code>.once</code>å’Œ<code>.passive</code>ã€‚</p>
<pre><code class="html">&lt;!-- é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ --&gt;
&lt;a v-on:click.stop=&quot;doThis&quot;&gt;&lt;/a&gt;

&lt;!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ --&gt;
&lt;form v-on:submit.prevent=&quot;onSubmit&quot;&gt;&lt;/form&gt;

&lt;!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è” --&gt;
&lt;a v-on:click.stop.prevent=&quot;doThat&quot;&gt;&lt;/a&gt;

&lt;!-- åªæœ‰ä¿®é¥°ç¬¦ --&gt;
&lt;form v-on:submit.prevent&gt;&lt;/form&gt;

&lt;!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ --&gt;
&lt;!-- å³å†…éƒ¨å…ƒç´ è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†,ç„¶åæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç† --&gt;
&lt;div v-on:click.capture=&quot;doThis&quot;&gt;...&lt;/div&gt;

&lt;!-- åªå½“åœ¨ event.target æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•° --&gt;
&lt;!-- å³äº‹ä»¶ä¸æ˜¯ä»å†…éƒ¨å…ƒç´ è§¦å‘çš„ --&gt;
&lt;div v-on:click.self=&quot;doThat&quot;&gt;...&lt;/div&gt;
</code></pre>

<p>ä½¿ç”¨ä¿®é¥°ç¬¦æ—¶,é¡ºåºå¾ˆé‡è¦;ç›¸åº”çš„ä»£ç ä¼šä»¥åŒæ ·çš„é¡ºåºäº§ç”Ÿã€‚å› æ­¤,ç”¨<code>v-on:click.prevent.self</code>ä¼šé˜»æ­¢æ‰€æœ‰çš„ç‚¹å‡»,è€Œ<code>v-on:click.self.prevent</code>åªä¼šé˜»æ­¢å¯¹å…ƒç´ è‡ªèº«çš„ç‚¹å‡»ã€‚</p>
<pre><code class="html">&lt;!-- ç‚¹å‡»äº‹ä»¶å°†åªä¼šè§¦å‘ä¸€æ¬¡ --&gt;
&lt;a v-on:click.once=&quot;doThis&quot;&gt;&lt;/a&gt;
</code></pre>

<p>ä¸åƒå…¶å®ƒåªèƒ½å¯¹åŸç”Ÿçš„DOMäº‹ä»¶èµ·ä½œç”¨çš„ä¿®é¥°ç¬¦,<code>.once</code>ä¿®é¥°ç¬¦è¿˜èƒ½è¢«ç”¨åˆ°è‡ªå®šä¹‰çš„ç»„ä»¶äº‹ä»¶ä¸Šã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»å…³äºç»„ä»¶çš„æ–‡æ¡£,ç°åœ¨å¤§å¯ä¸å¿…æ‹…å¿ƒã€‚Vueè¿˜å¯¹åº”<code>addEventListener</code>ä¸­çš„<code>passive</code>é€‰é¡¹æä¾›äº†<code>.passive</code>ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="html">&lt;!-- æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º(å³æ»šåŠ¨è¡Œä¸º)å°†ä¼šç«‹å³è§¦å‘ --&gt;
&lt;!-- è€Œä¸ä¼šç­‰å¾…onScrollå®Œæˆ  --&gt;
&lt;!-- è¿™å…¶ä¸­åŒ…å«event.preventDefault()çš„æƒ…å†µ --&gt;
&lt;div v-on:scroll.passive=&quot;onScroll&quot;&gt;...&lt;/div&gt;
</code></pre>

<p>è¿™ä¸ª<code>.passive</code>ä¿®é¥°ç¬¦å°¤å…¶èƒ½å¤Ÿæå‡ç§»åŠ¨ç«¯çš„æ€§èƒ½ã€‚ä¸è¦æŠŠ<code>.passive</code>å’Œ<code>.prevent</code>ä¸€èµ·ä½¿ç”¨,å› ä¸º<code>.prevent</code>å°†ä¼šè¢«å¿½ç•¥,åŒæ—¶æµè§ˆå™¨å¯èƒ½ä¼šå‘ä½ å±•ç¤ºä¸€ä¸ªè­¦å‘Šã€‚è¯·è®°ä½,<code>.passive</code>ä¼šå‘Šè¯‰æµè§ˆå™¨ä½ ä¸æƒ³é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<ul>
<li><strong>æŒ‰é”®ä¿®é¥°ç¬¦</strong></li>
</ul>
<p>åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶,æˆ‘ä»¬ç»å¸¸éœ€è¦æ£€æŸ¥è¯¦ç»†çš„æŒ‰é”®ã€‚Vueå…è®¸ä¸º<code>v-on</code>åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶æ·»åŠ æŒ‰é”®ä¿®é¥°ç¬¦:</p>
<pre><code class="html">&lt;!-- åªæœ‰åœ¨keyæ˜¯Enteræ—¶è°ƒç”¨vm.submit() --&gt;
&lt;input v-on:keyup.enter=&quot;submit&quot;&gt;
</code></pre>

<p>ä½ å¯ä»¥ç›´æ¥å°†<code>KeyboardEvent.key</code>æš´éœ²çš„ä»»æ„æœ‰æ•ˆæŒ‰é”®åè½¬æ¢ä¸º<code>kebab-case</code>æ¥ä½œä¸ºä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="html">&lt;input v-on:keyup.page-down=&quot;onPageDown&quot;&gt;
</code></pre>

<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­,å¤„ç†å‡½æ•°åªä¼šåœ¨<code>$event.key</code>ç­‰äº<code>PageDown</code>æ—¶è¢«è°ƒç”¨ã€‚</p>
<blockquote>
<ul>
<li><strong>æŒ‰é”®ç </strong></li>
</ul>
</blockquote>
<p>keyCodeçš„äº‹ä»¶ç”¨æ³•å·²ç»è¢«åºŸå¼ƒäº†å¹¶å¯èƒ½ä¸ä¼šè¢«æœ€æ–°çš„æµè§ˆå™¨æ”¯æŒã€‚ä½¿ç”¨keyCodeç‰¹æ€§ä¹Ÿæ˜¯å…è®¸çš„:<code>&lt;input v-on:keyup.13="submit"&gt;</code>ã€‚</p>
<p>ä¸ºäº†åœ¨å¿…è¦çš„æƒ…å†µä¸‹æ”¯æŒæ—§æµè§ˆå™¨,Vue æä¾›äº†ç»å¤§å¤šæ•°å¸¸ç”¨çš„æŒ‰é”®ç çš„åˆ«å:<code>.enter</code>,<code>.tab</code>,<code>.delete(æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)</code>,<code>.esc</code>,<code>.space</code>,<code>.up</code>,<code>.down</code>,<code>.left</code>,<code>.right</code>ã€‚æœ‰ä¸€äº›æŒ‰é”®(<code>.esc</code>ä»¥åŠæ‰€æœ‰çš„æ–¹å‘é”®)åœ¨IE9ä¸­æœ‰ä¸åŒçš„keyå€¼, å¦‚æœä½ æƒ³æ”¯æŒIE9,è¿™äº›å†…ç½®çš„åˆ«ååº”è¯¥æ˜¯é¦–é€‰ã€‚</p>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡å…¨å±€<code>config.keyCodes</code>å¯¹è±¡è‡ªå®šä¹‰æŒ‰é”®ä¿®é¥°ç¬¦åˆ«å:</p>
<pre><code class="html">// å¯ä»¥ä½¿ç”¨v-on:keyup.f1
Vue.config.keyCodes.f1 = 112
</code></pre>

<ul>
<li><strong>ç³»ç»Ÿä¿®é¥°é”®</strong></li>
</ul>
<p>å¯ä»¥ç”¨å¦‚ä¸‹ä¿®é¥°ç¬¦æ¥å®ç°ä»…åœ¨æŒ‰ä¸‹ç›¸åº”æŒ‰é”®æ—¶æ‰è§¦å‘é¼ æ ‡æˆ–é”®ç›˜äº‹ä»¶çš„ç›‘å¬å™¨:<code>.ctrl</code>,<code>.alt</code>,<code>.shift</code>,<code>.meta</code>ã€‚</p>
<p>æ³¨æ„:åœ¨Macç³»ç»Ÿé”®ç›˜ä¸Š,<code>meta</code>å¯¹åº”<code>command</code>é”®(âŒ˜)ã€‚åœ¨Windowsç³»ç»Ÿé”®ç›˜<code>meta</code>å¯¹åº”<code>Windows</code>å¾½æ ‡é”®(âŠ)ã€‚åœ¨Sunæ“ä½œç³»ç»Ÿé”®ç›˜ä¸Š,<code>meta</code>å¯¹åº”å®å¿ƒå®çŸ³é”®(â—†)ã€‚åœ¨å…¶ä»–ç‰¹å®šé”®ç›˜ä¸Š,å°¤å…¶åœ¨MITå’ŒLispæœºå™¨çš„é”®ç›˜ã€ä»¥åŠå…¶åç»§äº§å“,æ¯”å¦‚Knighté”®ç›˜ã€space-cadeté”®ç›˜,metaè¢«æ ‡è®°ä¸ºâ€œMETAâ€ã€‚åœ¨Symbolicsé”®ç›˜ä¸Š,<code>meta</code>è¢«æ ‡è®°ä¸ºâ€œMETAâ€æˆ–è€…â€œMetaâ€ã€‚</p>
<p>ä¾‹å¦‚:</p>
<pre><code class="html">&lt;!-- Alt + C --&gt;
&lt;input @keyup.alt.67=&quot;clear&quot;&gt;

&lt;!-- Ctrl + Click --&gt;
&lt;div @click.ctrl=&quot;doSomething&quot;&gt;Do something&lt;/div&gt;
</code></pre>

<p>è¯·æ³¨æ„ä¿®é¥°é”®ä¸å¸¸è§„æŒ‰é”®ä¸åŒ,åœ¨å’Œ<code>keyup</code>äº‹ä»¶ä¸€èµ·ç”¨æ—¶,äº‹ä»¶è§¦å‘æ—¶ä¿®é¥°é”®å¿…é¡»å¤„äºæŒ‰ä¸‹çŠ¶æ€ã€‚æ¢å¥è¯è¯´,åªæœ‰åœ¨æŒ‰ä½<code>ctrl</code>çš„æƒ…å†µä¸‹é‡Šæ”¾å…¶å®ƒæŒ‰é”®,æ‰èƒ½è§¦å‘<code>keyup.ctrl</code>ã€‚è€Œå•å•é‡Šæ”¾ctrlä¹Ÿä¸ä¼šè§¦å‘äº‹ä»¶ã€‚å¦‚æœä½ æƒ³è¦è¿™æ ·çš„è¡Œä¸º,è¯·ä¸º<code>ctrl</code>æ¢ç”¨<code>keyCode:keyup.17</code>ã€‚</p>
<blockquote>
<ul>
<li><strong><code>.exact</code>ä¿®é¥°ç¬¦</strong></li>
</ul>
</blockquote>
<p><code>.exact</code>ä¿®é¥°ç¬¦å…è®¸ä½ æ§åˆ¶ç”±ç²¾ç¡®çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆè§¦å‘çš„äº‹ä»¶ã€‚</p>
<pre><code class="html">&lt;!-- å³ä½¿Altæˆ–Shiftè¢«ä¸€åŒæŒ‰ä¸‹æ—¶ä¹Ÿä¼šè§¦å‘ --&gt;
&lt;button @click.ctrl=&quot;onClick&quot;&gt;A&lt;/button&gt;

&lt;!-- æœ‰ä¸”åªæœ‰Ctrlè¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ --&gt;
&lt;button @click.ctrl.exact=&quot;onCtrlClick&quot;&gt;A&lt;/button&gt;

&lt;!-- æ²¡æœ‰ä»»ä½•ç³»ç»Ÿä¿®é¥°ç¬¦è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ --&gt;
&lt;button @click.exact=&quot;onClick&quot;&gt;A&lt;/button&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦</strong></li>
</ul>
</blockquote>
<p><code>.left</code>,<code>.right</code>å’Œ<code>.middle</code>è¿™äº›ä¿®é¥°ç¬¦ä¼šé™åˆ¶å¤„ç†å‡½æ•°ä»…å“åº”ç‰¹å®šçš„é¼ æ ‡æŒ‰é’®ã€‚</p>
<ul>
<li><strong>ä¸ºä»€ä¹ˆåœ¨HTMLä¸­ç›‘å¬äº‹ä»¶?</strong></li>
</ul>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°è¿™ç§äº‹ä»¶ç›‘å¬çš„æ–¹å¼è¿èƒŒäº†å…³æ³¨ç‚¹åˆ†ç¦»(separation of concern)è¿™ä¸ªé•¿æœŸä»¥æ¥çš„ä¼˜è‰¯ä¼ ç»Ÿã€‚ä½†ä¸å¿…æ‹…å¿ƒ,å› ä¸ºæ‰€æœ‰çš„Vue.jsäº‹ä»¶å¤„ç†æ–¹æ³•å’Œè¡¨è¾¾å¼éƒ½ä¸¥æ ¼ç»‘å®šåœ¨å½“å‰è§†å›¾çš„ViewModelä¸Š,å®ƒä¸ä¼šå¯¼è‡´ä»»ä½•ç»´æŠ¤ä¸Šçš„å›°éš¾ã€‚å®é™…ä¸Š,ä½¿ç”¨<code>v-on</code>æœ‰å‡ ä¸ªå¥½å¤„:</p>
<blockquote>
<ol>
<li>æ‰«ä¸€çœ¼HTMLæ¨¡æ¿ä¾¿èƒ½è½»æ¾å®šä½åœ¨JavaScriptä»£ç é‡Œå¯¹åº”çš„æ–¹æ³•ã€‚</li>
<li>å› ä¸ºä½ æ— é¡»åœ¨JavaScripté‡Œæ‰‹åŠ¨ç»‘å®šäº‹ä»¶,ä½ çš„ViewModelä»£ç å¯ä»¥æ˜¯éå¸¸çº¯ç²¹çš„é€»è¾‘,å’ŒDOMå®Œå…¨è§£è€¦,æ›´æ˜“äºæµ‹è¯•ã€‚</li>
<li>å½“ä¸€ä¸ªViewModelè¢«é”€æ¯æ—¶,æ‰€æœ‰çš„äº‹ä»¶å¤„ç†å™¨éƒ½ä¼šè‡ªåŠ¨è¢«åˆ é™¤ã€‚ä½ æ— é¡»æ‹…å¿ƒå¦‚ä½•æ¸…ç†å®ƒä»¬ã€‚</li>
</ol>
</blockquote>
<h3 id="18">1.8 è¡¨å•è¾“å…¥ç»‘å®š</h3>
<ul>
<li><a href="https://learning.dcloud.io/#/?vid=11"><strong>åŸºç¡€ç”¨æ³•</strong></a></li>
</ul>
<p>ä½ å¯ä»¥ç”¨<code>v-model</code>æŒ‡ä»¤åœ¨è¡¨å•<code>&lt;input&gt;</code>ã€<code>&lt;textarea&gt;</code>åŠ<code>&lt;select&gt;</code>å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚å®ƒä¼šæ ¹æ®æ§ä»¶ç±»å‹è‡ªåŠ¨é€‰å–æ­£ç¡®çš„æ–¹æ³•æ¥æ›´æ–°å…ƒç´ ã€‚å°½ç®¡æœ‰äº›ç¥å¥‡,ä½†<code>v-model</code>æœ¬è´¨ä¸Šä¸è¿‡æ˜¯è¯­æ³•ç³–ã€‚å®ƒè´Ÿè´£ç›‘å¬ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶ä»¥æ›´æ–°æ•°æ®,å¹¶å¯¹ä¸€äº›æç«¯åœºæ™¯è¿›è¡Œä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚</p>
<p><code>v-model</code>ä¼šå¿½ç•¥æ‰€æœ‰è¡¨å•å…ƒç´ çš„<code>value</code>ã€<code>checked</code>ã€<code>selected</code>ç‰¹æ€§çš„åˆå§‹å€¼è€Œæ€»æ˜¯å°†Vueå®ä¾‹çš„æ•°æ®ä½œä¸ºæ•°æ®æ¥æºã€‚ä½ åº”è¯¥é€šè¿‡JavaScriptåœ¨ç»„ä»¶çš„<code>data</code>é€‰é¡¹ä¸­å£°æ˜åˆå§‹å€¼ã€‚</p>
<p><code>v-model</code>åœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„å±æ€§å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶:</p>
<blockquote>
<ol>
<li><code>text</code>å’Œ<code>textarea</code>å…ƒç´ ä½¿ç”¨<code>value</code>å±æ€§å’Œ<code>input</code>äº‹ä»¶;</li>
<li><code>checkbox</code>å’Œ<code>radio</code>ä½¿ç”¨<code>checked</code>å±æ€§å’Œ<code>change</code>äº‹ä»¶;</li>
<li><code>select</code>å­—æ®µå°†<code>value</code>ä½œä¸º<code>prop</code>å¹¶å°†<code>change</code>ä½œä¸ºäº‹ä»¶ã€‚</li>
</ol>
</blockquote>
<p>å¯¹äºéœ€è¦ä½¿ç”¨è¾“å…¥æ³•(å¦‚ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰)çš„è¯­è¨€,ä½ ä¼šå‘ç°<code>v-model</code>ä¸ä¼šåœ¨è¾“å…¥æ³•ç»„åˆæ–‡å­—è¿‡ç¨‹ä¸­å¾—åˆ°æ›´æ–°ã€‚å¦‚æœä½ ä¹Ÿæƒ³å¤„ç†è¿™ä¸ªè¿‡ç¨‹,è¯·ä½¿ç”¨<code>input</code>äº‹ä»¶ã€‚</p>
<blockquote>
<ul>
<li><strong>æ–‡æœ¬</strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;input v-model=&quot;message&quot; placeholder=&quot;edit me&quot;&gt;
&lt;p&gt;Message is: {{ message }}&lt;/p&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>å¤šè¡Œæ–‡æœ¬</strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;span&gt;Multiline message is:&lt;/span&gt;
&lt;p style=&quot;white-space: pre-line;&quot;&gt;{{ message }}&lt;/p&gt;
&lt;br&gt;
&lt;textarea v-model=&quot;message&quot; placeholder=&quot;add multiple lines&quot;&gt;&lt;/textarea&gt;
</code></pre>

<p>åœ¨æ–‡æœ¬åŒºåŸŸæ’å€¼(<code>&lt;textarea&gt;{{text}}&lt;/textarea&gt;</code>)å¹¶ä¸ä¼šç”Ÿæ•ˆ,åº”ç”¨v-modelæ¥ä»£æ›¿ã€‚</p>
<blockquote>
<ul>
<li><strong>å¤é€‰æ¡†</strong></li>
</ul>
</blockquote>
<p>å•ä¸ªå¤é€‰æ¡†,ç»‘å®šåˆ°å¸ƒå°”å€¼:</p>
<pre><code class="html">&lt;input type=&quot;checkbox&quot; id=&quot;checkbox&quot; v-model=&quot;checked&quot;&gt;
&lt;label for=&quot;checkbox&quot;&gt;{{ checked }}&lt;/label&gt;
</code></pre>

<p>å¤šä¸ªå¤é€‰æ¡†,ç»‘å®šåˆ°åŒä¸€ä¸ªæ•°ç»„:</p>
<pre><code class="html">&lt;div id='example-3'&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;jack&quot; value=&quot;Jack&quot; v-model=&quot;checkedNames&quot;&gt;
    &lt;label for=&quot;jack&quot;&gt;Jack&lt;/label&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;john&quot; value=&quot;John&quot; v-model=&quot;checkedNames&quot;&gt;
    &lt;label for=&quot;john&quot;&gt;John&lt;/label&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;mike&quot; value=&quot;Mike&quot; v-model=&quot;checkedNames&quot;&gt;
    &lt;label for=&quot;mike&quot;&gt;Mike&lt;/label&gt;
    &lt;br&gt;
    &lt;span&gt;Checked names: {{ checkedNames }}&lt;/span&gt;
&lt;/div&gt;
new Vue({
    el: '#example-3',
    data: {
        checkedNames: []
    }
})
</code></pre>

<blockquote>
<ul>
<li><strong>å•é€‰æŒ‰é’®</strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;div id=&quot;example-4&quot;&gt;
    &lt;input type=&quot;radio&quot; id=&quot;one&quot; value=&quot;One&quot; v-model=&quot;picked&quot;&gt;
    &lt;label for=&quot;one&quot;&gt;One&lt;/label&gt;
    &lt;br&gt;
    &lt;input type=&quot;radio&quot; id=&quot;two&quot; value=&quot;Two&quot; v-model=&quot;picked&quot;&gt;
    &lt;label for=&quot;two&quot;&gt;Two&lt;/label&gt;
    &lt;br&gt;
    &lt;span&gt;Picked: {{ picked }}&lt;/span&gt;
&lt;/div&gt;
new Vue({
    el: '#example-4',
    data: {
        picked: ''
    }
})
</code></pre>

<blockquote>
<ul>
<li><strong>é€‰æ‹©æ¡†</strong></li>
</ul>
</blockquote>
<p>å•é€‰æ—¶:</p>
<pre><code class="html">&lt;div id=&quot;example-5&quot;&gt;
    &lt;select v-model=&quot;selected&quot;&gt;
        &lt;option disabled value=&quot;&quot;&gt;è¯·é€‰æ‹©&lt;/option&gt;
        &lt;option&gt;A&lt;/option&gt;
        &lt;option&gt;B&lt;/option&gt;
        &lt;option&gt;C&lt;/option&gt;
    &lt;/select&gt;
    &lt;span&gt;Selected: {{ selected }}&lt;/span&gt;
&lt;/div&gt;
new Vue({
    el: '...',
    data: {
        selected: ''
    }
})
</code></pre>

<p>å¦‚æœ<code>v-model</code>è¡¨è¾¾å¼çš„åˆå§‹å€¼æœªèƒ½åŒ¹é…ä»»ä½•é€‰é¡¹,<code>&lt;select&gt;</code>å…ƒç´ å°†è¢«æ¸²æŸ“ä¸ºâ€œæœªé€‰ä¸­â€çŠ¶æ€ã€‚åœ¨iOSä¸­,è¿™ä¼šä½¿ç”¨æˆ·æ— æ³•é€‰æ‹©ç¬¬ä¸€ä¸ªé€‰é¡¹ã€‚å› ä¸ºè¿™æ ·çš„æƒ…å†µä¸‹,iOSä¸ä¼šè§¦å‘<code>change</code>äº‹ä»¶ã€‚å› æ­¤,æ›´æ¨èåƒä¸Šé¢è¿™æ ·æä¾›ä¸€ä¸ªå€¼ä¸ºç©ºçš„ç¦ç”¨é€‰é¡¹ã€‚</p>
<p>å¤šé€‰æ—¶(ç»‘å®šåˆ°ä¸€ä¸ªæ•°ç»„):</p>
<pre><code class="html">&lt;div id=&quot;example-6&quot;&gt;
    &lt;select v-model=&quot;selected&quot; multiple style=&quot;width: 50px;&quot;&gt;
        &lt;option&gt;A&lt;/option&gt;
        &lt;option&gt;B&lt;/option&gt;
        &lt;option&gt;C&lt;/option&gt;
    &lt;/select&gt;
    &lt;br&gt;
    &lt;span&gt;Selected: {{ selected }}&lt;/span&gt;
&lt;/div&gt;
new Vue({
    el: '#example-6',
    data: {
        selected: []
    }
})
</code></pre>

<p>ç”¨<code>v-for</code>æ¸²æŸ“çš„åŠ¨æ€é€‰é¡¹:</p>
<pre><code class="html">&lt;select v-model=&quot;selected&quot;&gt;
    &lt;option v-for=&quot;option in options&quot; v-bind:value=&quot;option.value&quot;&gt;
        {{ option.text }}
    &lt;/option&gt;
&lt;/select&gt;
&lt;span&gt;Selected: {{ selected }}&lt;/span&gt;
new Vue({
    el: '...',
    data: {
        selected: 'A',
        options: [
            { text: 'One', value: 'A' },
            { text: 'Two', value: 'B' },
            { text: 'Three', value: 'C' }
        ]
    }
})
</code></pre>

<ul>
<li><strong>å€¼ç»‘å®š</strong></li>
</ul>
<p>å¯¹äºå•é€‰æŒ‰é’®,å¤é€‰æ¡†åŠé€‰æ‹©æ¡†çš„é€‰é¡¹,v-modelç»‘å®šçš„å€¼é€šå¸¸æ˜¯é™æ€å­—ç¬¦ä¸²(å¯¹äºå¤é€‰æ¡†ä¹Ÿå¯ä»¥æ˜¯å¸ƒå°”å€¼):</p>
<pre><code class="html">&lt;!-- å½“é€‰ä¸­æ—¶,pickedä¸ºå­—ç¬¦ä¸²&quot;a&quot; --&gt;
&lt;input type=&quot;radio&quot; v-model=&quot;picked&quot; value=&quot;a&quot;&gt;

&lt;!-- toggleä¸ºtrueæˆ–false --&gt;
&lt;input type=&quot;checkbox&quot; v-model=&quot;toggle&quot;&gt;

&lt;!-- å½“é€‰ä¸­ç¬¬ä¸€ä¸ªé€‰é¡¹æ—¶,selectedä¸ºå­—ç¬¦ä¸²&quot;abc&quot; --&gt;
&lt;select v-model=&quot;selected&quot;&gt;
  &lt;option value=&quot;abc&quot;&gt;ABC&lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>ä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¯èƒ½æƒ³æŠŠå€¼ç»‘å®šåˆ°Vueå®ä¾‹çš„ä¸€ä¸ªåŠ¨æ€å±æ€§ä¸Š,è¿™æ—¶å¯ä»¥ç”¨v-bindå®ç°,å¹¶ä¸”è¿™ä¸ªå±æ€§çš„å€¼å¯ä»¥ä¸æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<blockquote>
<ul>
<li><strong>å¤é€‰æ¡†</strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;input
    type=&quot;checkbox&quot;
    v-model=&quot;toggle&quot;
    true-value=&quot;yes&quot;
    false-value=&quot;no&quot;
&gt;
// å½“é€‰ä¸­æ—¶
vm.toggle === 'yes'
// å½“æ²¡æœ‰é€‰ä¸­æ—¶
vm.toggle === 'no'
</code></pre>

<p>è¿™é‡Œçš„<code>true-value</code>å’Œ<code>false-value</code>ç‰¹æ€§å¹¶ä¸ä¼šå½±å“è¾“å…¥æ§ä»¶çš„<code>value</code>ç‰¹æ€§,å› ä¸ºæµè§ˆå™¨åœ¨æäº¤è¡¨å•æ—¶å¹¶ä¸ä¼šåŒ…å«æœªè¢«é€‰ä¸­çš„å¤é€‰æ¡†ã€‚å¦‚æœè¦ç¡®ä¿è¡¨å•ä¸­è¿™ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ªèƒ½å¤Ÿè¢«æäº¤,(æ¯”å¦‚â€œ<code>yes</code>â€æˆ–â€œ<code>no</code>â€),è¯·æ¢ç”¨å•é€‰æŒ‰é’®ã€‚</p>
<blockquote>
<ul>
<li><strong>å•é€‰æŒ‰é’®</strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;input type=&quot;radio&quot; v-model=&quot;pick&quot; v-bind:value=&quot;a&quot;&gt;
// å½“é€‰ä¸­æ—¶
vm.pick === vm.a
</code></pre>

<blockquote>
<ul>
<li><strong>é€‰æ‹©æ¡†çš„é€‰é¡¹</strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;select v-model=&quot;selected&quot;&gt;
    &lt;!-- å†…è”å¯¹è±¡å­—é¢é‡ --&gt;
    &lt;option v-bind:value=&quot;{ number: 123 }&quot;&gt;123&lt;/option&gt;
&lt;/select&gt;
// å½“é€‰ä¸­æ—¶
typeof vm.selected // =&gt; 'object'
vm.selected.number // =&gt; 123
</code></pre>

<ul>
<li><strong>ä¿®é¥°ç¬¦</strong></li>
</ul>
<blockquote>
<ul>
<li><strong><code>.lazy</code></strong></li>
</ul>
</blockquote>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹,<code>v-model</code>åœ¨æ¯æ¬¡<code>input</code>äº‹ä»¶è§¦å‘åå°†è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®è¿›è¡ŒåŒæ­¥(é™¤äº†ä¸Šè¿°è¾“å…¥æ³•ç»„åˆæ–‡å­—æ—¶)ã€‚ä½ å¯ä»¥æ·»åŠ <code>lazy</code>ä¿®é¥°ç¬¦,ä»è€Œè½¬å˜ä¸ºä½¿ç”¨<code>change</code>äº‹ä»¶è¿›è¡ŒåŒæ­¥:</p>
<pre><code class="html">&lt;!-- åœ¨â€œchangeâ€æ—¶è€Œéâ€œinputâ€æ—¶æ›´æ–° --&gt;
&lt;input v-model.lazy=&quot;msg&quot; &gt;
</code></pre>

<blockquote>
<ul>
<li><strong><code>.number</code></strong></li>
</ul>
</blockquote>
<p>å¦‚æœæƒ³è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹,å¯ä»¥ç»™<code>v-model</code>æ·»åŠ <code>number</code>ä¿®é¥°ç¬¦:</p>
<pre><code class="html">&lt;input v-model.number=&quot;age&quot; type=&quot;number&quot;&gt;
</code></pre>

<p>è¿™é€šå¸¸å¾ˆæœ‰ç”¨,å› ä¸ºå³ä½¿åœ¨<code>type="number"</code>æ—¶,HTMLè¾“å…¥å…ƒç´ çš„å€¼ä¹Ÿæ€»ä¼šè¿”å›å­—ç¬¦ä¸²ã€‚å¦‚æœè¿™ä¸ªå€¼æ— æ³•è¢«<code>parseFloat()</code>è§£æ,åˆ™ä¼šè¿”å›åŸå§‹çš„å€¼ã€‚</p>
<blockquote>
<ul>
<li><strong><code>.trim</code></strong></li>
</ul>
</blockquote>
<p>å¦‚æœè¦è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦,å¯ä»¥ç»™<code>v-model</code>æ·»åŠ <code>trim</code>ä¿®é¥°ç¬¦:</p>
<pre><code class="html">&lt;input v-model.trim=&quot;msg&quot;&gt;
</code></pre>

<ul>
<li><strong>åœ¨ç»„ä»¶ä¸Šä½¿ç”¨<code>v-model</code></strong></li>
</ul>
<p>HTMLåŸç”Ÿçš„è¾“å…¥å…ƒç´ ç±»å‹å¹¶ä¸æ€»èƒ½æ»¡è¶³éœ€æ±‚ã€‚å¹¸å¥½,Vueçš„ç»„ä»¶ç³»ç»Ÿå…è®¸ä½ åˆ›å»ºå…·æœ‰å®Œå…¨è‡ªå®šä¹‰è¡Œä¸ºä¸”å¯å¤ç”¨çš„è¾“å…¥ç»„ä»¶ã€‚è¿™äº›è¾“å…¥ç»„ä»¶ç”šè‡³å¯ä»¥å’Œ<code>v-model</code>ä¸€èµ·ä½¿ç”¨!è¦äº†è§£æ›´å¤š,è¯·å‚é˜…ç»„ä»¶æŒ‡å—ä¸­çš„<a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model">è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶</a>ã€‚</p>
<h3 id="19">1.9 ç»„ä»¶åŸºç¡€</h3>
<ul>
<li><strong>åŸºæœ¬ç¤ºä¾‹</strong></li>
</ul>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªVueç»„ä»¶çš„ç¤ºä¾‹:</p>
<pre><code class="javascript">// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶
Vue.component('button-counter', {
    data: function () {
        return {
            count: 0
        }
    },
    template: '&lt;button v-on:click=&quot;count++&quot;&gt;You clicked me {{ count }} times.&lt;/button&gt;'
})
</code></pre>

<p>ç»„ä»¶æ˜¯å¯å¤ç”¨çš„Vueå®ä¾‹,ä¸”å¸¦æœ‰ä¸€ä¸ªåå­—:åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯<code>&lt;button-counter &gt;</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªé€šè¿‡<code>new Vue</code>åˆ›å»ºçš„Vueæ ¹å®ä¾‹ä¸­,æŠŠè¿™ä¸ªç»„ä»¶ä½œä¸ºè‡ªå®šä¹‰å…ƒç´ æ¥ä½¿ç”¨:</p>
<pre><code class="html">&lt;div id=&quot;components-demo&quot;&gt;
    &lt;button-counter&gt;&lt;/button-counter&gt;
&lt;/div&gt;
new Vue({ el: '#components-demo' })
</code></pre>

<p>å› ä¸ºç»„ä»¶æ˜¯å¯å¤ç”¨çš„Vueå®ä¾‹,æ‰€ä»¥å®ƒä»¬ä¸<code>new Vue</code>æ¥æ”¶ç›¸åŒçš„é€‰é¡¹,ä¾‹å¦‚<code>data</code>ã€<code>computed</code>ã€<code>watch</code>ã€<code>methods</code>ä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ä»…æœ‰çš„ä¾‹å¤–æ˜¯åƒelè¿™æ ·æ ¹å®ä¾‹ç‰¹æœ‰çš„é€‰é¡¹ã€‚</p>
<ul>
<li><strong>ç»„ä»¶çš„å¤ç”¨</strong></li>
</ul>
<p>ä½ å¯ä»¥å°†ç»„ä»¶è¿›è¡Œä»»æ„æ¬¡æ•°çš„å¤ç”¨:</p>
<pre><code class="html">&lt;div id=&quot;components-demo&quot;&gt;
    &lt;button-counter&gt;&lt;/button-counter&gt;
    &lt;button-counter&gt;&lt;/button-counter&gt;
    &lt;button-counter&gt;&lt;/button-counter&gt;
&lt;/div&gt;
</code></pre>

<p>æ³¨æ„å½“ç‚¹å‡»æŒ‰é’®æ—¶,æ¯ä¸ªç»„ä»¶éƒ½ä¼šå„è‡ªç‹¬ç«‹ç»´æŠ¤å®ƒçš„<code>count</code>ã€‚å› ä¸ºä½ æ¯ç”¨ä¸€æ¬¡ç»„ä»¶,å°±ä¼šæœ‰ä¸€ä¸ªå®ƒçš„æ–°å®ä¾‹è¢«åˆ›å»ºã€‚</p>
<blockquote>
<ul>
<li><strong><code>data</code>å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°</strong></li>
</ul>
</blockquote>
<p>å½“æˆ‘ä»¬å®šä¹‰è¿™ä¸ª<code>&lt;button-counter &gt;</code>ç»„ä»¶æ—¶,ä½ å¯èƒ½ä¼šå‘ç°å®ƒçš„<code>data</code>å¹¶ä¸æ˜¯åƒè¿™æ ·ç›´æ¥æä¾›ä¸€ä¸ªå¯¹è±¡:</p>
<pre><code class="javascript">data: {
    count: 0
}
</code></pre>

<p>å–è€Œä»£ä¹‹çš„æ˜¯,ä¸€ä¸ªç»„ä»¶çš„<code>data</code>é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°,å› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´:</p>
<pre><code class="javascript">data: function () {
    return {
        count: 0
    }
}
</code></pre>

<p>å¦‚æœVueæ²¡æœ‰è¿™æ¡è§„åˆ™,ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±å¯èƒ½ä¼šåƒå¦‚ä¸‹ä»£ç ä¸€æ ·å½±å“åˆ°å…¶å®ƒæ‰€æœ‰å®ä¾‹ã€‚</p>
<ul>
<li><strong>ç»„ä»¶çš„ç»„ç»‡</strong></li>
</ul>
<p>é€šå¸¸ä¸€ä¸ªåº”ç”¨ä¼šä»¥ä¸€æ£µåµŒå¥—çš„ç»„ä»¶æ ‘çš„å½¢å¼æ¥ç»„ç»‡:</p>
<p><img alt="" src="https://cn.vuejs.org/images/components.png" /></p>
<p>ä¾‹å¦‚,ä½ å¯èƒ½ä¼šæœ‰é¡µå¤´ã€ä¾§è¾¹æ ã€å†…å®¹åŒºç­‰ç»„ä»¶,æ¯ä¸ªç»„ä»¶åˆåŒ…å«äº†å…¶å®ƒçš„åƒå¯¼èˆªé“¾æ¥ã€åšæ–‡ä¹‹ç±»çš„ç»„ä»¶ã€‚ä¸ºäº†èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨,è¿™äº›ç»„ä»¶å¿…é¡»å…ˆæ³¨å†Œä»¥ä¾¿Vueèƒ½å¤Ÿè¯†åˆ«ã€‚è¿™é‡Œæœ‰ä¸¤ç§ç»„ä»¶çš„æ³¨å†Œç±»å‹:å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œã€‚è‡³æ­¤,æˆ‘ä»¬çš„ç»„ä»¶éƒ½åªæ˜¯é€šè¿‡<code>Vue.component</code>å…¨å±€æ³¨å†Œçš„:</p>
<pre><code class="javascript">Vue.component('my-component-name', {
    // ... options ...
})
</code></pre>

<p>å…¨å±€æ³¨å†Œçš„ç»„ä»¶å¯ä»¥ç”¨åœ¨å…¶è¢«æ³¨å†Œä¹‹åçš„ä»»ä½•(é€šè¿‡<code>new Vue</code>)æ–°åˆ›å»ºçš„Vueæ ¹å®ä¾‹,ä¹ŸåŒ…æ‹¬å…¶ç»„ä»¶æ ‘ä¸­çš„æ‰€æœ‰å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ã€‚</p>
<ul>
<li><strong>é€šè¿‡<code>Prop</code>å‘å­ç»„ä»¶ä¼ é€’æ•°æ®</strong></li>
</ul>
<p>æ—©äº›æ—¶å€™,æˆ‘ä»¬æåˆ°äº†åˆ›å»ºä¸€ä¸ªåšæ–‡ç»„ä»¶çš„äº‹æƒ…ã€‚é—®é¢˜æ˜¯å¦‚æœä½ ä¸èƒ½å‘è¿™ä¸ªç»„ä»¶ä¼ é€’æŸä¸€ç¯‡åšæ–‡çš„æ ‡é¢˜æˆ–å†…å®¹ä¹‹ç±»çš„æˆ‘ä»¬æƒ³å±•ç¤ºçš„æ•°æ®çš„è¯,å®ƒæ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨çš„ã€‚è¿™ä¹Ÿæ­£æ˜¯<code>prop</code>çš„ç”±æ¥ã€‚</p>
<p>Propæ˜¯ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸Šæ³¨å†Œçš„ä¸€äº›è‡ªå®šä¹‰ç‰¹æ€§ã€‚å½“ä¸€ä¸ªå€¼ä¼ é€’ç»™ä¸€ä¸ª<code>prop</code>ç‰¹æ€§çš„æ—¶å€™,å®ƒå°±å˜æˆäº†é‚£ä¸ªç»„ä»¶å®ä¾‹çš„ä¸€ä¸ªå±æ€§ã€‚ä¸ºäº†ç»™åšæ–‡ç»„ä»¶ä¼ é€’ä¸€ä¸ªæ ‡é¢˜,æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªpropsé€‰é¡¹å°†å…¶åŒ…å«åœ¨è¯¥ç»„ä»¶å¯æ¥å—çš„<code>prop</code>åˆ—è¡¨ä¸­:</p>
<pre><code class="javascript">Vue.component('blog-post', {
    props: ['title'],
    template: '&lt;h3&gt;{{ title }}&lt;/h3&gt;'
})
</code></pre>

<p>ä¸€ä¸ªç»„ä»¶é»˜è®¤å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„<code>prop</code>,ä»»ä½•å€¼éƒ½å¯ä»¥ä¼ é€’ç»™ä»»ä½•<code>prop</code>ã€‚åœ¨ä¸Šè¿°æ¨¡æ¿ä¸­,ä½ ä¼šå‘ç°æˆ‘ä»¬èƒ½å¤Ÿåœ¨ç»„ä»¶å®ä¾‹ä¸­è®¿é—®è¿™ä¸ªå€¼,å°±åƒè®¿é—®<code>data</code>ä¸­çš„å€¼ä¸€æ ·ã€‚</p>
<p>ä¸€ä¸ª<code>prop</code>è¢«æ³¨å†Œä¹‹å,ä½ å°±å¯ä»¥åƒè¿™æ ·æŠŠæ•°æ®ä½œä¸ºä¸€ä¸ªè‡ªå®šä¹‰ç‰¹æ€§ä¼ é€’è¿›æ¥:</p>
<pre><code class="javascript">&lt;blog-post title=&quot;My journey with Vue&quot;&gt;&lt;/blog-post&gt;
&lt;blog-post title=&quot;Blogging with Vue&quot;&gt;&lt;/blog-post&gt;
&lt;blog-post title=&quot;Why Vue is so fun&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<p>ç„¶è€Œåœ¨ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ä¸­,ä½ å¯èƒ½åœ¨<code>data</code>é‡Œæœ‰ä¸€ä¸ªåšæ–‡çš„æ•°ç»„:</p>
<pre><code class="javascript">new Vue({
    el: '#blog-post-demo',
    data: {
        posts: [
            { id: 1, title: 'My journey with Vue' },
            { id: 2, title: 'Blogging with Vue' },
            { id: 3, title: 'Why Vue is so fun' }
        ]
    }
})
</code></pre>

<p>å¹¶æƒ³è¦ä¸ºæ¯ç¯‡åšæ–‡æ¸²æŸ“ä¸€ä¸ªç»„ä»¶:</p>
<pre><code class="javascript">&lt;blog-post
    v-for=&quot;post in posts&quot;
    v-bind:key=&quot;post.id&quot;
    v-bind:title=&quot;post.title&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<p>å¦‚ä¸Šæ‰€ç¤º,ä½ ä¼šå‘ç°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>v-bind</code>æ¥åŠ¨æ€ä¼ é€’<code>prop</code>ã€‚è¿™åœ¨ä½ ä¸€å¼€å§‹ä¸æ¸…æ¥šè¦æ¸²æŸ“çš„å…·ä½“å†…å®¹,æ¯”å¦‚ä»ä¸€ä¸ªAPIè·å–åšæ–‡åˆ—è¡¨çš„æ—¶å€™,æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚åˆ°ç›®å‰ä¸ºæ­¢,å…³äºpropä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†,å¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹,æˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠ<code>prop</code>è¯»å®Œã€‚</p>
<ul>
<li><strong>å•ä¸ªæ ¹å…ƒç´ </strong></li>
</ul>
<p>å½“æ„å»ºä¸€ä¸ª<code>&lt;blog-post &gt;</code>ç»„ä»¶æ—¶,ä½ çš„æ¨¡æ¿æœ€ç»ˆä¼šåŒ…å«çš„ä¸œè¥¿è¿œä¸æ­¢ä¸€ä¸ªæ ‡é¢˜:</p>
<pre><code class="html">&lt;h3&gt;{{ title }}&lt;/h3&gt;
</code></pre>

<p>æœ€æœ€èµ·ç ,ä½ ä¼šåŒ…å«è¿™ç¯‡åšæ–‡çš„æ­£æ–‡:</p>
<pre><code class="html">&lt;h3&gt;{{ title }}&lt;/h3&gt;
&lt;div v-html=&quot;content&quot;&gt;&lt;/div&gt;
</code></pre>

<p>ç„¶è€Œå¦‚æœä½ åœ¨æ¨¡æ¿ä¸­å°è¯•è¿™æ ·å†™,Vueä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯,å¹¶è§£é‡Šé“<code>every component must have a single root element</code>(æ¯ä¸ªç»„ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ )ã€‚ä½ å¯ä»¥å°†æ¨¡æ¿çš„å†…å®¹åŒ…è£¹åœ¨ä¸€ä¸ªçˆ¶å…ƒç´ å†…,æ¥ä¿®å¤è¿™ä¸ªé—®é¢˜,ä¾‹å¦‚:</p>
<pre><code class="html">&lt;div class=&quot;blog-post&quot;&gt;
    &lt;h3&gt;{{ title }}&lt;/h3&gt;
    &lt;div v-html=&quot;content&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>çœ‹èµ·æ¥å½“ç»„ä»¶å˜å¾—è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™,æˆ‘ä»¬çš„åšæ–‡ä¸åªéœ€è¦æ ‡é¢˜å’Œå†…å®¹,è¿˜éœ€è¦å‘å¸ƒæ—¥æœŸã€è¯„è®ºç­‰ç­‰ã€‚ä¸ºæ¯ä¸ªç›¸å…³çš„ä¿¡æ¯å®šä¹‰ä¸€ä¸ª<code>prop</code>ä¼šå˜å¾—å¾ˆéº»çƒ¦:</p>
<pre><code class="html">&lt;blog-post
    v-for=&quot;post in posts&quot;
    v-bind:key=&quot;post.id&quot;
    v-bind:title=&quot;post.title&quot;
    v-bind:content=&quot;post.content&quot;
    v-bind:publishedAt=&quot;post.publishedAt&quot;
    v-bind:comments=&quot;post.comments&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<p>æ‰€ä»¥æ˜¯æ—¶å€™é‡æ„ä¸€ä¸‹è¿™ä¸ª<code>&lt;blog-post &gt;</code>ç»„ä»¶äº†,è®©å®ƒå˜æˆæ¥å—ä¸€ä¸ªå•ç‹¬çš„<code>post prop</code>:</p>
<pre><code class="html">&lt;blog-post
    v-for=&quot;post in posts&quot;
    v-bind:key=&quot;post.id&quot;
    v-bind:post=&quot;post&quot;
&gt;&lt;/blog-post&gt;
Vue.component('blog-post', {
    props: ['post'],
    template: `
        &lt;div class=&quot;blog-post&quot;&gt;
            &lt;h3&gt;{{ post.title }}&lt;/h3&gt;
            &lt;div v-html=&quot;post.content&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    `
})
</code></pre>

<p>ä¸Šè¿°çš„è¿™ä¸ªå’Œä¸€äº›æ¥ä¸‹æ¥çš„ç¤ºä¾‹ä½¿ç”¨äº†JavaScriptçš„æ¨¡æ¿å­—ç¬¦ä¸²æ¥è®©å¤šè¡Œçš„æ¨¡æ¿æ›´æ˜“è¯»ã€‚å®ƒä»¬åœ¨IEä¸‹å¹¶æ²¡æœ‰è¢«æ”¯æŒ,æ‰€ä»¥å¦‚æœä½ éœ€è¦åœ¨ä¸(ç»è¿‡Babelæˆ–TypeScriptä¹‹ç±»çš„å·¥å…·)ç¼–è¯‘çš„æƒ…å†µä¸‹æ”¯æŒIE,è¯·ä½¿ç”¨æŠ˜è¡Œè½¬ä¹‰å­—ç¬¦å–è€Œä»£ä¹‹ã€‚</p>
<p>ç°åœ¨,ä¸è®ºä½•æ—¶ä¸º<code>post</code>å¯¹è±¡æ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§,å®ƒéƒ½ä¼šè‡ªåŠ¨åœ°åœ¨<code>&lt;blog-post &gt;</code>å†…å¯ç”¨ã€‚</p>
<ul>
<li><strong>ç›‘å¬å­ç»„ä»¶äº‹ä»¶</strong></li>
</ul>
<p>åœ¨æˆ‘ä»¬å¼€å‘<code>&lt;blog-post &gt;</code>ç»„ä»¶æ—¶,å®ƒçš„ä¸€äº›åŠŸèƒ½å¯èƒ½è¦æ±‚æˆ‘ä»¬å’Œçˆ¶çº§ç»„ä»¶è¿›è¡Œæ²Ÿé€šã€‚ä¾‹å¦‚æˆ‘ä»¬å¯èƒ½ä¼šå¼•å…¥ä¸€ä¸ªè¾…åŠ©åŠŸèƒ½æ¥æ”¾å¤§åšæ–‡çš„å­—å·,åŒæ—¶è®©é¡µé¢çš„å…¶å®ƒéƒ¨åˆ†ä¿æŒé»˜è®¤çš„å­—å·ã€‚åœ¨å…¶çˆ¶ç»„ä»¶ä¸­,æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ª<code>postFontSize</code>æ•°æ®å±æ€§æ¥æ”¯æŒè¿™ä¸ªåŠŸèƒ½:</p>
<pre><code class="javascript">new Vue({
    el: '#blog-posts-events-demo',
    data: {
        posts: [/* ... */],
        postFontSize: 1
    }
})
</code></pre>

<p>å®ƒå¯ä»¥åœ¨æ¨¡æ¿ä¸­ç”¨æ¥æ§åˆ¶æ‰€æœ‰åšæ–‡çš„å­—å·:</p>
<pre><code class="javascript">&lt;div id=&quot;blog-posts-events-demo&quot;&gt;
    &lt;div :style=&quot;{ fontSize: postFontSize + 'em' }&quot;&gt;
        &lt;blog-post
            v-for=&quot;post in posts&quot;
            v-bind:key=&quot;post.id&quot;
            v-bind:post=&quot;post&quot;
        &gt;&lt;/blog-post&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>ç°åœ¨æˆ‘ä»¬åœ¨æ¯ç¯‡åšæ–‡æ­£æ–‡ä¹‹å‰æ·»åŠ ä¸€ä¸ªæŒ‰é’®æ¥æ”¾å¤§å­—å·:</p>
<pre><code class="javascript">Vue.component('blog-post', {
    props: ['post'],
    template: `
        &lt;div class=&quot;blog-post&quot;&gt;
            &lt;h3&gt;{{ post.title }}&lt;/h3&gt;
            &lt;button&gt;
                Enlarge text
            &lt;/button&gt;
            &lt;div v-html=&quot;post.content&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
        `
})
</code></pre>

<p>é—®é¢˜æ˜¯è¿™ä¸ªæŒ‰é’®ä¸ä¼šåšä»»ä½•äº‹:</p>
<pre><code class="javascript">&lt;button&gt;
    Enlarge text
&lt;/button&gt;
</code></pre>

<p>å½“ç‚¹å‡»è¿™ä¸ªæŒ‰é’®æ—¶,æˆ‘ä»¬éœ€è¦å‘Šè¯‰çˆ¶çº§ç»„ä»¶æ”¾å¤§æ‰€æœ‰åšæ–‡çš„æ–‡æœ¬ã€‚å¹¸å¥½Vueå®ä¾‹æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶çš„ç³»ç»Ÿæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚çˆ¶çº§ç»„ä»¶å¯ä»¥åƒå¤„ç†<code>native DOM</code>äº‹ä»¶ä¸€æ ·é€šè¿‡v-onç›‘å¬å­ç»„ä»¶å®ä¾‹çš„ä»»æ„äº‹ä»¶:</p>
<pre><code class="javascript">&lt;blog-post
    ...
    v-on:enlarge-text=&quot;postFontSize += 0.1&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<p>åŒæ—¶å­ç»„ä»¶å¯ä»¥é€šè¿‡è°ƒç”¨å†…å»ºçš„<code>$emit</code>æ–¹æ³•å¹¶ä¼ å…¥äº‹ä»¶åç§°æ¥è§¦å‘ä¸€ä¸ªäº‹ä»¶:</p>
<pre><code class="javascript">&lt;button v-on:click=&quot;$emit('enlarge-text')&quot;&gt;
    Enlarge text
&lt;/button&gt;
</code></pre>

<p>æœ‰äº†è¿™ä¸ª<code>v-on:enlarge-text="postFontSize += 0.1"</code>ç›‘å¬å™¨,çˆ¶çº§ç»„ä»¶å°±ä¼šæ¥æ”¶è¯¥äº‹ä»¶å¹¶æ›´æ–°<code>postFontSize</code>çš„å€¼ã€‚</p>
<blockquote>
<ul>
<li><strong>ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼</strong></li>
</ul>
</blockquote>
<p>æœ‰çš„æ—¶å€™ç”¨ä¸€ä¸ªäº‹ä»¶æ¥æŠ›å‡ºä¸€ä¸ªç‰¹å®šçš„å€¼æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯èƒ½æƒ³è®©<code>&lt;blog-post &gt;</code>ç»„ä»¶å†³å®šå®ƒçš„æ–‡æœ¬è¦æ”¾å¤§å¤šå°‘ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨$emitçš„ç¬¬äºŒä¸ªå‚æ•°æ¥æä¾›è¿™ä¸ªå€¼:</p>
<pre><code class="javascript">&lt;button v-on:click=&quot;$emit('enlarge-text', 0.1)&quot;&gt;
    Enlarge text
&lt;/button&gt;
</code></pre>

<p>ç„¶åå½“åœ¨çˆ¶çº§ç»„ä»¶ç›‘å¬è¿™ä¸ªäº‹ä»¶çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>$event</code>è®¿é—®åˆ°è¢«æŠ›å‡ºçš„è¿™ä¸ªå€¼:</p>
<pre><code class="javascript">&lt;blog-post
    ...
    v-on:enlarge-text=&quot;postFontSize += $event&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<p>æˆ–è€…,å¦‚æœè¿™ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯ä¸€ä¸ªæ–¹æ³•:</p>
<pre><code class="javascript">&lt;blog-post
    ...
    v-on:enlarge-text=&quot;onEnlargeText&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<p>é‚£ä¹ˆè¿™ä¸ªå€¼å°†ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¿™ä¸ªæ–¹æ³•:</p>
<pre><code class="javascript">methods: {
    onEnlargeText: function (enlargeAmount) {
        this.postFontSize += enlargeAmount
    }
}
</code></pre>

<blockquote>
<ul>
<li><strong>åœ¨ç»„ä»¶ä¸Šä½¿ç”¨<code>v-model</code></strong></li>
</ul>
</blockquote>
<p>è‡ªå®šä¹‰äº‹ä»¶ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºæ”¯æŒ<code>v-model</code>çš„è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶ã€‚è®°ä½:</p>
<pre><code class="html">&lt;input v-model=&quot;searchText&quot;&gt;
</code></pre>

<p>ç­‰ä»·äº:</p>
<pre><code class="html">&lt;input
    v-bind:value=&quot;searchText&quot;
    v-on:input=&quot;searchText = $event.target.value&quot;
&gt;
</code></pre>

<p>å½“ç”¨åœ¨ç»„ä»¶ä¸Šæ—¶,<code>v-model</code>åˆ™ä¼šè¿™æ ·:</p>
<pre><code class="html">&lt;custom-input
    v-bind:value=&quot;searchText&quot;
    v-on:input=&quot;searchText = $event&quot;
&gt;&lt;/custom-input&gt;
</code></pre>

<p>ä¸ºäº†è®©å®ƒæ­£å¸¸å·¥ä½œ,è¿™ä¸ªç»„ä»¶å†…çš„<code>&lt;input&gt;</code>å¿…é¡»:</p>
<blockquote>
<ol>
<li>å°†å…¶<code>value</code>ç‰¹æ€§ç»‘å®šåˆ°ä¸€ä¸ªåå«<code>value</code>çš„<code>prop</code>ä¸Š</li>
<li>åœ¨å…¶<code>input</code>äº‹ä»¶è¢«è§¦å‘æ—¶,å°†æ–°çš„å€¼é€šè¿‡è‡ªå®šä¹‰çš„<code>input</code>äº‹ä»¶æŠ›å‡º</li>
</ol>
</blockquote>
<p>å†™æˆä»£ç ä¹‹åæ˜¯è¿™æ ·çš„:</p>
<pre><code class="javascript">Vue.component('custom-input', {
    props: ['value'],
    template: `
        &lt;input
            v-bind:value=&quot;value&quot;
            v-on:input=&quot;$emit('input', $event.target.value)&quot;
        &gt;
    `
})
</code></pre>

<p>ç°åœ¨<code>v-model</code>å°±åº”è¯¥å¯ä»¥åœ¨è¿™ä¸ªç»„ä»¶ä¸Šå®Œç¾åœ°å·¥ä½œèµ·æ¥äº†:<code>&lt;custom-input v-model="searchText"&gt;&lt;/custom-input&gt;</code>ã€‚</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢,å…³äºç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†,å¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹,æˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠ<a href="https://cn.vuejs.org/v2/guide/components-custom-events.html">è‡ªå®šä¹‰äº‹ä»¶</a>è¯»å®Œã€‚</p>
<ul>
<li><strong>é€šè¿‡æ’æ§½åˆ†å‘å†…å®¹</strong></li>
</ul>
<p>å’ŒHTMLå…ƒç´ ä¸€æ ·,æˆ‘ä»¬ç»å¸¸éœ€è¦å‘ä¸€ä¸ªç»„ä»¶ä¼ é€’å†…å®¹,åƒè¿™æ ·:</p>
<pre><code class="html">&lt;alert-box&gt;
    Something bad happened.
&lt;/alert-box&gt;
</code></pre>

<p>å¹¸å¥½,Vueè‡ªå®šä¹‰çš„<code>&lt;slot&gt;</code>å…ƒç´ è®©è¿™å˜å¾—éå¸¸ç®€å•:</p>
<pre><code class="javascript">Vue.component('alert-box', {
    template: `
        &lt;div class=&quot;demo-alert-box&quot;&gt;
            &lt;strong&gt;Error!&lt;/strong&gt;
            &lt;slot&gt;&lt;/slot&gt;
        &lt;/div&gt;
    `
})
</code></pre>

<p>å¦‚ä½ æ‰€è§,æˆ‘ä»¬åªè¦åœ¨éœ€è¦çš„åœ°æ–¹åŠ å…¥æ’æ§½å°±è¡Œäº†â€”â€”å°±è¿™ä¹ˆç®€å•! åˆ°ç›®å‰ä¸ºæ­¢,å…³äºæ’æ§½ä½ éœ€è¦äº†è§£çš„å¤§æ¦‚å°±è¿™äº›äº†,å¦‚æœä½ é˜…è¯»å®Œæœ¬é¡µå†…å®¹å¹¶æŒæ¡äº†å®ƒçš„å†…å®¹,æˆ‘ä»¬ä¼šæ¨èä½ å†å›æ¥æŠŠ<a href="https://cn.vuejs.org/v2/guide/components-slots.html">æ’æ§½</a>è¯»å®Œã€‚</p>
<ul>
<li><strong>åŠ¨æ€ç»„ä»¶</strong></li>
</ul>
<p>æœ‰çš„æ—¶å€™,åœ¨ä¸åŒç»„ä»¶ä¹‹é—´è¿›è¡ŒåŠ¨æ€åˆ‡æ¢æ˜¯éå¸¸æœ‰ç”¨çš„,æ¯”å¦‚åœ¨ä¸€ä¸ªå¤šæ ‡ç­¾çš„ç•Œé¢æ¥å›åˆ‡æ¢,å¯ä»¥é€šè¿‡Vueçš„<code>&lt;component&gt;</code>å…ƒç´ åŠ ä¸€ä¸ªç‰¹æ®Šçš„<code>is</code>ç‰¹æ€§æ¥å®ç°:</p>
<pre><code class="html">&lt;!-- ç»„ä»¶ä¼šåœ¨ `currentTabComponent` æ”¹å˜æ—¶æ”¹å˜ --&gt;
&lt;component v-bind:is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;
</code></pre>

<p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­,<code>currentTabComponent</code>å¯ä»¥åŒ…æ‹¬</p>
<blockquote>
<ol>
<li>å·²æ³¨å†Œç»„ä»¶çš„åå­—,æˆ–</li>
<li>ä¸€ä¸ªç»„ä»¶çš„é€‰é¡¹å¯¹è±¡</li>
</ol>
</blockquote>
<p>ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥é˜…å¹¶ä½“éªŒå®Œæ•´çš„ä»£ç ,æˆ–åœ¨è¿™ä¸ªç‰ˆæœ¬äº†è§£ç»‘å®šç»„ä»¶é€‰é¡¹å¯¹è±¡,è€Œä¸æ˜¯å·²æ³¨å†Œç»„ä»¶åçš„ç¤ºä¾‹ã€‚</p>
<ul>
<li><strong>è§£æDOMæ¨¡æ¿æ—¶çš„æ³¨æ„äº‹é¡¹</strong></li>
</ul>
<p>æœ‰äº›HTMLå…ƒç´ ,è¯¸å¦‚<code>&lt;ul&gt;</code>ã€<code>&lt;ol&gt;</code>ã€<code>&lt;table&gt;</code>å’Œ<code>&lt;select&gt;</code>,å¯¹äºå“ªäº›å…ƒç´ å¯ä»¥å‡ºç°åœ¨å…¶å†…éƒ¨æ˜¯æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚è€Œæœ‰äº›å…ƒç´ ,è¯¸å¦‚<code>&lt;li&gt;</code>ã€<code>&lt;tr&gt;</code>å’Œ<code>&lt;option&gt;</code>,åªèƒ½å‡ºç°åœ¨å…¶å®ƒæŸäº›ç‰¹å®šçš„å…ƒç´ å†…éƒ¨ã€‚</p>
<p>è¿™ä¼šå¯¼è‡´æˆ‘ä»¬ä½¿ç”¨è¿™äº›æœ‰çº¦æŸæ¡ä»¶çš„å…ƒç´ æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;table&gt;
    &lt;blog-post-row&gt;&lt;/blog-post-row&gt;
&lt;/table&gt;
</code></pre>

<p>è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶<code>&lt;blog-post-row\&gt;</code>ä¼šè¢«ä½œä¸ºæ— æ•ˆçš„å†…å®¹æå‡åˆ°å¤–éƒ¨,å¹¶å¯¼è‡´æœ€ç»ˆæ¸²æŸ“ç»“æœå‡ºé”™ã€‚å¹¸å¥½è¿™ä¸ªç‰¹æ®Šçš„<code>is</code>ç‰¹æ€§ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå˜é€šçš„åŠæ³•:</p>
<pre><code class="html">&lt;table&gt;
    &lt;tr is=&quot;blog-post-row&quot;&gt;&lt;/tr&gt;
&lt;/table&gt;
</code></pre>

<p>éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæˆ‘ä»¬ä»ä»¥ä¸‹æ¥æºä½¿ç”¨æ¨¡æ¿çš„è¯,è¿™æ¡é™åˆ¶æ˜¯ä¸å­˜åœ¨çš„:</p>
<blockquote>
<ol>
<li>å­—ç¬¦ä¸²(ä¾‹å¦‚:template: '...')</li>
<li>å•æ–‡ä»¶ç»„ä»¶(.vue)</li>
<li><code>&lt;script type="text/x-template"&gt;</code></li>
</ol>
</blockquote>
<p>åˆ°è¿™é‡Œ,ä½ éœ€è¦äº†è§£çš„è§£æDOMæ¨¡æ¿æ—¶çš„æ³¨æ„äº‹é¡¹â€”â€”å®é™…ä¸Šä¹Ÿæ˜¯Vueçš„å…¨éƒ¨å¿…è¦å†…å®¹,å¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚</p>
<h2 id="_2">äºŒã€æ·±å…¥äº†è§£ç»„ä»¶</h2>
<h3 id="21">2.1 ç»„ä»¶æ³¨å†Œ</h3>
<p>è¯¥é¡µé¢å‡è®¾ä½ å·²ç»é˜…è¯»è¿‡äº†ç»„ä»¶åŸºç¡€ã€‚å¦‚æœä½ è¿˜å¯¹ç»„ä»¶ä¸å¤ªäº†è§£,æ¨èä½ å…ˆé˜…è¯»å®ƒã€‚</p>
<ul>
<li><strong>ç»„ä»¶å</strong></li>
</ul>
<p>åœ¨æ³¨å†Œä¸€ä¸ªç»„ä»¶çš„æ—¶å€™,æˆ‘ä»¬å§‹ç»ˆéœ€è¦ç»™å®ƒä¸€ä¸ªåå­—ã€‚æ¯”å¦‚åœ¨å…¨å±€æ³¨å†Œçš„æ—¶å€™æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†:</p>
<pre><code class="javascript">Vue.component('my-component-name', { /* ... */ })
</code></pre>

<p>è¯¥ç»„ä»¶åå°±æ˜¯<code>Vue.component</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>ä½ ç»™äºˆç»„ä»¶çš„åå­—å¯èƒ½ä¾èµ–äºä½ æ‰“ç®—æ‹¿å®ƒæ¥åšä»€ä¹ˆã€‚å½“ç›´æ¥åœ¨DOMä¸­ä½¿ç”¨ä¸€ä¸ªç»„ä»¶(è€Œä¸æ˜¯åœ¨å­—ç¬¦ä¸²æ¨¡æ¿æˆ–å•æ–‡ä»¶ç»„ä»¶)çš„æ—¶å€™,æˆ‘ä»¬å¼ºçƒˆæ¨èéµå¾ªW3Cè§„èŒƒä¸­çš„è‡ªå®šä¹‰ç»„ä»¶å(å­—æ¯å…¨å°å†™ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªè¿å­—ç¬¦)ã€‚è¿™ä¼šå¸®åŠ©ä½ é¿å…å’Œå½“å‰ä»¥åŠæœªæ¥çš„HTMLå…ƒç´ ç›¸å†²çªã€‚ä½ å¯ä»¥åœ¨é£æ ¼æŒ‡å—ä¸­æŸ¥é˜…åˆ°å…³äºç»„ä»¶åçš„å…¶å®ƒå»ºè®®ã€‚</p>
<blockquote>
<ul>
<li><strong>ç»„ä»¶åå¤§å°å†™</strong></li>
</ul>
</blockquote>
<p>å®šä¹‰ç»„ä»¶åçš„æ–¹å¼æœ‰ä¸¤ç§:</p>
<blockquote>
<ol>
<li>ä½¿ç”¨<code>kebab-case</code></li>
</ol>
</blockquote>
<pre><code class="javascript">Vue.component('my-component-name', { /* ... */ })
</code></pre>

<p>å½“ä½¿ç”¨<code>kebab-case</code>(çŸ­æ¨ªçº¿åˆ†éš”å‘½å)å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶,ä½ ä¹Ÿå¿…é¡»åœ¨å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æ—¶ä½¿ç”¨<code>kebab-case</code>,ä¾‹å¦‚<code>&lt;my-component-name &gt;</code>ã€‚</p>
<blockquote>
<ol>
<li><strong>ä½¿ç”¨<code>PascalCase</code></strong></li>
</ol>
</blockquote>
<pre><code class="javascript">Vue.component('MyComponentName', { /* ... */ })
</code></pre>

<p>å½“ä½¿ç”¨<code>PascalCase</code>(é¦–å­—æ¯å¤§å†™å‘½å)å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶,ä½ åœ¨å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æ—¶ä¸¤ç§å‘½åæ³•éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´<code>&lt;my-component-name &gt;</code>å’Œ<code>&lt;MyComponentName\&gt;</code>éƒ½æ˜¯å¯æ¥å—çš„ã€‚æ³¨æ„,å°½ç®¡å¦‚æ­¤,ç›´æ¥åœ¨DOM(å³éå­—ç¬¦ä¸²çš„æ¨¡æ¿)ä¸­ä½¿ç”¨æ—¶åªæœ‰kebab-caseæ˜¯æœ‰æ•ˆçš„ã€‚</p>
<ul>
<li><strong>å…¨å±€æ³¨å†Œ</strong></li>
</ul>
<p>åˆ°ç›®å‰ä¸ºæ­¢,æˆ‘ä»¬åªç”¨è¿‡<code>Vue.component</code>æ¥åˆ›å»ºç»„ä»¶:</p>
<pre><code class="javascript">Vue.component('my-component-name',{
    // ... é€‰é¡¹ ...
})
</code></pre>

<p>è¿™äº›ç»„ä»¶æ˜¯å…¨å±€æ³¨å†Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åœ¨æ³¨å†Œä¹‹åå¯ä»¥ç”¨åœ¨ä»»ä½•æ–°åˆ›å»ºçš„Vueæ ¹å®ä¾‹(new Vue)çš„æ¨¡æ¿ä¸­ã€‚æ¯”å¦‚:</p>
<pre><code class="javascript">Vue.component('component-a', { /* ... */ })
Vue.component('component-b', { /* ... */ })
Vue.component('component-c', { /* ... */ })

new Vue({ el: '#app' })
&lt;div id=&quot;app&quot;&gt;
    &lt;component-a&gt;&lt;/component-a&gt;
    &lt;component-b&gt;&lt;/component-b&gt;
    &lt;component-c&gt;&lt;/component-c&gt;
&lt;/div&gt;
</code></pre>

<p>åœ¨æ‰€æœ‰å­ç»„ä»¶ä¸­ä¹Ÿæ˜¯å¦‚æ­¤,ä¹Ÿå°±æ˜¯è¯´è¿™ä¸‰ä¸ªç»„ä»¶åœ¨å„è‡ªå†…éƒ¨ä¹Ÿéƒ½å¯ä»¥ç›¸äº’ä½¿ç”¨ã€‚</p>
<ul>
<li><strong>å±€éƒ¨æ³¨å†Œ</strong></li>
</ul>
<p>å…¨å±€æ³¨å†Œå¾€å¾€æ˜¯ä¸å¤Ÿç†æƒ³çš„ã€‚æ¯”å¦‚,å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªåƒwebpackè¿™æ ·çš„æ„å»ºç³»ç»Ÿ,å…¨å±€æ³¨å†Œæ‰€æœ‰çš„ç»„ä»¶æ„å‘³ç€å³ä¾¿ä½ å·²ç»ä¸å†ä½¿ç”¨ä¸€ä¸ªç»„ä»¶äº†,å®ƒä»ç„¶ä¼šè¢«åŒ…å«åœ¨ä½ æœ€ç»ˆçš„æ„å»ºç»“æœä¸­ã€‚è¿™é€ æˆäº†ç”¨æˆ·ä¸‹è½½çš„JavaScriptçš„æ— è°“çš„å¢åŠ ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹,ä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªæ™®é€šçš„JavaScriptå¯¹è±¡æ¥å®šä¹‰ç»„ä»¶:</p>
<pre><code class="javascript">var ComponentA = { /* ... */ }
var ComponentB = { /* ... */ }
var ComponentC = { /* ... */ }
</code></pre>

<p>ç„¶ååœ¨<code>components</code>é€‰é¡¹ä¸­å®šä¹‰ä½ æƒ³è¦ä½¿ç”¨çš„ç»„ä»¶:</p>
<pre><code class="javascript">new Vue({
  el: '#app',
  components: {
    'component-a': ComponentA,
    'component-b': ComponentB
  }
})
</code></pre>

<p>å¯¹äº<code>components</code>å¯¹è±¡ä¸­çš„æ¯ä¸ªå±æ€§æ¥è¯´,å…¶å±æ€§åå°±æ˜¯è‡ªå®šä¹‰å…ƒç´ çš„åå­—,å…¶å±æ€§å€¼å°±æ˜¯è¿™ä¸ªç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ã€‚æ³¨æ„å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶åœ¨å…¶å­ç»„ä»¶ä¸­ä¸å¯ç”¨ã€‚ä¾‹å¦‚,å¦‚æœä½ å¸Œæœ›<code>ComponentA</code>åœ¨<code>ComponentB</code>ä¸­å¯ç”¨,åˆ™ä½ éœ€è¦è¿™æ ·å†™:</p>
<pre><code class="javascript">var ComponentA = { /* ... */ }

var ComponentB = {
  components: {
    'component-a': ComponentA
  },
  // ...
}
</code></pre>

<p>æˆ–è€…å¦‚æœä½ é€šè¿‡Babelå’Œwebpackä½¿ç”¨ES2015æ¨¡å—,é‚£ä¹ˆä»£ç çœ‹èµ·æ¥æ›´åƒ:</p>
<pre><code class="javascript">import ComponentA from './ComponentA.vue'

export default {
  components: {
    ComponentA
  },
  // ...
}
</code></pre>

<p>æ³¨æ„åœ¨ES2015+ä¸­,åœ¨å¯¹è±¡ä¸­æ”¾ä¸€ä¸ªç±»ä¼¼<code>ComponentA</code>çš„å˜é‡åå…¶å®æ˜¯<code>ComponentA: ComponentA</code>çš„ç¼©å†™,å³è¿™ä¸ªå˜é‡ååŒæ—¶æ˜¯:</p>
<blockquote>
<ol>
<li>ç”¨åœ¨æ¨¡æ¿ä¸­çš„è‡ªå®šä¹‰å…ƒç´ çš„åç§°</li>
<li>åŒ…å«äº†è¿™ä¸ªç»„ä»¶é€‰é¡¹çš„å˜é‡å</li>
</ol>
</blockquote>
<ul>
<li><strong>æ¨¡å—ç³»ç»Ÿ</strong></li>
</ul>
<p>å¦‚æœä½ æ²¡æœ‰é€šè¿‡<code>import/require</code>ä½¿ç”¨ä¸€ä¸ªæ¨¡å—ç³»ç»Ÿ,ä¹Ÿè®¸å¯ä»¥æš‚ä¸”è·³è¿‡è¿™ä¸ªç« èŠ‚ã€‚å¦‚æœä½ ä½¿ç”¨äº†,é‚£ä¹ˆæˆ‘ä»¬ä¼šä¸ºä½ æä¾›ä¸€äº›ç‰¹æ®Šçš„ä½¿ç”¨è¯´æ˜å’Œæ³¨æ„äº‹é¡¹ã€‚</p>
<blockquote>
<ul>
<li><strong>åœ¨æ¨¡å—ç³»ç»Ÿä¸­å±€éƒ¨æ³¨å†Œ</strong></li>
</ul>
</blockquote>
<p>å¦‚æœä½ è¿˜åœ¨é˜…è¯»,è¯´æ˜ä½ ä½¿ç”¨äº†è¯¸å¦‚Babelå’Œwebpackçš„æ¨¡å—ç³»ç»Ÿã€‚åœ¨è¿™äº›æƒ…å†µä¸‹,æˆ‘ä»¬æ¨èåˆ›å»ºä¸€ä¸ªcomponentsç›®å½•,å¹¶å°†æ¯ä¸ªç»„ä»¶æ”¾ç½®åœ¨å…¶å„è‡ªçš„æ–‡ä»¶ä¸­ã€‚</p>
<p>ç„¶åä½ éœ€è¦åœ¨å±€éƒ¨æ³¨å†Œä¹‹å‰å¯¼å…¥æ¯ä¸ªä½ æƒ³ä½¿ç”¨çš„ç»„ä»¶ã€‚ä¾‹å¦‚,åœ¨ä¸€ä¸ªå‡è®¾çš„<code>ComponentB.js</code>æˆ–<code>ComponentB.vue</code>æ–‡ä»¶ä¸­:</p>
<pre><code class="javascript">import ComponentA from './ComponentA'
import ComponentC from './ComponentC'

export default {
  components: {
    ComponentA,
    ComponentC
  },
  // ...
}
</code></pre>

<p>ç°åœ¨<code>ComponentA</code>å’Œ<code>ComponentC</code>éƒ½å¯ä»¥åœ¨<code>ComponentB</code>çš„æ¨¡æ¿ä¸­ä½¿ç”¨äº†ã€‚</p>
<blockquote>
<ul>
<li><strong>åŸºç¡€ç»„ä»¶çš„è‡ªåŠ¨åŒ–å…¨å±€æ³¨å†Œ</strong></li>
</ul>
</blockquote>
<p>å¯èƒ½ä½ çš„è®¸å¤šç»„ä»¶åªæ˜¯åŒ…è£¹äº†ä¸€ä¸ªè¾“å…¥æ¡†æˆ–æŒ‰é’®ä¹‹ç±»çš„å…ƒç´ ,æ˜¯ç›¸å¯¹é€šç”¨çš„ã€‚æˆ‘ä»¬æœ‰æ—¶å€™ä¼šæŠŠå®ƒä»¬ç§°ä¸ºåŸºç¡€ç»„ä»¶,å®ƒä»¬ä¼šåœ¨å„ä¸ªç»„ä»¶ä¸­è¢«é¢‘ç¹çš„ç”¨åˆ°ã€‚æ‰€ä»¥ä¼šå¯¼è‡´å¾ˆå¤šç»„ä»¶é‡Œéƒ½ä¼šæœ‰ä¸€ä¸ªåŒ…å«åŸºç¡€ç»„ä»¶çš„é•¿åˆ—è¡¨:</p>
<pre><code class="javascript">import BaseButton from './BaseButton.vue'
import BaseIcon from './BaseIcon.vue'
import BaseInput from './BaseInput.vue'

export default {
  components: {
    BaseButton,
    BaseIcon,
    BaseInput
  }
}
</code></pre>

<p>è€Œåªæ˜¯ç”¨äºæ¨¡æ¿ä¸­çš„ä¸€å°éƒ¨åˆ†:</p>
<pre><code class="javascript">&lt;BaseInput
  v-model=&quot;searchText&quot;
  @keydown.enter=&quot;search&quot;
/&gt;
&lt;BaseButton @click=&quot;search&quot;&gt;
  &lt;BaseIcon name=&quot;search&quot;/&gt;
&lt;/BaseButton&gt;
</code></pre>

<p>å¹¸å¥½å¦‚æœä½ ä½¿ç”¨äº†webpack(æˆ–åœ¨å†…éƒ¨ä½¿ç”¨äº†webpackçš„Vue CLI 3+),é‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨<code>require.contex</code>tåªå…¨å±€æ³¨å†Œè¿™äº›éå¸¸é€šç”¨çš„åŸºç¡€ç»„ä»¶ã€‚è¿™é‡Œæœ‰ä¸€ä»½å¯ä»¥è®©ä½ åœ¨åº”ç”¨å…¥å£æ–‡ä»¶(æ¯”å¦‚<code>src/main.js</code>)ä¸­å…¨å±€å¯¼å…¥åŸºç¡€ç»„ä»¶çš„ç¤ºä¾‹ä»£ç :</p>
<pre><code class="javascript">import Vue from 'vue'
import upperFirst from 'lodash/upperFirst'
import camelCase from 'lodash/camelCase'

const requireComponent = require.context(
  // å…¶ç»„ä»¶ç›®å½•çš„ç›¸å¯¹è·¯å¾„
  './components',
  // æ˜¯å¦æŸ¥è¯¢å…¶å­ç›®å½•
  false,
  // åŒ¹é…åŸºç¡€ç»„ä»¶æ–‡ä»¶åçš„æ­£åˆ™è¡¨è¾¾å¼
  /Base[A-Z]\w+\.(vue|js)$/
)

requireComponent.keys().forEach(fileName =&gt; {
  // è·å–ç»„ä»¶é…ç½®
  const componentConfig = requireComponent(fileName)

  // è·å–ç»„ä»¶çš„ PascalCase å‘½å
  const componentName = upperFirst(
    camelCase(
      // è·å–å’Œç›®å½•æ·±åº¦æ— å…³çš„æ–‡ä»¶å
      fileName
        .split('/')
        .pop()
        .replace(/\.\w+$/, '')
    )
  )

  // å…¨å±€æ³¨å†Œç»„ä»¶
  Vue.component(
    componentName,
    // å¦‚æœè¿™ä¸ªç»„ä»¶é€‰é¡¹æ˜¯é€šè¿‡ `export default` å¯¼å‡ºçš„,
    // é‚£ä¹ˆå°±ä¼šä¼˜å…ˆä½¿ç”¨ `.default`,
    // å¦åˆ™å›é€€åˆ°ä½¿ç”¨æ¨¡å—çš„æ ¹ã€‚
    componentConfig.default || componentConfig
  )
})
</code></pre>

<p>è®°ä½å…¨å±€æ³¨å†Œçš„è¡Œä¸ºå¿…é¡»åœ¨æ ¹Vueå®ä¾‹(é€šè¿‡<code>new Vue</code>)åˆ›å»ºä¹‹å‰å‘ç”Ÿã€‚<a href="https://github.com/chrisvfritz/vue-enterprise-boilerplate/blob/master/src/components/_globals.js">è¿™é‡Œ</a>æœ‰ä¸€ä¸ªçœŸå®é¡¹ç›®æƒ…æ™¯ä¸‹çš„ç¤ºä¾‹ã€‚</p>
<h3 id="22-prop">2.2 <code>Prop</code></h3>
<ul>
<li><strong><code>Prop</code>çš„å¤§å°å†™(<code>camelCase</code> vs <code>kebab-case</code>)</strong></li>
</ul>
<p>HTMLä¸­çš„ç‰¹æ€§åæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„,æ‰€ä»¥æµè§ˆå™¨ä¼šæŠŠæ‰€æœ‰å¤§å†™å­—ç¬¦è§£é‡Šä¸ºå°å†™å­—ç¬¦ã€‚è¿™æ„å‘³ç€å½“ä½ ä½¿ç”¨DOMä¸­çš„æ¨¡æ¿æ—¶,<code>camelCase</code>(é©¼å³°å‘½åæ³•)çš„<code>prop</code>åéœ€è¦ä½¿ç”¨å…¶ç­‰ä»·çš„<code>kebab-case</code>(çŸ­æ¨ªçº¿åˆ†éš”å‘½å)å‘½å:</p>
<pre><code class="javascript">Vue.component('blog-post', {
  // åœ¨ JavaScript ä¸­æ˜¯ camelCase çš„
  props: ['postTitle'],
  template: '&lt;h3&gt;{{ postTitle }}&lt;/h3&gt;'
})
&lt;!-- åœ¨ HTML ä¸­æ˜¯ kebab-case çš„ --&gt;
&lt;blog-post post-title=&quot;hello!&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<p>é‡ç”³ä¸€æ¬¡,å¦‚æœä½ ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿,é‚£ä¹ˆè¿™ä¸ªé™åˆ¶å°±ä¸å­˜åœ¨äº†ã€‚</p>
<ul>
<li><strong><code>Prop</code>ç±»å‹</strong></li>
</ul>
<p>åˆ°è¿™é‡Œ,æˆ‘ä»¬åªçœ‹åˆ°äº†ä»¥å­—ç¬¦ä¸²æ•°ç»„å½¢å¼åˆ—å‡ºçš„prop:</p>
<pre><code class="javascript">props: ['title', 'likes', 'isPublished', 'commentIds', 'author']
</code></pre>

<p>ä½†æ˜¯,é€šå¸¸ä½ å¸Œæœ›æ¯ä¸ª<code>prop</code>éƒ½æœ‰æŒ‡å®šçš„å€¼ç±»å‹ã€‚è¿™æ—¶,ä½ å¯ä»¥ä»¥å¯¹è±¡å½¢å¼åˆ—å‡º<code>prop</code>,è¿™äº›å±æ€§çš„åç§°å’Œå€¼åˆ†åˆ«æ˜¯<code>prop</code>å„è‡ªçš„åç§°å’Œç±»å‹:</p>
<pre><code class="javascript">props: {
  title: String,
  likes: Number,
  isPublished: Boolean,
  commentIds: Array,
  author: Object,
  callback: Function,
  contactsPromise: Promise // or any other constructor
}
</code></pre>

<p>è¿™ä¸ä»…ä¸ºä½ çš„ç»„ä»¶æä¾›äº†æ–‡æ¡£,è¿˜ä¼šåœ¨å®ƒä»¬é‡åˆ°é”™è¯¯çš„ç±»å‹æ—¶ä»æµè§ˆå™¨çš„JavaScriptæ§åˆ¶å°æç¤ºç”¨æˆ·ã€‚ä½ ä¼šåœ¨è¿™ä¸ªé¡µé¢æ¥ä¸‹æ¥çš„éƒ¨åˆ†çœ‹åˆ°ç±»å‹<a href="https://cn.vuejs.org/v2/guide/components-props.html#Prop-%E9%AA%8C%E8%AF%81">æ£€æŸ¥å’Œå…¶å®ƒpropéªŒè¯</a>ã€‚</p>
<ul>
<li><strong>ä¼ é€’é™æ€æˆ–åŠ¨æ€<code>Prop</code></strong></li>
</ul>
<p>åƒè¿™æ ·,ä½ å·²ç»çŸ¥é“äº†å¯ä»¥åƒè¿™æ ·ç»™<code>prop</code>ä¼ å…¥ä¸€ä¸ªé™æ€çš„å€¼:</p>
<pre><code class="javascript">&lt;blog-post title=&quot;My journey with Vue&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<p>ä½ ä¹ŸçŸ¥é“<code>prop</code>å¯ä»¥é€šè¿‡<code>v-bind</code>åŠ¨æ€èµ‹å€¼,ä¾‹å¦‚:</p>
<pre><code class="javascript">&lt;!-- åŠ¨æ€èµ‹äºˆä¸€ä¸ªå˜é‡çš„å€¼ --&gt;
&lt;blog-post v-bind:title=&quot;post.title&quot;&gt;&lt;/blog-post&gt;

&lt;!-- åŠ¨æ€èµ‹äºˆä¸€ä¸ªå¤æ‚è¡¨è¾¾å¼çš„å€¼ --&gt;
&lt;blog-post
  v-bind:title=&quot;post.title + ' by ' + post.author.name&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<p>åœ¨ä¸Šè¿°ä¸¤ä¸ªç¤ºä¾‹ä¸­,æˆ‘ä»¬ä¼ å…¥çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„,ä½†å®é™…ä¸Šä»»ä½•ç±»å‹çš„å€¼éƒ½å¯ä»¥ä¼ ç»™ä¸€ä¸ªpropã€‚</p>
<blockquote>
<ul>
<li><strong>ä¼ å…¥ä¸€ä¸ªæ•°å­—</strong></li>
</ul>
</blockquote>
<pre><code class="javascript">&lt;!-- å³ä¾¿42æ˜¯é™æ€çš„,æˆ‘ä»¬ä»ç„¶éœ€è¦v-bindæ¥å‘Šè¯‰Vue --&gt;
&lt;!-- è¿™æ˜¯ä¸€ä¸ªJavaScriptè¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚--&gt;
&lt;blog-post v-bind:likes=&quot;42&quot;&gt;&lt;/blog-post&gt;

&lt;!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚--&gt;
&lt;blog-post v-bind:likes=&quot;post.likes&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>ä¼ å…¥ä¸€ä¸ªå¸ƒå°”å€¼</strong></li>
</ul>
</blockquote>
<pre><code class="javascript">&lt;!-- åŒ…å«è¯¥prop æ²¡æœ‰å€¼çš„æƒ…å†µåœ¨å†…,éƒ½æ„å‘³ç€trueã€‚--&gt;
&lt;blog-post is-published&gt;&lt;/blog-post&gt;

&lt;!-- å³ä¾¿falseæ˜¯é™æ€çš„,æˆ‘ä»¬ä»ç„¶éœ€è¦v-bindæ¥å‘Šè¯‰Vue --&gt;
&lt;!-- è¿™æ˜¯ä¸€ä¸ªJavaScriptè¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚--&gt;
&lt;blog-post v-bind:is-published=&quot;false&quot;&gt;&lt;/blog-post&gt;

&lt;!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚--&gt;
&lt;blog-post v-bind:is-published=&quot;post.isPublished&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>ä¼ å…¥ä¸€ä¸ªæ•°ç»„</strong></li>
</ul>
</blockquote>
<pre><code class="javascript">&lt;!-- å³ä¾¿æ•°ç»„æ˜¯é™æ€çš„,æˆ‘ä»¬ä»ç„¶éœ€è¦v-bindæ¥å‘Šè¯‰Vue --&gt;
&lt;!-- è¿™æ˜¯ä¸€ä¸ªJavaScriptè¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚--&gt;
&lt;blog-post v-bind:comment-ids=&quot;[234, 266, 273]&quot;&gt;&lt;/blog-post&gt;

&lt;!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚--&gt;
&lt;blog-post v-bind:comment-ids=&quot;post.commentIds&quot;&gt;&lt;/blog-post&gt;
ä¼ å…¥ä¸€ä¸ªå¯¹è±¡
&lt;!-- å³ä¾¿å¯¹è±¡æ˜¯é™æ€çš„,æˆ‘ä»¬ä»ç„¶éœ€è¦v-bindæ¥å‘Šè¯‰ Vue --&gt;
&lt;!-- è¿™æ˜¯ä¸€ä¸ªJavaScriptè¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚--&gt;
&lt;blog-post
  v-bind:author=&quot;{
    name: 'Veronica',
    company: 'Veridian Dynamics'
  }&quot;
&gt;&lt;/blog-post&gt;

&lt;!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚--&gt;
&lt;blog-post v-bind:author=&quot;post.author&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§</strong></li>
</ul>
</blockquote>
<p>å¦‚æœä½ æƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½ä½œä¸ºpropä¼ å…¥,ä½ å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„<code>v-bind</code>(å–ä»£<code>v-bind:prop-name</code>)ã€‚ä¾‹å¦‚,å¯¹äºä¸€ä¸ªç»™å®šçš„å¯¹è±¡<code>post</code>:</p>
<pre><code class="javascript">post: {
  id: 1,
  title: 'My Journey with Vue'
}
</code></pre>

<p>ä¸‹é¢çš„æ¨¡æ¿:</p>
<pre><code class="javascript">&lt;blog-post v-bind=&quot;post&quot;&gt;&lt;/blog-post&gt;
</code></pre>

<p>ç­‰ä»·äº:</p>
<pre><code class="javascript">&lt;blog-post
  v-bind:id=&quot;post.id&quot;
  v-bind:title=&quot;post.title&quot;
&gt;&lt;/blog-post&gt;
</code></pre>

<ul>
<li><strong>å•å‘æ•°æ®æµ</strong></li>
</ul>
<p>æ‰€æœ‰çš„<code>prop</code>éƒ½ä½¿å¾—å…¶çˆ¶å­propä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®š:çˆ¶çº§<code>prop</code>çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­,ä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–æ”¹å˜çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€,ä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£ã€‚</p>
<p>é¢å¤–çš„,æ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶,å­ç»„ä»¶ä¸­æ‰€æœ‰çš„propéƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚è¿™æ„å‘³ç€ä½ ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜<code>prop</code>ã€‚å¦‚æœä½ è¿™æ ·åšäº†,Vueä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚</p>
<p>è¿™é‡Œæœ‰ä¸¤ç§å¸¸è§çš„è¯•å›¾æ”¹å˜ä¸€ä¸ª<code>prop</code>çš„æƒ…å½¢:</p>
<blockquote>
<ol>
<li>è¿™ä¸ª<code>prop</code>ç”¨æ¥ä¼ é€’ä¸€ä¸ªåˆå§‹å€¼;è¿™ä¸ªå­ç»„ä»¶æ¥ä¸‹æ¥å¸Œæœ›å°†å…¶ä½œä¸ºä¸€ä¸ªæœ¬åœ°çš„<code>prop</code>æ•°æ®æ¥ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,æœ€å¥½å®šä¹‰ä¸€ä¸ªæœ¬åœ°çš„dataå±æ€§å¹¶å°†è¿™ä¸ªpropç”¨ä½œå…¶åˆå§‹å€¼:</li>
</ol>
</blockquote>
<pre><code class="javascript">props: ['initialCounter'],
data: function () {
  return {
    counter: this.initialCounter
  }
}
</code></pre>

<blockquote>
<ol>
<li>è¿™ä¸ª<code>prop</code>ä»¥ä¸€ç§åŸå§‹çš„å€¼ä¼ å…¥ä¸”éœ€è¦è¿›è¡Œè½¬æ¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,æœ€å¥½ä½¿ç”¨è¿™ä¸ª<code>prop</code>çš„å€¼æ¥å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§:</li>
</ol>
</blockquote>
<pre><code class="javascript">props: ['size'],
computed: {
  normalizedSize: function () {
    return this.size.trim().toLowerCase()
  }
}
</code></pre>

<p>æ³¨æ„åœ¨JavaScriptä¸­å¯¹è±¡å’Œæ•°ç»„æ˜¯é€šè¿‡å¼•ç”¨ä¼ å…¥çš„,æ‰€ä»¥å¯¹äºä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ç±»å‹çš„<code>prop</code>æ¥è¯´,åœ¨å­ç»„ä»¶ä¸­æ”¹å˜è¿™ä¸ªå¯¹è±¡æˆ–æ•°ç»„æœ¬èº«å°†ä¼šå½±å“åˆ°çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚</p>
<ul>
<li><strong>PropéªŒè¯</strong></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä¸ºç»„ä»¶çš„<code>prop</code>æŒ‡å®šéªŒè¯è¦æ±‚,ä¾‹å¦‚ä½ çŸ¥é“çš„è¿™äº›ç±»å‹ã€‚å¦‚æœæœ‰ä¸€ä¸ªéœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³,åˆ™Vueä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è­¦å‘Šä½ ã€‚è¿™åœ¨å¼€å‘ä¸€ä¸ªä¼šè¢«åˆ«äººç”¨åˆ°çš„ç»„ä»¶æ—¶å°¤å…¶æœ‰å¸®åŠ©ã€‚</p>
<p>ä¸ºäº†å®šåˆ¶<code>prop</code>çš„éªŒè¯æ–¹å¼,ä½ å¯ä»¥ä¸º<code>props</code>ä¸­çš„å€¼æä¾›ä¸€ä¸ªå¸¦æœ‰éªŒè¯éœ€æ±‚çš„å¯¹è±¡,è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">Vue.component('my-component', {
  props: {
    // åŸºç¡€çš„ç±»å‹æ£€æŸ¥ (`null` å’Œ `undefined` ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯)
    propA: Number,
    // å¤šä¸ªå¯èƒ½çš„ç±»å‹
    propB: [String, Number],
    // å¿…å¡«çš„å­—ç¬¦ä¸²
    propC: {
      type: String,
      required: true
    },
    // å¸¦æœ‰é»˜è®¤å€¼çš„æ•°å­—
    propD: {
      type: Number,
      default: 100
    },
    // å¸¦æœ‰é»˜è®¤å€¼çš„å¯¹è±¡
    propE: {
      type: Object,
      // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–
      default: function () {
        return { message: 'hello' }
      }
    },
    // è‡ªå®šä¹‰éªŒè¯å‡½æ•°
    propF: {
      validator: function (value) {
        // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª
        return ['success', 'warning', 'danger'].indexOf(value) !== -1
      }
    }
  }
})
</code></pre>

<p>å½“<code>prop</code>éªŒè¯å¤±è´¥çš„æ—¶å€™,(å¼€å‘ç¯å¢ƒæ„å»ºç‰ˆæœ¬çš„)Vueå°†ä¼šäº§ç”Ÿä¸€ä¸ªæ§åˆ¶å°çš„è­¦å‘Šã€‚</p>
<p>æ³¨æ„é‚£äº›propä¼šåœ¨ä¸€ä¸ªç»„ä»¶å®ä¾‹åˆ›å»ºä¹‹å‰è¿›è¡ŒéªŒè¯,æ‰€ä»¥å®ä¾‹çš„å±æ€§(å¦‚<code>data</code>ã€<code>computed</code>ç­‰)åœ¨<code>default</code>æˆ–<code>validator</code>å‡½æ•°ä¸­æ˜¯ä¸å¯ç”¨çš„ã€‚</p>
<blockquote>
<ul>
<li><strong>ç±»å‹æ£€æŸ¥</strong></li>
</ul>
</blockquote>
<p>typeå¯ä»¥æ˜¯ä¸‹åˆ—åŸç”Ÿæ„é€ å‡½æ•°ä¸­çš„ä¸€ä¸ª:<code>String</code>,<code>Number</code>,<code>Boolean</code>,<code>Array</code>,<code>Object</code>,<code>Date</code>,<code>Function</code>å’Œ<code>Symbol</code>ã€‚</p>
<p>é¢å¤–çš„,<code>type</code>è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ„é€ å‡½æ•°,å¹¶ä¸”é€šè¿‡<code>instanceof</code>æ¥è¿›è¡Œæ£€æŸ¥ç¡®è®¤ã€‚ä¾‹å¦‚,ç»™å®šä¸‹åˆ—ç°æˆçš„æ„é€ å‡½æ•°:</p>
<pre><code class="javascript">function Person (firstName, lastName) {
  this.firstName = firstName
  this.lastName = lastName
}
</code></pre>

<p>ä½ å¯ä»¥ä½¿ç”¨:</p>
<pre><code class="javascript">Vue.component('blog-post', {
  props: {
    author: Person
  }
})
</code></pre>

<p>æ¥éªŒè¯<code>author prop</code>çš„å€¼æ˜¯å¦æ˜¯é€šè¿‡<code>new Person</code>åˆ›å»ºçš„ã€‚</p>
<ul>
<li><strong>éPropçš„ç‰¹æ€§</strong></li>
</ul>
<p>ä¸€ä¸ªé<code>prop</code>ç‰¹æ€§æ˜¯æŒ‡ä¼ å‘ä¸€ä¸ªç»„ä»¶,ä½†æ˜¯è¯¥ç»„ä»¶å¹¶æ²¡æœ‰ç›¸åº”propå®šä¹‰çš„ç‰¹æ€§ã€‚</p>
<p>å› ä¸ºæ˜¾å¼å®šä¹‰çš„<code>prop</code>é€‚ç”¨äºå‘ä¸€ä¸ªå­ç»„ä»¶ä¼ å…¥ä¿¡æ¯,ç„¶è€Œç»„ä»¶åº“çš„ä½œè€…å¹¶ä¸æ€»èƒ½é¢„è§ç»„ä»¶ä¼šè¢«ç”¨äºæ€æ ·çš„åœºæ™¯ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç»„ä»¶å¯ä»¥æ¥å—ä»»æ„çš„ç‰¹æ€§,è€Œè¿™äº›ç‰¹æ€§ä¼šè¢«æ·»åŠ åˆ°è¿™ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šã€‚</p>
<p>ä¾‹å¦‚,æƒ³è±¡ä¸€ä¸‹ä½ é€šè¿‡ä¸€ä¸ª<code>Bootstrap</code>æ’ä»¶ä½¿ç”¨äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„<code>&lt;bootstrap-date-input &gt;</code>ç»„ä»¶,è¿™ä¸ªæ’ä»¶éœ€è¦åœ¨å…¶<code>&lt;input\&gt;</code>ä¸Šç”¨åˆ°ä¸€ä¸ª<code>data-date-picker</code>ç‰¹æ€§ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªç‰¹æ€§æ·»åŠ åˆ°ä½ çš„ç»„ä»¶å®ä¾‹ä¸Š:</p>
<pre><code class="javascript">&lt;bootstrap-date-input data-date-picker=&quot;activated&quot;&gt;&lt;/bootstrap-date-input&gt;
</code></pre>

<p>ç„¶åè¿™ä¸ª<code>data-date-picker="activated"</code>ç‰¹æ€§å°±ä¼šè‡ªåŠ¨æ·»åŠ åˆ°<code>&lt;bootstrap-date-input &gt;</code>çš„æ ¹å…ƒç´ ä¸Šã€‚</p>
<blockquote>
<ul>
<li><strong>æ›¿æ¢/åˆå¹¶å·²æœ‰çš„ç‰¹æ€§</strong></li>
</ul>
</blockquote>
<p>æƒ³è±¡ä¸€ä¸‹<code>&lt;bootstrap-date-input &gt;</code>çš„æ¨¡æ¿æ˜¯è¿™æ ·çš„:</p>
<pre><code class="javascript">&lt;input type=&quot;date&quot; class=&quot;form-control&quot;&gt;
</code></pre>

<p>ä¸ºäº†ç»™æˆ‘ä»¬çš„æ—¥æœŸé€‰æ‹©å™¨æ’ä»¶å®šåˆ¶ä¸€ä¸ªä¸»é¢˜,æˆ‘ä»¬å¯èƒ½éœ€è¦åƒè¿™æ ·æ·»åŠ ä¸€ä¸ªç‰¹åˆ«çš„ç±»å:</p>
<pre><code class="javascript">&lt;bootstrap-date-input
  data-date-picker=&quot;activated&quot;
  class=&quot;date-picker-theme-dark&quot;
&gt;&lt;/bootstrap-date-input&gt;
</code></pre>

<p>åœ¨è¿™ç§æƒ…å†µä¸‹,æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªä¸åŒçš„<code>class</code>çš„å€¼:</p>
<blockquote>
<ol>
<li><code>form-control</code>,è¿™æ˜¯åœ¨ç»„ä»¶çš„æ¨¡æ¿å†…è®¾ç½®å¥½çš„</li>
<li><code>date-picker-theme-dark</code>,è¿™æ˜¯ä»ç»„ä»¶çš„çˆ¶çº§ä¼ å…¥çš„</li>
</ol>
</blockquote>
<p>å¯¹äºç»å¤§å¤šæ•°ç‰¹æ€§æ¥è¯´,ä»å¤–éƒ¨æä¾›ç»™ç»„ä»¶çš„å€¼ä¼šæ›¿æ¢æ‰ç»„ä»¶å†…éƒ¨è®¾ç½®å¥½çš„å€¼ã€‚æ‰€ä»¥å¦‚æœä¼ å…¥<code>type="text"</code>å°±ä¼šæ›¿æ¢æ‰<code>type="date"</code>å¹¶æŠŠå®ƒç ´åï¼åº†å¹¸çš„æ˜¯,<code>class</code>å’Œ<code>style</code>ç‰¹æ€§ä¼šç¨å¾®æ™ºèƒ½ä¸€äº›,å³ä¸¤è¾¹çš„å€¼ä¼šè¢«åˆå¹¶èµ·æ¥,ä»è€Œå¾—åˆ°æœ€ç»ˆçš„å€¼:<code>form-control</code>,<code>date-picker-theme-dark</code>ã€‚</p>
<blockquote>
<ul>
<li><strong>ç¦ç”¨ç‰¹æ€§ç»§æ‰¿</strong></li>
</ul>
</blockquote>
<p>å¦‚æœä½ ä¸å¸Œæœ›ç»„ä»¶çš„æ ¹å…ƒç´ ç»§æ‰¿ç‰¹æ€§,ä½ å¯ä»¥åœ¨ç»„ä»¶çš„é€‰é¡¹ä¸­è®¾ç½®<code>inheritAttrs: false</code>ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">Vue.component('my-component', {
  inheritAttrs: false,
  // ...
})
</code></pre>

<p>è¿™å°¤å…¶é€‚åˆé…åˆå®ä¾‹çš„<code>$attrs</code>å±æ€§ä½¿ç”¨,è¯¥å±æ€§åŒ…å«äº†ä¼ é€’ç»™ä¸€ä¸ªç»„ä»¶çš„ç‰¹æ€§åå’Œç‰¹æ€§å€¼,ä¾‹å¦‚:</p>
<pre><code class="javascript">{
  required: true,
  placeholder: 'Enter your username'
}
</code></pre>

<p>æœ‰äº†<code>inheritAttrs: false</code>å’Œ<code>$attrs</code>,ä½ å°±å¯ä»¥æ‰‹åŠ¨å†³å®šè¿™äº›ç‰¹æ€§ä¼šè¢«èµ‹äºˆå“ªä¸ªå…ƒç´ ã€‚åœ¨æ’°å†™åŸºç¡€ç»„ä»¶çš„æ—¶å€™æ˜¯å¸¸ä¼šç”¨åˆ°çš„:</p>
<pre><code class="javascript">Vue.component('base-input', {
  inheritAttrs: false,
  props: ['label', 'value'],
  template: `
    &lt;label&gt;
      {{ label }}
      &lt;input
        v-bind=&quot;$attrs&quot;
        v-bind:value=&quot;value&quot;
        v-on:input=&quot;$emit('input', $event.target.value)&quot;
      &gt;
    &lt;/label&gt;
  `
})
</code></pre>

<p>æ³¨æ„<code>inheritAttrs: false</code>é€‰é¡¹ä¸ä¼šå½±å“<code>style</code>å’Œ<code>class</code>çš„ç»‘å®šã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼å…è®¸ä½ åœ¨ä½¿ç”¨åŸºç¡€ç»„ä»¶çš„æ—¶å€™æ›´åƒæ˜¯ä½¿ç”¨åŸå§‹çš„HTMLå…ƒç´ ,è€Œä¸ä¼šæ‹…å¿ƒå“ªä¸ªå…ƒç´ æ˜¯çœŸæ­£çš„æ ¹å…ƒç´ :</p>
<pre><code class="javascript">&lt;base-input
  v-model=&quot;username&quot;
  required
  placeholder=&quot;Enter your username&quot;
&gt;&lt;/base-input&gt;
</code></pre>

<h3 id="23">2.3 è‡ªå®šä¹‰äº‹ä»¶</h3>
<ul>
<li><strong>äº‹ä»¶å</strong></li>
</ul>
<p>ä¸åŒäºç»„ä»¶å’Œ<code>prop</code>,äº‹ä»¶åä¸å­˜åœ¨ä»»ä½•è‡ªåŠ¨åŒ–çš„å¤§å°å†™è½¬æ¢ã€‚è€Œæ˜¯è§¦å‘çš„äº‹ä»¶åéœ€è¦å®Œå…¨åŒ¹é…ç›‘å¬è¿™ä¸ªäº‹ä»¶æ‰€ç”¨çš„åç§°ã€‚ä¸¾ä¸ªä¾‹å­,å¦‚æœè§¦å‘ä¸€ä¸ª<code>camelCase</code>åå­—çš„äº‹ä»¶:</p>
<pre><code class="javascript">this.$emit('myEvent')
</code></pre>

<p>åˆ™ç›‘å¬è¿™ä¸ªåå­—çš„<code>kebab-case</code>ç‰ˆæœ¬æ˜¯ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœçš„:</p>
<pre><code class="javascript">&lt;!-- æ²¡æœ‰æ•ˆæœ --&gt;
&lt;my-component v-on:my-event=&quot;doSomething&quot;&gt;&lt;/my-component&gt;
</code></pre>

<p>ä¸åŒäºç»„ä»¶å’Œ<code>prop</code>,äº‹ä»¶åä¸ä¼šè¢«ç”¨ä½œä¸€ä¸ªJavaScriptå˜é‡åæˆ–å±æ€§å,æ‰€ä»¥å°±æ²¡æœ‰ç†ç”±ä½¿ç”¨<code>camelCase</code>æˆ–<code>PascalCase</code>äº†ã€‚å¹¶ä¸”<code>v-on</code>äº‹ä»¶ç›‘å¬å™¨åœ¨DOMæ¨¡æ¿ä¸­ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå…¨å°å†™(å› ä¸ºHTMLæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„),æ‰€ä»¥<code>v-on:myEvent</code>å°†ä¼šå˜æˆ<code>v-on:myevent</code>â€”â€”å¯¼è‡´myEventä¸å¯èƒ½è¢«ç›‘å¬åˆ°ã€‚</p>
<p>å› æ­¤,æˆ‘ä»¬æ¨èä½ å§‹ç»ˆä½¿ç”¨<code>kebab-case</code>çš„äº‹ä»¶åã€‚</p>
<ul>
<li><strong>è‡ªå®šä¹‰ç»„ä»¶çš„v-model</strong></li>
</ul>
<p>ä¸€ä¸ªç»„ä»¶ä¸Šçš„<code>v-model</code>é»˜è®¤ä¼šåˆ©ç”¨åä¸º<code>value</code>çš„<code>prop</code>å’Œåä¸º<code>input</code>çš„äº‹ä»¶,ä½†æ˜¯åƒå•é€‰æ¡†ã€å¤é€‰æ¡†ç­‰ç±»å‹çš„è¾“å…¥æ§ä»¶å¯èƒ½ä¼šå°†<code>value</code>ç‰¹æ€§ç”¨äºä¸åŒçš„ç›®çš„ã€‚modelé€‰é¡¹å¯ä»¥ç”¨æ¥é¿å…è¿™æ ·çš„å†²çª:</p>
<pre><code class="javascript">Vue.component('base-checkbox', {
  model: {
    prop: 'checked',
    event: 'change'
  },
  props: {
    checked: Boolean
  },
  template: `
    &lt;input
      type=&quot;checkbox&quot;
      v-bind:checked=&quot;checked&quot;
      v-on:change=&quot;$emit('change', $event.target.checked)&quot;
    &gt;
  `
})
</code></pre>

<p>ç°åœ¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šä½¿ç”¨<code>v-model</code>çš„æ—¶å€™:</p>
<pre><code class="javascript">&lt;base-checkbox v-model=&quot;lovingVue&quot;&gt;&lt;/base-checkbox&gt;
</code></pre>

<p>è¿™é‡Œçš„<code>lovingVue</code>çš„å€¼å°†ä¼šä¼ å…¥è¿™ä¸ªåä¸º<code>checked</code>çš„<code>prop</code>ã€‚åŒæ—¶å½“<code>&lt;base-checkbox &gt;</code>è§¦å‘ä¸€ä¸ª<code>change</code>äº‹ä»¶å¹¶é™„å¸¦ä¸€ä¸ªæ–°çš„å€¼çš„æ—¶å€™,è¿™ä¸ª<code>lovingVue</code>çš„å±æ€§å°†ä¼šè¢«æ›´æ–°ã€‚</p>
<p>æ³¨æ„ä½ ä»ç„¶éœ€è¦åœ¨ç»„ä»¶çš„propsé€‰é¡¹é‡Œå£°æ˜<code>checked</code>è¿™ä¸ª<code>prop</code>ã€‚</p>
<ul>
<li><strong>å°†åŸç”Ÿäº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶</strong></li>
</ul>
<p>ä½ å¯èƒ½æœ‰å¾ˆå¤šæ¬¡æƒ³è¦åœ¨ä¸€ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šç›´æ¥ç›‘å¬ä¸€ä¸ªåŸç”Ÿäº‹ä»¶ã€‚è¿™æ—¶,ä½ å¯ä»¥ä½¿ç”¨<code>v-on</code>çš„<code>.native</code>ä¿®é¥°ç¬¦:</p>
<pre><code class="javascript">&lt;base-input v-on:focus.native=&quot;onFocus&quot;&gt;&lt;/base-input&gt;
</code></pre>

<p>åœ¨æœ‰çš„æ—¶å€™è¿™æ˜¯å¾ˆæœ‰ç”¨çš„,ä¸è¿‡åœ¨ä½ å°è¯•ç›‘å¬ä¸€ä¸ªç±»ä¼¼<code>&lt;input\&gt;</code>çš„éå¸¸ç‰¹å®šçš„å…ƒç´ æ—¶,è¿™å¹¶ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚æ¯”å¦‚ä¸Šè¿°<code>&lt;base-input &gt;</code>ç»„ä»¶å¯èƒ½åšäº†å¦‚ä¸‹é‡æ„,æ‰€ä»¥æ ¹å…ƒç´ å®é™…ä¸Šæ˜¯ä¸€ä¸ª<code>&lt;label\&gt;</code>å…ƒç´ :</p>
<pre><code class="javascript">&lt;label&gt;
  {{ label }}
  &lt;input
    v-bind=&quot;$attrs&quot;
    v-bind:value=&quot;value&quot;
    v-on:input=&quot;$emit('input', $event.target.value)&quot;
  &gt;
&lt;/label&gt;
</code></pre>

<p>è¿™æ—¶,çˆ¶çº§çš„<code>.native</code>ç›‘å¬å™¨å°†é™é»˜å¤±è´¥ã€‚å®ƒä¸ä¼šäº§ç”Ÿä»»ä½•æŠ¥é”™,ä½†æ˜¯<code>onFocus</code>å¤„ç†å‡½æ•°ä¸ä¼šå¦‚ä½ é¢„æœŸåœ°è¢«è°ƒç”¨ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,Vueæä¾›äº†ä¸€ä¸ª<code>$listeners</code>å±æ€§,å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡,é‡Œé¢åŒ…å«äº†ä½œç”¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šçš„æ‰€æœ‰ç›‘å¬å™¨ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">{
  focus: function (event) { /* ... */ }
  input: function (value) { /* ... */ },
}
</code></pre>

<p>æœ‰äº†è¿™ä¸ª<code>$listeners</code>å±æ€§,ä½ å°±å¯ä»¥é…åˆ<code>v-on="$listeners"</code>å°†æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨æŒ‡å‘è¿™ä¸ªç»„ä»¶çš„æŸä¸ªç‰¹å®šçš„å­å…ƒç´ ã€‚å¯¹äºç±»ä¼¼<code>&lt;input\&gt;</code>çš„ä½ å¸Œæœ›å®ƒä¹Ÿå¯ä»¥é…åˆ<code>v-model</code>å·¥ä½œçš„ç»„ä»¶æ¥è¯´,ä¸ºè¿™äº›ç›‘å¬å™¨åˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¸‹è¿°<code>inputListeners</code>çš„è®¡ç®—å±æ€§é€šå¸¸æ˜¯éå¸¸æœ‰ç”¨çš„:</p>
<pre><code class="javascript">Vue.component('base-input', {
  inheritAttrs: false,
  props: ['label', 'value'],
  computed: {
    inputListeners: function () {
      var vm = this
      // `Object.assign` å°†æ‰€æœ‰çš„å¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªæ–°å¯¹è±¡
      return Object.assign({},
        // æˆ‘ä»¬ä»çˆ¶çº§æ·»åŠ æ‰€æœ‰çš„ç›‘å¬å™¨
        this.$listeners,
        // ç„¶åæˆ‘ä»¬æ·»åŠ è‡ªå®šä¹‰ç›‘å¬å™¨,
        // æˆ–è¦†å†™ä¸€äº›ç›‘å¬å™¨çš„è¡Œä¸º
        {
          // è¿™é‡Œç¡®ä¿ç»„ä»¶é…åˆ `v-model` çš„å·¥ä½œ
          input: function (event) {
            vm.$emit('input', event.target.value)
          }
        }
      )
    }
  },
  template: `
    &lt;label&gt;
      {{ label }}
      &lt;input
        v-bind=&quot;$attrs&quot;
        v-bind:value=&quot;value&quot;
        v-on=&quot;inputListeners&quot;
      &gt;
    &lt;/label&gt;
  `
})
</code></pre>

<p>ç°åœ¨<code>&lt;base-input &gt;</code>ç»„ä»¶æ˜¯ä¸€ä¸ªå®Œå…¨é€æ˜çš„åŒ…è£¹å™¨äº†,ä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥å®Œå…¨åƒä¸€ä¸ªæ™®é€šçš„<code>&lt;input\&gt;</code>å…ƒç´ ä¸€æ ·ä½¿ç”¨äº†:æ‰€æœ‰è·Ÿå®ƒç›¸åŒçš„ç‰¹æ€§å’Œç›‘å¬å™¨çš„éƒ½å¯ä»¥å·¥ä½œã€‚</p>
<ul>
<li><strong><code>.sync</code>ä¿®é¥°ç¬¦</strong></li>
</ul>
<p>åœ¨æœ‰äº›æƒ…å†µä¸‹,æˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹ä¸€ä¸ª<code>prop</code>è¿›è¡Œâ€œåŒå‘ç»‘å®šâ€ã€‚ä¸å¹¸çš„æ˜¯,çœŸæ­£çš„åŒå‘ç»‘å®šä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„é—®é¢˜,å› ä¸ºå­ç»„ä»¶å¯ä»¥ä¿®æ”¹çˆ¶ç»„ä»¶,ä¸”åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½æ²¡æœ‰æ˜æ˜¾çš„æ”¹åŠ¨æ¥æºã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æ¨èä»¥<code>update:myPropName</code>çš„æ¨¡å¼è§¦å‘äº‹ä»¶å–è€Œä»£ä¹‹ã€‚ä¸¾ä¸ªä¾‹å­,åœ¨ä¸€ä¸ªåŒ…å«<code>title</code> <code>prop</code>çš„å‡è®¾çš„ç»„ä»¶ä¸­,æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•è¡¨è¾¾å¯¹å…¶èµ‹æ–°å€¼çš„æ„å›¾:</p>
<pre><code>this.$emit('update:title', newTitle)
</code></pre>

<p>ç„¶åçˆ¶ç»„ä»¶å¯ä»¥ç›‘å¬é‚£ä¸ªäº‹ä»¶å¹¶æ ¹æ®éœ€è¦æ›´æ–°ä¸€ä¸ªæœ¬åœ°çš„æ•°æ®å±æ€§ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;text-document
  v-bind:title=&quot;doc.title&quot;
  v-on:update:title=&quot;doc.title = $event&quot;
&gt;&lt;/text-document&gt;
</code></pre>

<p>ä¸ºäº†æ–¹ä¾¿èµ·è§,æˆ‘ä»¬ä¸ºè¿™ç§æ¨¡å¼æä¾›ä¸€ä¸ªç¼©å†™,å³<code>.sync</code>ä¿®é¥°ç¬¦:</p>
<pre><code class="html">&lt;text-document v-bind:title.sync=&quot;doc.title&quot;&gt;&lt;/text-document&gt;
</code></pre>

<p>æ³¨æ„å¸¦æœ‰<code>.sync</code>ä¿®é¥°ç¬¦çš„<code>v-bind</code>ä¸èƒ½å’Œè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨(ä¾‹å¦‚<code>v-bind:title.sync=â€doc.title + â€˜!â€™â€</code>æ˜¯æ— æ•ˆçš„)ã€‚å–è€Œä»£ä¹‹çš„æ˜¯,ä½ åªèƒ½æä¾›ä½ æƒ³è¦ç»‘å®šçš„å±æ€§å,ç±»ä¼¼<code>v-model</code>ã€‚</p>
<p>å½“æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡åŒæ—¶è®¾ç½®å¤šä¸ªpropçš„æ—¶å€™,ä¹Ÿå¯ä»¥å°†è¿™ä¸ª<code>.sync</code>ä¿®é¥°ç¬¦å’Œ<code>v-bind</code>é…åˆä½¿ç”¨:</p>
<pre><code class="html">&lt;text-document v-bind.sync=&quot;doc&quot;&gt;&lt;/text-document&gt;
</code></pre>

<p>è¿™æ ·ä¼šæŠŠ<code>doc</code>å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§(å¦‚<code>title</code>)éƒ½ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„<code>prop</code>ä¼ è¿›å»,ç„¶åå„è‡ªæ·»åŠ ç”¨äºæ›´æ–°çš„<code>v-on</code>ç›‘å¬å™¨ã€‚</p>
<p>å°†<code>v-bind.sync</code>ç”¨åœ¨ä¸€ä¸ªå­—é¢é‡çš„å¯¹è±¡ä¸Š,ä¾‹å¦‚<code>v-bind.sync=â€{ title: doc.title }â€</code>,æ˜¯æ— æ³•æ­£å¸¸å·¥ä½œçš„,å› ä¸ºåœ¨è§£æä¸€ä¸ªåƒè¿™æ ·çš„å¤æ‚è¡¨è¾¾å¼çš„æ—¶å€™,æœ‰å¾ˆå¤šè¾¹ç¼˜æƒ…å†µéœ€è¦è€ƒè™‘ã€‚</p>
<h3 id="24">2.4 æ’æ§½</h3>
<ul>
<li><strong>æ’æ§½å†…å®¹</strong></li>
</ul>
<p>Vueå®ç°äº†ä¸€å¥—å†…å®¹åˆ†å‘çš„API,è¿™å¥—APIçš„è®¾è®¡çµæ„Ÿæºè‡ªWeb Componentsè§„èŒƒè‰æ¡ˆ,å°†<code>&lt;slot\&gt;</code>å…ƒç´ ä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£ã€‚å®ƒå…è®¸ä½ åƒè¿™æ ·åˆæˆç»„ä»¶:</p>
<pre><code class="html">&lt;navigation-link url=&quot;/profile&quot;&gt;
  Your Profile
&lt;/navigation-link&gt;
</code></pre>

<p>ç„¶åä½ åœ¨<code>&lt;navigation-link &gt;</code>çš„æ¨¡æ¿ä¸­å¯èƒ½ä¼šå†™ä¸º:</p>
<pre><code class="html">&lt;a
  v-bind:href=&quot;url&quot;
  class=&quot;nav-link&quot;
&gt;
  &lt;slot&gt;&lt;/slot&gt;
&lt;/a&gt;
</code></pre>

<p>å½“ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™,<code>&lt;slot&gt;&lt;/slot\&gt;</code>å°†ä¼šè¢«æ›¿æ¢ä¸º<code>â€œYour Profileâ€</code>ã€‚æ’æ§½å†…å¯ä»¥åŒ…å«ä»»ä½•æ¨¡æ¿ä»£ç ,åŒ…æ‹¬HTML:</p>
<pre><code class="html">&lt;navigation-link url=&quot;/profile&quot;&gt;
    &lt;!-- æ·»åŠ ä¸€ä¸ª Font Awesome å›¾æ ‡ --&gt;
    &lt;span class=&quot;fa fa-user&quot;&gt;&lt;/span&gt;
    Your Profile
&lt;/navigation-link&gt;
</code></pre>

<p>ç”šè‡³å…¶å®ƒçš„ç»„ä»¶:</p>
<pre><code class="html">&lt;navigation-link url=&quot;/profile&quot;&gt;
    &lt;!-- æ·»åŠ ä¸€ä¸ªå›¾æ ‡çš„ç»„ä»¶ --&gt;
    &lt;font-awesome-icon name=&quot;user&quot;&gt;&lt;/font-awesome-icon&gt;
    Your Profile
&lt;/navigation-link&gt;
</code></pre>

<p>å¦‚æœ<code>&lt;navigation-link &gt;</code>æ²¡æœ‰åŒ…å«ä¸€ä¸ª<code>&lt;slot\&gt;</code>å…ƒç´ ,åˆ™è¯¥ç»„ä»¶èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¹‹é—´çš„ä»»ä½•å†…å®¹éƒ½ä¼šè¢«æŠ›å¼ƒã€‚</p>
<ul>
<li><strong>ç¼–è¯‘ä½œç”¨åŸŸ</strong></li>
</ul>
<p>å½“ä½ æƒ³åœ¨ä¸€ä¸ªæ’æ§½ä¸­ä½¿ç”¨æ•°æ®æ—¶,ä¾‹å¦‚:</p>
<pre><code class="html">&lt;navigation-link url=&quot;/profile&quot;&gt;
    Logged in as {{ user.name }}
&lt;/navigation-link&gt;
</code></pre>

<p>è¯¥æ’æ§½è·Ÿæ¨¡æ¿çš„å…¶å®ƒåœ°æ–¹ä¸€æ ·å¯ä»¥è®¿é—®ç›¸åŒçš„å®ä¾‹å±æ€§(ä¹Ÿå°±æ˜¯ç›¸åŒçš„â€œä½œç”¨åŸŸâ€),è€Œä¸èƒ½è®¿é—®<code>&lt;navigation-link &gt;</code>çš„ä½œç”¨åŸŸã€‚ä¾‹å¦‚<code>url</code>æ˜¯è®¿é—®ä¸åˆ°çš„:</p>
<pre><code class="html">&lt;navigation-link url=&quot;/profile&quot;&gt;
    Clicking here will send you to: {{ url }}
    &lt;!--
    è¿™é‡Œçš„urlä¼šæ˜¯undefined,å› ä¸º&quot;/profile&quot;æ˜¯
     _ä¼ é€’ç»™_&lt;navigation-link&gt;çš„è€Œä¸æ˜¯
    åœ¨&lt;navigation-link&gt;ç»„ä»¶*å†…éƒ¨*å®šä¹‰çš„ã€‚
    --&gt;
&lt;/navigation-link&gt;
</code></pre>

<p>ä½œä¸ºä¸€æ¡è§„åˆ™,è¯·è®°ä½:<strong>çˆ¶çº§æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„;å­æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨å­ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ã€‚</strong></p>
<ul>
<li><strong>åå¤‡å†…å®¹</strong></li>
</ul>
<p>æœ‰æ—¶ä¸ºä¸€ä¸ªæ’æ§½è®¾ç½®å…·ä½“çš„åå¤‡(ä¹Ÿå°±æ˜¯é»˜è®¤çš„) å†…å®¹æ˜¯å¾ˆæœ‰ç”¨çš„,å®ƒåªä¼šåœ¨æ²¡æœ‰æä¾›å†…å®¹çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚ä¾‹å¦‚åœ¨ä¸€ä¸ª<code>&lt;submit-button &gt;</code>ç»„ä»¶ä¸­:</p>
<pre><code class="html">&lt;button type=&quot;submit&quot;&gt;
  &lt;slot&gt;&lt;/slot&gt;
&lt;/button&gt;
</code></pre>

<p>æˆ‘ä»¬å¯èƒ½å¸Œæœ›è¿™ä¸ª<code>&lt;button\&gt;</code>å†…ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ¸²æŸ“æ–‡æœ¬<code>â€œSubmitâ€</code>ã€‚ä¸ºäº†å°†<code>â€œSubmitâ€</code>ä½œä¸ºåå¤‡å†…å®¹,æˆ‘ä»¬å¯ä»¥å°†å®ƒæ”¾åœ¨<code>&lt;slot\&gt;</code>æ ‡ç­¾å†…:</p>
<pre><code class="html">&lt;button type=&quot;submit&quot;&gt;
  &lt;slot&gt;Submit&lt;/slot&gt;
&lt;/button&gt;
</code></pre>

<p>ç°åœ¨å½“æˆ‘åœ¨ä¸€ä¸ªçˆ¶çº§ç»„ä»¶ä¸­ä½¿ç”¨<code>&lt;submit-button &gt;</code>å¹¶ä¸”ä¸æä¾›ä»»ä½•æ’æ§½å†…å®¹æ—¶:</p>
<pre><code class="html">&lt;submit-button&gt;&lt;/submit-button&gt;
</code></pre>

<p>åå¤‡å†…å®¹<code>â€œSubmitâ€</code>å°†ä¼šè¢«æ¸²æŸ“:</p>
<pre><code class="html">&lt;button type=&quot;submit&quot;&gt;
    Submit
&lt;/button&gt;
</code></pre>

<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æä¾›å†…å®¹:</p>
<pre><code class="html">&lt;submit-button&gt;
    Save
&lt;/submit-button&gt;
</code></pre>

<p>åˆ™è¿™ä¸ªæä¾›çš„å†…å®¹å°†ä¼šè¢«æ¸²æŸ“ä»è€Œå–ä»£åå¤‡å†…å®¹:</p>
<pre><code class="html">&lt;button type=&quot;submit&quot;&gt;
    Save
&lt;/button&gt;
</code></pre>

<ul>
<li><strong>å…·åæ’æ§½</strong></li>
</ul>
<p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦å¤šä¸ªæ’æ§½ã€‚ä¾‹å¦‚å¯¹äºä¸€ä¸ªå¸¦æœ‰å¦‚ä¸‹æ¨¡æ¿çš„<code>&lt;base-layout &gt;</code>ç»„ä»¶:</p>
<pre><code class="html">&lt;div class=&quot;container&quot;&gt;
    &lt;header&gt;
        &lt;!-- æˆ‘ä»¬å¸Œæœ›æŠŠé¡µå¤´æ”¾è¿™é‡Œ --&gt;
    &lt;/header&gt;
    &lt;main&gt;
        &lt;!-- æˆ‘ä»¬å¸Œæœ›æŠŠä¸»è¦å†…å®¹æ”¾è¿™é‡Œ --&gt;
    &lt;/main&gt;
    &lt;footer&gt;
        &lt;!-- æˆ‘ä»¬å¸Œæœ›æŠŠé¡µè„šæ”¾è¿™é‡Œ --&gt;
    &lt;/footer&gt;
&lt;/div&gt;
</code></pre>

<p>å¯¹äºè¿™æ ·çš„æƒ…å†µ,<code>&lt;slot\&gt;</code>å…ƒç´ æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç‰¹æ€§:<code>name</code>ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨æ¥å®šä¹‰é¢å¤–çš„æ’æ§½:</p>
<pre><code class="html">&lt;div class=&quot;container&quot;&gt;
    &lt;header&gt;
        &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;
    &lt;/header&gt;
    &lt;main&gt;
        &lt;slot&gt;&lt;/slot&gt;
    &lt;/main&gt;
    &lt;footer&gt;
        &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;
    &lt;/footer&gt;
&lt;/div&gt;
</code></pre>

<p>ä¸€ä¸ªä¸å¸¦<code>name</code>çš„<code>&lt;slot\&gt;</code>å‡ºå£ä¼šå¸¦æœ‰éšå«çš„åå­—<code>â€œdefaultâ€</code>ã€‚</p>
<p>åœ¨å‘å…·åæ’æ§½æä¾›å†…å®¹çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª<code>&lt;template\&gt;</code>å…ƒç´ ä¸Šä½¿ç”¨<code>v-slot</code>æŒ‡ä»¤,å¹¶ä»¥<code>v-slot</code>çš„å‚æ•°çš„å½¢å¼æä¾›å…¶åç§°:</p>
<pre><code class="html">&lt;base-layout&gt;
    &lt;template v-slot:header&gt;
        &lt;h1&gt;Here might be a page title&lt;/h1&gt;
    &lt;/template&gt;

    &lt;p&gt;A paragraph for the main content.&lt;/p&gt;
    &lt;p&gt;And another one.&lt;/p&gt;

    &lt;template v-slot:footer&gt;
        &lt;p&gt;Here's some contact info&lt;/p&gt;
    &lt;/template&gt;
&lt;/base-layout&gt;
</code></pre>

<p>ç°åœ¨<code>&lt;template\&gt;</code>å…ƒç´ ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å°†ä¼šè¢«ä¼ å…¥ç›¸åº”çš„æ’æ§½ã€‚ä»»ä½•æ²¡æœ‰è¢«åŒ…è£¹åœ¨å¸¦æœ‰<code>v-slot</code>çš„<code>&lt;template\&gt;</code>ä¸­çš„å†…å®¹éƒ½ä¼šè¢«è§†ä¸ºé»˜è®¤æ’æ§½çš„å†…å®¹ã€‚</p>
<p>ç„¶è€Œ,å¦‚æœä½ å¸Œæœ›æ›´æ˜ç¡®ä¸€äº›,ä»ç„¶å¯ä»¥åœ¨ä¸€ä¸ª<code>&lt;template\&gt;</code>ä¸­åŒ…è£¹é»˜è®¤æ’æ§½çš„å†…å®¹:</p>
<pre><code class="html">&lt;base-layout&gt;
    &lt;template v-slot:header&gt;
        &lt;h1&gt;Here might be a page title&lt;/h1&gt;
    &lt;/template&gt;

    &lt;template v-slot:default&gt;
        &lt;p&gt;A paragraph for the main content.&lt;/p&gt;
        &lt;p&gt;And another one.&lt;/p&gt;
    &lt;/template&gt;

    &lt;template v-slot:footer&gt;
        &lt;p&gt;Here's some contact info&lt;/p&gt;
    &lt;/template&gt;
&lt;/base-layout&gt;
</code></pre>

<p>ä»»ä½•ä¸€ç§å†™æ³•éƒ½ä¼šæ¸²æŸ“å‡º:</p>
<pre><code class="html">&lt;div class=&quot;container&quot;&gt;
    &lt;header&gt;
        &lt;h1&gt;Here might be a page title&lt;/h1&gt;
    &lt;/header&gt;
    &lt;main&gt;
        &lt;p&gt;A paragraph for the main content.&lt;/p&gt;
        &lt;p&gt;And another one.&lt;/p&gt;
    &lt;/main&gt;
    &lt;footer&gt;
        &lt;p&gt;Here's some contact info&lt;/p&gt;
    &lt;/footer&gt;
&lt;/div&gt;
</code></pre>

<p>æ³¨æ„<code>v-slot</code>åªèƒ½æ·»åŠ åœ¨<code>&lt;template\&gt;</code>ä¸Š(åªæœ‰ä¸€ç§ä¾‹å¤–æƒ…å†µ),è¿™ä¸€ç‚¹å’Œå·²ç»åºŸå¼ƒçš„<code>slot</code>ç‰¹æ€§ä¸åŒã€‚</p>
<ul>
<li><strong>ä½œç”¨åŸŸæ’æ§½</strong></li>
</ul>
<p>æœ‰æ—¶è®©æ’æ§½å†…å®¹èƒ½å¤Ÿè®¿é—®å­ç»„ä»¶ä¸­æ‰æœ‰çš„æ•°æ®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¾‹å¦‚,è®¾æƒ³ä¸€ä¸ªå¸¦æœ‰å¦‚ä¸‹æ¨¡æ¿çš„<code>&lt;current-user &gt;</code>ç»„ä»¶:</p>
<pre><code class="html">&lt;span&gt;
  &lt;slot&gt;{{ user.lastName }}&lt;/slot&gt;
&lt;/span&gt;
</code></pre>

<p>æˆ‘ä»¬æƒ³è®©å®ƒçš„åå¤‡å†…å®¹æ˜¾ç¤ºç”¨æˆ·çš„å,ä»¥å–ä»£æ­£å¸¸æƒ…å†µä¸‹ç”¨æˆ·çš„å§“,å¦‚ä¸‹:</p>
<pre><code class="html">&lt;current-user&gt;
  {{ user.firstName }}
&lt;/current-user&gt;
</code></pre>

<p>ç„¶è€Œä¸Šè¿°ä»£ç ä¸ä¼šæ­£å¸¸å·¥ä½œ,å› ä¸ºåªæœ‰<code>&lt;current-user &gt;</code>ç»„ä»¶å¯ä»¥è®¿é—®åˆ°userè€Œæˆ‘ä»¬æä¾›çš„å†…å®¹æ˜¯åœ¨çˆ¶çº§æ¸²æŸ“çš„ã€‚</p>
<p>ä¸ºäº†è®©useråœ¨çˆ¶çº§çš„æ’æ§½å†…å®¹ä¸­å¯ç”¨,æˆ‘ä»¬å¯ä»¥å°†<code>user</code>ä½œä¸º<code>&lt;slot\&gt;</code>å…ƒç´ çš„ä¸€ä¸ªç‰¹æ€§ç»‘å®šä¸Šå»:</p>
<pre><code class="html">&lt;span&gt;
    &lt;slot v-bind:user=&quot;user&quot;&gt;
        {{ user.lastName }}
    &lt;/slot&gt;
&lt;/span&gt;
</code></pre>

<p>ç»‘å®šåœ¨<code>&lt;slot\&gt;</code>å…ƒç´ ä¸Šçš„ç‰¹æ€§è¢«ç§°ä¸ºæ’æ§½<code>prop</code>ã€‚ç°åœ¨åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­,æˆ‘ä»¬å¯ä»¥ç»™v-slotå¸¦ä¸€ä¸ªå€¼æ¥å®šä¹‰æˆ‘ä»¬æä¾›çš„æ’æ§½<code>prop</code>çš„åå­—:</p>
<pre><code class="html">&lt;current-user&gt;
    &lt;template v-slot:default=&quot;slotProps&quot;&gt;
        {{ slotProps.user.firstName }}
    &lt;/template&gt;
&lt;/current-user&gt;
</code></pre>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­,æˆ‘ä»¬é€‰æ‹©å°†åŒ…å«æ‰€æœ‰æ’æ§½<code>prop</code>çš„å¯¹è±¡å‘½åä¸º<code>slotProps</code>,ä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„ä½ å–œæ¬¢çš„åå­—ã€‚</p>
<blockquote>
<ul>
<li><strong>ç‹¬å é»˜è®¤æ’æ§½çš„ç¼©å†™è¯­æ³•</strong></li>
</ul>
</blockquote>
<p>åœ¨ä¸Šè¿°æƒ…å†µä¸‹,å½“è¢«æä¾›çš„å†…å®¹åªæœ‰é»˜è®¤æ’æ§½æ—¶,ç»„ä»¶çš„æ ‡ç­¾æ‰å¯ä»¥è¢«å½“ä½œæ’æ§½çš„æ¨¡æ¿æ¥ä½¿ç”¨ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ<code>v-slot</code>ç›´æ¥ç”¨åœ¨ç»„ä»¶ä¸Š:</p>
<pre><code class="html">&lt;current-user v-slot:default=&quot;slotProps&quot;&gt;
    {{ slotProps.user.firstName }}
&lt;/current-user&gt;
</code></pre>

<p>è¿™ç§å†™æ³•è¿˜å¯ä»¥æ›´ç®€å•ã€‚å°±åƒå‡å®šæœªæŒ‡æ˜çš„å†…å®¹å¯¹åº”é»˜è®¤æ’æ§½ä¸€æ ·,ä¸å¸¦å‚æ•°çš„<code>v-slot</code>è¢«å‡å®šå¯¹åº”é»˜è®¤æ’æ§½:</p>
<pre><code class="html">&lt;current-user v-slot=&quot;slotProps&quot;&gt;
  {{ slotProps.user.firstName }}
&lt;/current-user&gt;
</code></pre>

<p>æ³¨æ„é»˜è®¤æ’æ§½çš„ç¼©å†™è¯­æ³•ä¸èƒ½å’Œå…·åæ’æ§½æ··ç”¨,å› ä¸ºå®ƒä¼šå¯¼è‡´ä½œç”¨åŸŸä¸æ˜ç¡®:</p>
<pre><code class="html">&lt;!-- æ— æ•ˆ,ä¼šå¯¼è‡´è­¦å‘Š --&gt;
&lt;current-user v-slot=&quot;slotProps&quot;&gt;
    {{ slotProps.user.firstName }}
    &lt;template v-slot:other=&quot;otherSlotProps&quot;&gt;
        slotProps is NOT available here
    &lt;/template&gt;
&lt;/current-user&gt;
</code></pre>

<p>åªè¦å‡ºç°å¤šä¸ªæ’æ§½,è¯·å§‹ç»ˆä¸ºæ‰€æœ‰çš„æ’æ§½ä½¿ç”¨å®Œæ•´çš„åŸºäº<code>&lt;template\&gt;</code>çš„è¯­æ³•:</p>
<pre><code class="html">&lt;current-user&gt;
    &lt;template v-slot:default=&quot;slotProps&quot;&gt;
        {{ slotProps.user.firstName }}
    &lt;/template&gt;

    &lt;template v-slot:other=&quot;otherSlotProps&quot;&gt;
        ...
    &lt;/template&gt;
&lt;/current-user&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>è§£æ„æ’æ§½<code>Prop</code></strong></li>
</ul>
</blockquote>
<p>ä½œç”¨åŸŸæ’æ§½çš„å†…éƒ¨å·¥ä½œåŸç†æ˜¯å°†ä½ çš„æ’æ§½å†…å®¹åŒ…æ‹¬åœ¨ä¸€ä¸ªä¼ å…¥å•ä¸ªå‚æ•°çš„å‡½æ•°é‡Œ:</p>
<pre><code class="javascript">function (slotProps) {
  // æ’æ§½å†…å®¹
}
</code></pre>

<p>è¿™æ„å‘³ç€<code>v-slot</code>çš„å€¼å®é™…ä¸Šå¯ä»¥æ˜¯ä»»ä½•èƒ½å¤Ÿä½œä¸ºå‡½æ•°å®šä¹‰ä¸­çš„å‚æ•°çš„JavaScriptè¡¨è¾¾å¼ã€‚æ‰€ä»¥åœ¨æ”¯æŒçš„ç¯å¢ƒä¸‹(å•æ–‡ä»¶ç»„ä»¶æˆ–ç°ä»£æµè§ˆå™¨),ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ES2015è§£æ„æ¥ä¼ å…¥å…·ä½“çš„æ’æ§½<code>prop</code>,å¦‚ä¸‹:</p>
<pre><code class="html">&lt;current-user v-slot=&quot;{ user }&quot;&gt;
    {{ user.firstName }}
&lt;/current-user&gt;
</code></pre>

<p>è¿™æ ·å¯ä»¥ä½¿æ¨¡æ¿æ›´ç®€æ´,å°¤å…¶æ˜¯åœ¨è¯¥æ’æ§½æä¾›äº†å¤šä¸ª<code>prop</code>çš„æ—¶å€™ã€‚å®ƒåŒæ ·å¼€å¯äº†<code>prop</code>é‡å‘½åç­‰å…¶å®ƒå¯èƒ½,ä¾‹å¦‚å°†<code>user</code>é‡å‘½åä¸º<code>person</code>:</p>
<pre><code class="html">&lt;current-user v-slot=&quot;{ user: person }&quot;&gt;
    {{ person.firstName }}
&lt;/current-user&gt;
</code></pre>

<p>ä½ ç”šè‡³å¯ä»¥å®šä¹‰åå¤‡å†…å®¹,ç”¨äºæ’æ§½<code>prop</code>æ˜¯<code>undefined</code>çš„æƒ…å½¢:</p>
<pre><code class="html">&lt;current-user v-slot=&quot;{ user = { firstName: 'Guest' } }&quot;&gt;
    {{ user.firstName }}
&lt;/current-user&gt;
</code></pre>

<ul>
<li><strong>åŠ¨æ€æ’æ§½å</strong></li>
</ul>
<p>åŠ¨æ€æŒ‡ä»¤å‚æ•°ä¹Ÿå¯ä»¥ç”¨åœ¨<code>v-slot</code>ä¸Š,æ¥å®šä¹‰åŠ¨æ€çš„æ’æ§½å:</p>
<pre><code class="html">&lt;base-layout&gt;
    &lt;template v-slot:[dynamicSlotName]&gt;
        ...
    &lt;/template&gt;
&lt;/base-layout&gt;
</code></pre>

<ul>
<li><strong>å…·åæ’æ§½çš„ç¼©å†™</strong></li>
</ul>
<p>è·Ÿ<code>v-on</code>å’Œ<code>v-bind</code>ä¸€æ ·,<code>v-slot</code>ä¹Ÿæœ‰ç¼©å†™,å³æŠŠå‚æ•°ä¹‹å‰çš„æ‰€æœ‰å†…å®¹(<code>v-slot:</code>)æ›¿æ¢ä¸ºå­—ç¬¦<code>#</code>ã€‚ä¾‹å¦‚<code>v-slot:header</code>å¯ä»¥è¢«é‡å†™ä¸º<code>#header</code>:</p>
<pre><code class="html">&lt;base-layout&gt;
    &lt;template #header&gt;
        &lt;h1&gt;Here might be a page title&lt;/h1&gt;
    &lt;/template&gt;

    &lt;p&gt;A paragraph for the main content.&lt;/p&gt;
    &lt;p&gt;And another one.&lt;/p&gt;

    &lt;template #footer&gt;
        &lt;p&gt;Here's some contact info&lt;/p&gt;
    &lt;/template&gt;
&lt;/base-layout&gt;
</code></pre>

<p>ç„¶è€Œ,å’Œå…¶å®ƒæŒ‡ä»¤ä¸€æ ·,è¯¥ç¼©å†™åªåœ¨å…¶æœ‰å‚æ•°çš„æ—¶å€™æ‰å¯ç”¨ã€‚è¿™æ„å‘³ç€ä»¥ä¸‹è¯­æ³•æ˜¯æ— æ•ˆçš„:</p>
<pre><code class="html">&lt;!-- è¿™æ ·ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Š --&gt;
&lt;current-user #=&quot;{ user }&quot;&gt;
  {{ user.firstName }}
&lt;/current-user&gt;
</code></pre>

<p>å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ç¼©å†™çš„è¯,ä½ å¿…é¡»å§‹ç»ˆä»¥æ˜ç¡®æ’æ§½åå–è€Œä»£ä¹‹:</p>
<pre><code class="html">&lt;current-user #default=&quot;{ user }&quot;&gt;
    {{ user.firstName }}
&lt;/current-user&gt;
</code></pre>

<ul>
<li><strong>å…¶å®ƒç¤ºä¾‹</strong></li>
</ul>
<p>æ’æ§½<code>prop</code>å…è®¸æˆ‘ä»¬å°†æ’æ§½è½¬æ¢ä¸ºå¯å¤ç”¨çš„æ¨¡æ¿,è¿™äº›æ¨¡æ¿å¯ä»¥åŸºäºè¾“å…¥çš„<code>prop</code>æ¸²æŸ“å‡ºä¸åŒçš„å†…å®¹ã€‚è¿™åœ¨è®¾è®¡å°è£…æ•°æ®é€»è¾‘åŒæ—¶å…è®¸çˆ¶çº§ç»„ä»¶è‡ªå®šä¹‰éƒ¨åˆ†å¸ƒå±€çš„å¯å¤ç”¨ç»„ä»¶æ—¶æ˜¯æœ€æœ‰ç”¨çš„ã€‚</p>
<p>ä¾‹å¦‚,æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª<code>&lt;todo-list &gt;</code>ç»„ä»¶,å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸”åŒ…å«å¸ƒå±€å’Œè¿‡æ»¤é€»è¾‘:</p>
<pre><code class="html">&lt;ul&gt;
    &lt;li
        v-for=&quot;todo in filteredTodos&quot;
        v-bind:key=&quot;todo.id&quot;
    &gt;
        {{ todo.text }}
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ª<code>todo</code>ä½œä¸ºçˆ¶çº§ç»„ä»¶çš„æ’æ§½,ä»¥æ­¤é€šè¿‡çˆ¶çº§ç»„ä»¶å¯¹å…¶è¿›è¡Œæ§åˆ¶,ç„¶åå°†<code>todo</code>ä½œä¸ºä¸€ä¸ªæ’æ§½<code>prop</code>è¿›è¡Œç»‘å®š:</p>
<pre><code class="html">&lt;ul&gt;
  &lt;li
    v-for=&quot;todo in filteredTodos&quot;
    v-bind:key=&quot;todo.id&quot;
  &gt;
    &lt;!--
    æˆ‘ä»¬ä¸ºæ¯ä¸ª todo å‡†å¤‡äº†ä¸€ä¸ªæ’æ§½,
    å°† `todo` å¯¹è±¡ä½œä¸ºä¸€ä¸ªæ’æ§½çš„ prop ä¼ å…¥ã€‚
    --&gt;
    &lt;slot name=&quot;todo&quot; v-bind:todo=&quot;todo&quot;&gt;
      &lt;!-- åå¤‡å†…å®¹ --&gt;
      {{ todo.text }}
    &lt;/slot&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>ç°åœ¨å½“æˆ‘ä»¬ä½¿ç”¨<code>&lt;todo-list &gt;</code>ç»„ä»¶çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸º<code>todo</code>å®šä¹‰ä¸€ä¸ªä¸ä¸€æ ·çš„<code>&lt;template\&gt;</code>ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆ,å¹¶ä¸”å¯ä»¥ä»å­ç»„ä»¶è·å–æ•°æ®:</p>
<pre><code class="html">&lt;todo-list v-bind:todos=&quot;todos&quot;&gt;
    &lt;template v-slot:todo=&quot;{ todo }&quot;&gt;
        &lt;span v-if=&quot;todo.isComplete&quot;&gt;âœ“&lt;/span&gt;
        {{ todo.text }}
        &lt;/template&gt;
&lt;/todo-list&gt;
</code></pre>

<p>è¿™åªæ˜¯ä½œç”¨åŸŸæ’æ§½ç”¨æ­¦ä¹‹åœ°çš„å†°å±±ä¸€è§’ã€‚æƒ³äº†è§£æ›´å¤šç°å®ç”Ÿæ´»ä¸­çš„ä½œç”¨åŸŸæ’æ§½çš„ç”¨æ³•,æˆ‘ä»¬æ¨èæµè§ˆè¯¸å¦‚<code>Vue Virtual Scroller</code>ã€<code>Vue Promised</code>å’Œ<code>Portal Vue</code>ç­‰åº“ã€‚</p>
<h3 id="25">2.5 åŠ¨æ€ç»„ä»¶&amp;å¼‚æ­¥ç»„ä»¶</h3>
<ul>
<li><strong>åœ¨åŠ¨æ€ç»„ä»¶ä¸Šä½¿ç”¨<code>keep-alive</code></strong></li>
</ul>
<p>æˆ‘ä»¬ä¹‹å‰æ›¾ç»åœ¨ä¸€ä¸ªå¤šæ ‡ç­¾çš„ç•Œé¢ä¸­ä½¿ç”¨<code>is</code>ç‰¹æ€§æ¥åˆ‡æ¢ä¸åŒçš„ç»„ä»¶:</p>
<pre><code class="html">&lt;component v-bind:is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;
</code></pre>

<p>å½“åœ¨è¿™äº›ç»„ä»¶ä¹‹é—´åˆ‡æ¢çš„æ—¶å€™,ä½ æœ‰æ—¶ä¼šæƒ³ä¿æŒè¿™äº›ç»„ä»¶çš„çŠ¶æ€,ä»¥é¿å…åå¤é‡æ¸²æŸ“å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>é‡æ–°åˆ›å»ºåŠ¨æ€ç»„ä»¶çš„è¡Œä¸ºé€šå¸¸æ˜¯éå¸¸æœ‰ç”¨çš„,ä½†æ˜¯åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­,æˆ‘ä»¬æ›´å¸Œæœ›é‚£äº›æ ‡ç­¾çš„ç»„ä»¶å®ä¾‹èƒ½å¤Ÿè¢«åœ¨å®ƒä»¬ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºçš„æ—¶å€™ç¼“å­˜ä¸‹æ¥ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª<code>&lt;keep-alive&gt;</code>å…ƒç´ å°†å…¶åŠ¨æ€ç»„ä»¶åŒ…è£¹èµ·æ¥ã€‚</p>
<pre><code class="html">&lt;!-- å¤±æ´»çš„ç»„ä»¶å°†ä¼šè¢«ç¼“å­˜ï¼--&gt;
&lt;keep-alive&gt;
    &lt;component v-bind:is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;
&lt;/keep-alive&gt;
</code></pre>

<p>ç°åœ¨è¿™ä¸ª<code>Posts</code>æ ‡ç­¾ä¿æŒäº†å®ƒçš„çŠ¶æ€(è¢«é€‰ä¸­çš„æ–‡ç« )ç”šè‡³å½“å®ƒæœªè¢«æ¸²æŸ“æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ª<a href="https://jsfiddle.net/chrisvfritz/Lp20op9o/">fiddle</a>æŸ¥é˜…åˆ°å®Œæ•´çš„ä»£ç ã€‚</p>
<p>æ³¨æ„è¿™ä¸ª<code>&lt;keep-alive&gt;</code>è¦æ±‚è¢«åˆ‡æ¢åˆ°çš„ç»„ä»¶éƒ½æœ‰è‡ªå·±çš„åå­—,ä¸è®ºæ˜¯é€šè¿‡ç»„ä»¶çš„<code>name</code>é€‰é¡¹è¿˜æ˜¯å±€éƒ¨/å…¨å±€æ³¨å†Œã€‚</p>
<ul>
<li><strong>å¼‚æ­¥ç»„ä»¶</strong></li>
</ul>
<p>åœ¨å¤§å‹åº”ç”¨ä¸­,æˆ‘ä»¬å¯èƒ½éœ€è¦å°†åº”ç”¨åˆ†å‰²æˆå°ä¸€äº›çš„ä»£ç å—,å¹¶ä¸”åªåœ¨éœ€è¦çš„æ—¶å€™æ‰ä»æœåŠ¡å™¨åŠ è½½ä¸€ä¸ªæ¨¡å—ã€‚ä¸ºäº†ç®€åŒ–,Vueå…è®¸ä½ ä»¥ä¸€ä¸ªå·¥å‚å‡½æ•°çš„æ–¹å¼å®šä¹‰ä½ çš„ç»„ä»¶,è¿™ä¸ªå·¥å‚å‡½æ•°ä¼šå¼‚æ­¥è§£æä½ çš„ç»„ä»¶å®šä¹‰ã€‚Vueåªæœ‰åœ¨è¿™ä¸ªç»„ä»¶éœ€è¦è¢«æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè§¦å‘è¯¥å·¥å‚å‡½æ•°,ä¸”ä¼šæŠŠç»“æœç¼“å­˜èµ·æ¥ä¾›æœªæ¥é‡æ¸²æŸ“ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">Vue.component('async-example', function (resolve, reject) {
    setTimeout(function () {
        // å‘resolveå›è°ƒä¼ é€’ç»„ä»¶å®šä¹‰
        resolve({
            template: '&lt;div&gt;I am async!&lt;/div&gt;'
        })
        }, 1000)
})
</code></pre>

<p>å¦‚ä½ æ‰€è§,è¿™ä¸ªå·¥å‚å‡½æ•°ä¼šæ”¶åˆ°ä¸€ä¸ª<code>resolve</code>å›è°ƒ,è¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨ä½ ä»æœåŠ¡å™¨å¾—åˆ°ç»„ä»¶å®šä¹‰çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ä½ ä¹Ÿå¯ä»¥è°ƒç”¨<code>reject(reason)</code>æ¥è¡¨ç¤ºåŠ è½½å¤±è´¥ã€‚è¿™é‡Œçš„<code>setTimeout</code>æ˜¯ä¸ºäº†æ¼”ç¤ºç”¨çš„,å¦‚ä½•è·å–ç»„ä»¶å–å†³äºä½ è‡ªå·±ã€‚ä¸€ä¸ªæ¨èçš„åšæ³•æ˜¯å°†å¼‚æ­¥ç»„ä»¶å’Œwebpackçš„<code>code-splitting</code>åŠŸèƒ½ä¸€èµ·é…åˆä½¿ç”¨:</p>
<pre><code class="javascript">Vue.component('async-webpack-example', function (resolve) {
    // è¿™ä¸ªç‰¹æ®Šçš„requireè¯­æ³•å°†ä¼šå‘Šè¯‰webpack
    // è‡ªåŠ¨å°†ä½ çš„æ„å»ºä»£ç åˆ‡å‰²æˆå¤šä¸ªåŒ…,è¿™äº›åŒ…
    // ä¼šé€šè¿‡Ajaxè¯·æ±‚åŠ è½½
  require(['./my-async-component'], resolve)
})
</code></pre>

<p>ä½ ä¹Ÿå¯ä»¥åœ¨å·¥å‚å‡½æ•°ä¸­è¿”å›ä¸€ä¸ª<code>Promise</code>,æ‰€ä»¥æŠŠwebpack 2å’ŒES2015è¯­æ³•åŠ åœ¨ä¸€èµ·,æˆ‘ä»¬å¯ä»¥å†™æˆè¿™æ ·:</p>
<pre><code class="javascript">Vue.component(
  'async-webpack-example',
  // è¿™ä¸ªimportå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚
  () =&gt; import('./my-async-component')
)
</code></pre>

<p>å½“ä½¿ç”¨å±€éƒ¨æ³¨å†Œçš„æ—¶å€™,ä½ ä¹Ÿå¯ä»¥ç›´æ¥æä¾›ä¸€ä¸ªè¿”å›<code>Promise</code>çš„å‡½æ•°:</p>
<pre><code class="javascript">new Vue({
    // ...
    components: {
        'my-component': () =&gt; import('./my-async-component')
    }
})
</code></pre>

<ul>
<li><strong>å¤„ç†åŠ è½½çŠ¶æ€</strong></li>
</ul>
<p>è¿™é‡Œçš„å¼‚æ­¥ç»„ä»¶å·¥å‚å‡½æ•°ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå¦‚ä¸‹æ ¼å¼çš„å¯¹è±¡:</p>
<pre><code class="javascript">const AsyncComponent = () =&gt; ({
    // éœ€è¦åŠ è½½çš„ç»„ä»¶(åº”è¯¥æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡)
    component: import('./MyComponent.vue'),
    // å¼‚æ­¥ç»„ä»¶åŠ è½½æ—¶ä½¿ç”¨çš„ç»„ä»¶
    loading: LoadingComponent,
    // åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨çš„ç»„ä»¶
    error: ErrorComponent,
    // å±•ç¤ºåŠ è½½æ—¶ç»„ä»¶çš„å»¶æ—¶æ—¶é—´ã€‚é»˜è®¤å€¼æ˜¯200(æ¯«ç§’)
    delay: 200,
    // å¦‚æœæä¾›äº†è¶…æ—¶æ—¶é—´ä¸”ç»„ä»¶åŠ è½½ä¹Ÿè¶…æ—¶äº†,
    // åˆ™ä½¿ç”¨åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨çš„ç»„ä»¶ã€‚é»˜è®¤å€¼æ˜¯:Infinity
    timeout: 3000
})
</code></pre>

<p>æ³¨æ„å¦‚æœä½ å¸Œæœ›åœ¨Vue Routerçš„è·¯ç”±ç»„ä»¶ä¸­ä½¿ç”¨ä¸Šè¿°è¯­æ³•çš„è¯,ä½ å¿…é¡»ä½¿ç”¨Vue Router 2.4.0+ç‰ˆæœ¬ã€‚</p>
<h3 id="26">2.6 å¤„ç†è¾¹ç•Œæƒ…å†µ</h3>
<p>è¿™é‡Œè®°å½•çš„éƒ½æ˜¯å’Œå¤„ç†è¾¹ç•Œæƒ…å†µæœ‰å…³çš„åŠŸèƒ½,å³ä¸€äº›éœ€è¦å¯¹Vueçš„è§„åˆ™åšä¸€äº›å°è°ƒæ•´çš„ç‰¹æ®Šæƒ…å†µã€‚ä¸è¿‡æ³¨æ„è¿™äº›åŠŸèƒ½éƒ½æ˜¯æœ‰åŠ£åŠ¿æˆ–å±é™©çš„åœºæ™¯çš„ã€‚æˆ‘ä»¬ä¼šåœ¨æ¯ä¸ªæ¡ˆä¾‹ä¸­æ³¨æ˜,æ‰€ä»¥å½“ä½ ä½¿ç”¨æ¯ä¸ªåŠŸèƒ½çš„æ—¶å€™è¯·ç¨åŠ ç•™æ„ã€‚</p>
<ul>
<li><strong>è®¿é—®å…ƒç´ &amp;ç»„ä»¶</strong></li>
</ul>
<p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹,æˆ‘ä»¬æœ€å¥½ä¸è¦è§¦è¾¾å¦ä¸€ä¸ªç»„ä»¶å®ä¾‹å†…éƒ¨æˆ–æ‰‹åŠ¨æ“ä½œDOMå…ƒç´ ã€‚ä¸è¿‡ä¹Ÿç¡®å®åœ¨ä¸€äº›æƒ…å†µä¸‹åšè¿™äº›äº‹æƒ…æ˜¯åˆé€‚çš„ã€‚</p>
<blockquote>
<ul>
<li><strong>è®¿é—®æ ¹å®ä¾‹</strong></li>
</ul>
</blockquote>
<p>åœ¨æ¯ä¸ª<code>new Vue</code>å®ä¾‹çš„å­ç»„ä»¶ä¸­,å…¶æ ¹å®ä¾‹å¯ä»¥é€šè¿‡<code>$root</code>å±æ€§è¿›è¡Œè®¿é—®ã€‚ä¾‹å¦‚,åœ¨è¿™ä¸ªæ ¹å®ä¾‹ä¸­:</p>
<pre><code class="javascript">// Vue æ ¹å®ä¾‹
new Vue({
    data: {
        foo: 1
    },
    computed: {
        bar: function () { /* ... */ }
    },
    methods: {
        baz: function () { /* ... */ }
    }
})
</code></pre>

<p>æ‰€æœ‰çš„å­ç»„ä»¶éƒ½å¯ä»¥å°†è¿™ä¸ªå®ä¾‹ä½œä¸ºä¸€ä¸ªå…¨å±€<code>store</code>æ¥è®¿é—®æˆ–ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">// è·å–æ ¹ç»„ä»¶çš„æ•°æ®
this.$root.foo
// å†™å…¥æ ¹ç»„ä»¶çš„æ•°æ®
this.$root.foo = 2
// è®¿é—®æ ¹ç»„ä»¶çš„è®¡ç®—å±æ€§
this.$root.bar
// è°ƒç”¨æ ¹ç»„ä»¶çš„æ–¹æ³•
this.$root.baz()
</code></pre>

<p>å¯¹äº<code>demo</code>æˆ–éå¸¸å°å‹çš„æœ‰å°‘é‡ç»„ä»¶çš„åº”ç”¨æ¥è¯´è¿™æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ä¸è¿‡è¿™ä¸ªæ¨¡å¼æ‰©å±•åˆ°ä¸­å¤§å‹åº”ç”¨æ¥è¯´å°±ä¸ç„¶äº†ã€‚å› æ­¤åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹,æˆ‘ä»¬å¼ºçƒˆæ¨èä½¿ç”¨<code>Vuex</code>æ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ã€‚</p>
<blockquote>
<ul>
<li><strong>è®¿é—®çˆ¶çº§ç»„ä»¶å®ä¾‹</strong></li>
</ul>
</blockquote>
<p>å’Œ<code>$root</code>ç±»ä¼¼,<code>$parent</code>å±æ€§å¯ä»¥ç”¨æ¥ä»ä¸€ä¸ªå­ç»„ä»¶è®¿é—®çˆ¶ç»„ä»¶çš„å®ä¾‹ã€‚å®ƒæä¾›äº†ä¸€ç§æœºä¼š,å¯ä»¥åœ¨åæœŸéšæ—¶è§¦è¾¾çˆ¶çº§ç»„ä»¶,ä»¥æ›¿ä»£å°†æ•°æ®ä»¥<code>prop</code>çš„æ–¹å¼ä¼ å…¥å­ç»„ä»¶çš„æ–¹å¼ã€‚</p>
<p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹,è§¦è¾¾çˆ¶çº§ç»„ä»¶ä¼šä½¿å¾—ä½ çš„åº”ç”¨æ›´éš¾è°ƒè¯•å’Œç†è§£,å°¤å…¶æ˜¯å½“ä½ å˜æ›´äº†çˆ¶çº§ç»„ä»¶çš„æ•°æ®çš„æ—¶å€™ã€‚å½“æˆ‘ä»¬ç¨åå›çœ‹é‚£ä¸ªç»„ä»¶çš„æ—¶å€™,å¾ˆéš¾æ‰¾å‡ºé‚£ä¸ªå˜æ›´æ˜¯ä»å“ªé‡Œå‘èµ·çš„ã€‚</p>
<p>å¦å¤–åœ¨ä¸€äº›å¯èƒ½é€‚å½“çš„æ—¶å€™,ä½ éœ€è¦ç‰¹åˆ«åœ°å…±äº«ä¸€äº›ç»„ä»¶åº“ã€‚ä¸¾ä¸ªä¾‹å­,åœ¨å’ŒJavaScript APIè¿›è¡Œäº¤äº’è€Œä¸æ¸²æŸ“HTMLçš„æŠ½è±¡ç»„ä»¶å†…,è¯¸å¦‚è¿™äº›å‡è®¾æ€§çš„Googleåœ°å›¾ç»„ä»¶ä¸€æ ·:</p>
<pre><code class="html">&lt;google-map&gt;
    &lt;google-map-markers v-bind:places=&quot;iceCreamShops&quot;&gt;&lt;/google-map-markers&gt;
&lt;/google-map&gt;
</code></pre>

<p>è¿™ä¸ª<code>&lt;google-map&gt;</code>ç»„ä»¶å¯ä»¥å®šä¹‰ä¸€ä¸ª<code>map</code>å±æ€§,æ‰€æœ‰çš„å­ç»„ä»¶éƒ½éœ€è¦è®¿é—®å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹<code>&lt;google-map-markers&gt;</code>å¯èƒ½æƒ³è¦é€šè¿‡ç±»ä¼¼<code>this.$parent.getMap</code>çš„æ–¹å¼è®¿é—®é‚£ä¸ªåœ°å›¾,ä»¥ä¾¿ä¸ºå…¶æ·»åŠ ä¸€ç»„æ ‡è®°ã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥é˜…è¿™ç§æ¨¡å¼ã€‚</p>
<p>è¯·ç•™æ„,å°½ç®¡å¦‚æ­¤,é€šè¿‡è¿™ç§æ¨¡å¼æ„å»ºå‡ºæ¥çš„é‚£ä¸ªç»„ä»¶çš„å†…éƒ¨ä»ç„¶æ˜¯å®¹æ˜“å‡ºç°é—®é¢˜çš„ã€‚æ¯”å¦‚,è®¾æƒ³ä¸€ä¸‹æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„<code>&lt;google-map-region&gt;</code>ç»„ä»¶,å½“<code>&lt;google-map-markers&gt;</code>åœ¨å…¶å†…éƒ¨å‡ºç°çš„æ—¶å€™,åªä¼šæ¸²æŸ“é‚£ä¸ªåŒºåŸŸå†…çš„æ ‡è®°:</p>
<pre><code class="html">&lt;google-map&gt;
    &lt;google-map-region v-bind:shape=&quot;cityBoundaries&quot;&gt;
        &lt;google-map-markers v-bind:places=&quot;iceCreamShops&quot;&gt;&lt;/google-map-markers&gt;
    &lt;/google-map-region&gt;
&lt;/google-map&gt;
</code></pre>

<p>é‚£ä¹ˆåœ¨<code>&lt;google-map-markers&gt;</code>å†…éƒ¨ä½ å¯èƒ½å‘ç°è‡ªå·±éœ€è¦ä¸€äº›ç±»ä¼¼è¿™æ ·çš„<code>hack</code>:</p>
<pre><code class="javascript">var map = this.$parent.map || this.$parent.$parent.map
</code></pre>

<p>å¾ˆå¿«å®ƒå°±ä¼šå¤±æ§ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬é’ˆå¯¹éœ€è¦å‘ä»»æ„æ›´æ·±å±‚çº§çš„ç»„ä»¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯æ—¶æ¨èä¾èµ–æ³¨å…¥çš„åŸå› ã€‚</p>
<blockquote>
<ul>
<li><strong>è®¿é—®å­ç»„ä»¶å®ä¾‹æˆ–å­å…ƒç´ </strong></li>
</ul>
</blockquote>
<p>å°½ç®¡å­˜åœ¨<code>prop</code>å’Œäº‹ä»¶,æœ‰çš„æ—¶å€™ä½ ä»å¯èƒ½éœ€è¦åœ¨JavaScripté‡Œç›´æ¥è®¿é—®ä¸€ä¸ªå­ç»„ä»¶ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„,ä½ å¯ä»¥é€šè¿‡<code>ref</code>ç‰¹æ€§ä¸ºè¿™ä¸ªå­ç»„ä»¶èµ‹äºˆä¸€ä¸ªIDå¼•ç”¨ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;base-input ref=&quot;usernameInput&quot;&gt;&lt;/base-input&gt;
</code></pre>

<p>ç°åœ¨åœ¨ä½ å·²ç»å®šä¹‰äº†è¿™ä¸ªrefçš„ç»„ä»¶é‡Œ,ä½ å¯ä»¥ä½¿ç”¨:</p>
<pre><code class="javascript">this.$refs.usernameInput
</code></pre>

<p>æ¥è®¿é—®è¿™ä¸ª<code>&lt;base-input&gt;</code>å®ä¾‹,ä»¥ä¾¿ä¸æ—¶ä¹‹éœ€ã€‚æ¯”å¦‚ç¨‹åºåŒ–åœ°ä»ä¸€ä¸ªçˆ¶çº§ç»„ä»¶èšç„¦è¿™ä¸ªè¾“å…¥æ¡†ã€‚åœ¨åˆšæ‰é‚£ä¸ªä¾‹å­ä¸­,è¯¥<code>&lt;base-input&gt;</code>ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»ä¼¼çš„<code>ref</code>æä¾›å¯¹å†…éƒ¨è¿™ä¸ªæŒ‡å®šå…ƒç´ çš„è®¿é—®,ä¾‹å¦‚:</p>
<pre><code class="html">&lt;input ref=&quot;input&quot;&gt;
</code></pre>

<p>ç”šè‡³å¯ä»¥é€šè¿‡å…¶çˆ¶çº§ç»„ä»¶å®šä¹‰æ–¹æ³•:</p>
<pre><code class="javascript">methods: {
    // ç”¨æ¥ä»çˆ¶çº§ç»„ä»¶èšç„¦è¾“å…¥æ¡†
    focus: function () {
        this.$refs.input.focus()
    }
}
</code></pre>

<p>è¿™æ ·å°±å…è®¸çˆ¶çº§ç»„ä»¶é€šè¿‡ä¸‹é¢çš„ä»£ç èšç„¦<code>&lt;base-input&gt;</code>é‡Œçš„è¾“å…¥æ¡†:</p>
<pre><code class="javascript">this.$refs.usernameInput.focus()
</code></pre>

<p>å½“<code>ref</code>å’Œ<code>v-for</code>ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™,ä½ å¾—åˆ°çš„å¼•ç”¨å°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å«äº†å¯¹åº”æ•°æ®æºçš„è¿™äº›å­ç»„ä»¶çš„æ•°ç»„ã€‚</p>
<p><code>$refs</code>åªä¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆä¹‹åç”Ÿæ•ˆ,å¹¶ä¸”å®ƒä»¬ä¸æ˜¯å“åº”å¼çš„ã€‚è¿™ä»…ä½œä¸ºä¸€ä¸ªç”¨äºç›´æ¥æ“ä½œå­ç»„ä»¶çš„â€œé€ƒç”Ÿèˆ±â€â€”â€”ä½ åº”è¯¥é¿å…åœ¨æ¨¡æ¿æˆ–è®¡ç®—å±æ€§ä¸­è®¿é—®<code>$refs</code>ã€‚</p>
<blockquote>
<ul>
<li><strong>ä¾èµ–æ³¨å…¥</strong></li>
</ul>
</blockquote>
<p>åœ¨æ­¤ä¹‹å‰,åœ¨æˆ‘ä»¬æè¿°è®¿é—®çˆ¶çº§ç»„ä»¶å®ä¾‹çš„æ—¶å€™,å±•ç¤ºè¿‡ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„ä¾‹å­:</p>
<pre><code class="javascript">&lt;google-map&gt;
    &lt;google-map-region v-bind:shape=&quot;cityBoundaries&quot;&gt;
        &lt;google-map-markers v-bind:places=&quot;iceCreamShops&quot;&gt;&lt;/google-map-markers&gt;
    &lt;/google-map-region&gt;
&lt;/google-map&gt;
</code></pre>

<p>åœ¨è¿™ä¸ªç»„ä»¶é‡Œ,æ‰€æœ‰<code>&lt;google-map&gt;</code>çš„åä»£éƒ½éœ€è¦è®¿é—®ä¸€ä¸ª<code>getMap</code>æ–¹æ³•,ä»¥ä¾¿çŸ¥é“è¦è·Ÿå“ªä¸ªåœ°å›¾è¿›è¡Œäº¤äº’ã€‚ä¸å¹¸çš„æ˜¯,ä½¿ç”¨<code>$parent</code>å±æ€§æ— æ³•å¾ˆå¥½çš„æ‰©å±•åˆ°æ›´æ·±å±‚çº§çš„åµŒå¥—ç»„ä»¶ä¸Šã€‚è¿™ä¹Ÿæ˜¯ä¾èµ–æ³¨å…¥çš„ç”¨æ­¦ä¹‹åœ°,å®ƒç”¨åˆ°äº†ä¸¤ä¸ªæ–°çš„å®ä¾‹é€‰é¡¹:<code>provide</code>å’Œ<code>inject</code>ã€‚</p>
<p><code>provide</code>é€‰é¡¹å…è®¸æˆ‘ä»¬æŒ‡å®šæˆ‘ä»¬æƒ³è¦æä¾›ç»™åä»£ç»„ä»¶çš„æ•°æ®/æ–¹æ³•ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­,å°±æ˜¯<code>&lt;google-map&gt;</code>å†…éƒ¨çš„<code>getMap</code>æ–¹æ³•:</p>
<pre><code class="javascript">provide: function () {
    return {
        getMap: this.getMap
    }
}
</code></pre>

<p>ç„¶ååœ¨ä»»ä½•åä»£ç»„ä»¶é‡Œ,æˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨<code>inject</code>é€‰é¡¹æ¥æ¥æ”¶æŒ‡å®šçš„æˆ‘ä»¬æƒ³è¦æ·»åŠ åœ¨è¿™ä¸ªå®ä¾‹ä¸Šçš„å±æ€§:</p>
<pre><code class="javascript">inject: ['getMap']
</code></pre>

<p>ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å®Œæ•´çš„ç¤ºä¾‹ã€‚ç›¸æ¯”<code>$parent</code>æ¥è¯´,è¿™ä¸ªç”¨æ³•å¯ä»¥è®©æˆ‘ä»¬åœ¨ä»»æ„åä»£ç»„ä»¶ä¸­è®¿é—®<code>getMap</code>,è€Œä¸éœ€è¦æš´éœ²æ•´ä¸ª<code>&lt;google-map&gt;</code>å®ä¾‹ã€‚è¿™å…è®¸æˆ‘ä»¬æ›´å¥½çš„æŒç»­ç ”å‘è¯¥ç»„ä»¶,è€Œä¸éœ€è¦æ‹…å¿ƒæˆ‘ä»¬å¯èƒ½ä¼šæ”¹å˜/ç§»é™¤ä¸€äº›å­ç»„ä»¶ä¾èµ–çš„ä¸œè¥¿ã€‚åŒæ—¶è¿™äº›ç»„ä»¶ä¹‹é—´çš„æ¥å£æ˜¯å§‹ç»ˆæ˜ç¡®å®šä¹‰çš„,å°±å’Œ<code>props</code>ä¸€æ ·ã€‚</p>
<p>å®é™…ä¸Š,ä½ å¯ä»¥æŠŠä¾èµ–æ³¨å…¥çœ‹ä½œä¸€éƒ¨åˆ†â€œå¤§èŒƒå›´æœ‰æ•ˆçš„<code>prop</code>â€,é™¤äº†:</p>
<blockquote>
<ol>
<li>ç¥–å…ˆç»„ä»¶ä¸éœ€è¦çŸ¥é“å“ªäº›åä»£ç»„ä»¶ä½¿ç”¨å®ƒæä¾›çš„å±æ€§</li>
<li>åä»£ç»„ä»¶ä¸éœ€è¦çŸ¥é“è¢«æ³¨å…¥çš„å±æ€§æ¥è‡ªå“ªé‡Œ</li>
</ol>
</blockquote>
<p>ç„¶è€Œ,ä¾èµ–æ³¨å…¥è¿˜æ˜¯æœ‰è´Ÿé¢å½±å“çš„ã€‚å®ƒå°†ä½ åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶ä¸å®ƒä»¬å½“å‰çš„ç»„ç»‡æ–¹å¼è€¦åˆèµ·æ¥,ä½¿é‡æ„å˜å¾—æ›´åŠ å›°éš¾ã€‚åŒæ—¶æ‰€æä¾›çš„å±æ€§æ˜¯éå“åº”å¼çš„ã€‚è¿™æ˜¯å‡ºäºè®¾è®¡çš„è€ƒè™‘,å› ä¸ºä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ªä¸­å¿ƒåŒ–è§„æ¨¡åŒ–çš„æ•°æ®è·Ÿä½¿ç”¨<code>$root</code>åšè¿™ä»¶äº‹éƒ½æ˜¯ä¸å¤Ÿå¥½çš„ã€‚å¦‚æœä½ æƒ³è¦å…±äº«çš„è¿™ä¸ªå±æ€§æ˜¯ä½ çš„åº”ç”¨ç‰¹æœ‰çš„,è€Œä¸æ˜¯é€šç”¨åŒ–çš„,æˆ–è€…å¦‚æœä½ æƒ³åœ¨ç¥–å…ˆç»„ä»¶ä¸­æ›´æ–°æ‰€æä¾›çš„æ•°æ®,é‚£ä¹ˆè¿™æ„å‘³ç€ä½ å¯èƒ½éœ€è¦æ¢ç”¨ä¸€ä¸ªåƒVuexè¿™æ ·çœŸæ­£çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆäº†ã€‚</p>
<p>ä½ å¯ä»¥åœ¨<a href="https://cn.vuejs.org/v2/api/#provide-inject">APIå‚è€ƒæ–‡æ¡£</a>å­¦ä¹ æ›´å¤šå…³äºä¾èµ–æ³¨å…¥çš„çŸ¥è¯†ã€‚</p>
<ul>
<li><strong>ç¨‹åºåŒ–çš„äº‹ä»¶ä¾¦å¬å™¨</strong></li>
</ul>
<p>ç°åœ¨,ä½ å·²ç»çŸ¥é“äº†<code>$emit</code>çš„ç”¨æ³•,å®ƒå¯ä»¥è¢«<code>v-on</code>ä¾¦å¬,ä½†æ˜¯Vueå®ä¾‹åŒæ—¶åœ¨å…¶äº‹ä»¶æ¥å£ä¸­æä¾›äº†å…¶å®ƒçš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥:</p>
<blockquote>
<ol>
<li>é€šè¿‡<code>$on(eventName, eventHandler)</code>ä¾¦å¬ä¸€ä¸ªäº‹ä»¶</li>
<li>é€šè¿‡<code>$once(eventName, eventHandler)</code>ä¸€æ¬¡æ€§ä¾¦å¬ä¸€ä¸ªäº‹ä»¶</li>
<li>é€šè¿‡<code>$off(eventName, eventHandler)</code>åœæ­¢ä¾¦å¬ä¸€ä¸ªäº‹ä»¶</li>
</ol>
</blockquote>
<p>ä½ é€šå¸¸ä¸ä¼šç”¨åˆ°è¿™äº›,ä½†æ˜¯å½“ä½ éœ€è¦åœ¨ä¸€ä¸ªç»„ä»¶å®ä¾‹ä¸Šæ‰‹åŠ¨ä¾¦å¬äº‹ä»¶æ—¶,å®ƒä»¬æ˜¯æ´¾å¾—ä¸Šç”¨åœºçš„ã€‚å®ƒä»¬ä¹Ÿå¯ä»¥ç”¨äºä»£ç ç»„ç»‡å·¥å…·ã€‚ä¾‹å¦‚,ä½ å¯èƒ½ç»å¸¸çœ‹åˆ°è¿™ç§é›†æˆä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„æ¨¡å¼:</p>
<pre><code class="javascript">// ä¸€æ¬¡æ€§å°†è¿™ä¸ªæ—¥æœŸé€‰æ‹©å™¨é™„åŠ åˆ°ä¸€ä¸ªè¾“å…¥æ¡†ä¸Š
// å®ƒä¼šè¢«æŒ‚è½½åˆ°DOMä¸Šã€‚
mounted: function () {
    // Pikadayæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ—¥æœŸé€‰æ‹©å™¨çš„åº“
    this.picker = new Pikaday({
        field: this.$refs.input,
        format: 'YYYY-MM-DD'
    })
},
// åœ¨ç»„ä»¶è¢«é”€æ¯ä¹‹å‰,
// ä¹Ÿé”€æ¯è¿™ä¸ªæ—¥æœŸé€‰æ‹©å™¨ã€‚
beforeDestroy: function () {
    this.picker.destroy()
}
</code></pre>

<p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ½œåœ¨çš„é—®é¢˜:</p>
<blockquote>
<ol>
<li>å®ƒéœ€è¦åœ¨è¿™ä¸ªç»„ä»¶å®ä¾‹ä¸­ä¿å­˜è¿™ä¸ª<code>picker</code>,å¦‚æœå¯ä»¥çš„è¯æœ€å¥½åªæœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å¯ä»¥è®¿é—®åˆ°å®ƒã€‚è¿™å¹¶ä¸ç®—ä¸¥é‡çš„é—®é¢˜,ä½†æ˜¯å®ƒå¯ä»¥è¢«è§†ä¸ºæ‚ç‰©ã€‚</li>
<li>æˆ‘ä»¬çš„å»ºç«‹ä»£ç ç‹¬ç«‹äºæˆ‘ä»¬çš„æ¸…ç†ä»£ç ,è¿™ä½¿å¾—æˆ‘ä»¬æ¯”è¾ƒéš¾äºç¨‹åºåŒ–åœ°æ¸…ç†æˆ‘ä»¬å»ºç«‹çš„æ‰€æœ‰ä¸œè¥¿ã€‚</li>
</ol>
</blockquote>
<p>ä½ åº”è¯¥é€šè¿‡ä¸€ä¸ªç¨‹åºåŒ–çš„ä¾¦å¬å™¨è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜:</p>
<pre><code class="javascript">mounted: function () {
    var picker = new Pikaday({
        field: this.$refs.input,
        format: 'YYYY-MM-DD'
    })

    this.$once('hook:beforeDestroy', function () {
        picker.destroy()
    })
}
</code></pre>

<p>ä½¿ç”¨äº†è¿™ä¸ªç­–ç•¥,æˆ‘ç”šè‡³å¯ä»¥è®©å¤šä¸ªè¾“å…¥æ¡†å…ƒç´ åŒæ—¶ä½¿ç”¨ä¸åŒçš„ Pikaday,æ¯ä¸ªæ–°çš„å®ä¾‹éƒ½ç¨‹åºåŒ–åœ°åœ¨åæœŸæ¸…ç†å®ƒè‡ªå·±:</p>
<pre><code class="javascript">mounted: function () {
    this.attachDatepicker('startDateInput')
    this.attachDatepicker('endDateInput')
},
methods: {
    attachDatepicker: function (refName) {
        var picker = new Pikaday({
            field: this.$refs[refName],
            format: 'YYYY-MM-DD'
        })

        this.$once('hook:beforeDestroy', function () {
            picker.destroy()
        })
    }
}
</code></pre>

<p>æŸ¥é˜…è¿™ä¸ª<a href="https://jsfiddle.net/chrisvfritz/1Leb7up8/">fiddle</a>å¯ä»¥äº†è§£åˆ°å®Œæ•´çš„ä»£ç ã€‚æ³¨æ„,å³ä¾¿å¦‚æ­¤,å¦‚æœä½ å‘ç°è‡ªå·±ä¸å¾—ä¸åœ¨å•ä¸ªç»„ä»¶é‡Œåšå¾ˆå¤šå»ºç«‹å’Œæ¸…ç†çš„å·¥ä½œ,æœ€å¥½çš„æ–¹å¼é€šå¸¸è¿˜æ˜¯åˆ›å»ºæ›´å¤šçš„æ¨¡å—åŒ–ç»„ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­,æˆ‘ä»¬æ¨èåˆ›å»ºä¸€ä¸ªå¯å¤ç”¨çš„<code>&lt;input-datepicker&gt;</code>ç»„ä»¶ã€‚</p>
<p>æƒ³äº†è§£æ›´å¤šç¨‹åºåŒ–ä¾¦å¬å™¨çš„å†…å®¹,è¯·æŸ¥é˜…å®ä¾‹æ–¹æ³•/äº‹ä»¶ç›¸å…³çš„<a href="https://cn.vuejs.org/v2/api/#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95-%E4%BA%8B%E4%BB%B6">API</a>ã€‚</p>
<ul>
<li><strong>å¾ªç¯å¼•ç”¨</strong></li>
</ul>
<blockquote>
<ul>
<li><strong>é€’å½’ç»„ä»¶</strong></li>
</ul>
</blockquote>
<p>ç»„ä»¶æ˜¯å¯ä»¥åœ¨å®ƒä»¬è‡ªå·±çš„æ¨¡æ¿ä¸­è°ƒç”¨è‡ªèº«çš„ã€‚ä¸è¿‡å®ƒä»¬åªèƒ½é€šè¿‡<code>name</code>é€‰é¡¹æ¥åšè¿™ä»¶äº‹:</p>
<pre><code class="javascript">name: 'unique-name-of-my-component'
</code></pre>

<p>å½“ä½ ä½¿ç”¨<code>Vue.component</code>å…¨å±€æ³¨å†Œä¸€ä¸ªç»„ä»¶æ—¶,è¿™ä¸ªå…¨å±€çš„IDä¼šè‡ªåŠ¨è®¾ç½®ä¸ºè¯¥ç»„ä»¶çš„<code>name</code>é€‰é¡¹ã€‚</p>
<pre><code class="javascript">Vue.component('unique-name-of-my-component', {
    // ...
})
</code></pre>

<p>ç¨æœ‰ä¸æ…,é€’å½’ç»„ä»¶å°±å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯:</p>
<pre><code class="html">name: 'stack-overflow',
template: '&lt;div&gt;&lt;stack-overflow&gt;&lt;/stack-overflow&gt;&lt;/div&gt;'
</code></pre>

<p>ç±»ä¼¼ä¸Šè¿°çš„ç»„ä»¶å°†ä¼šå¯¼è‡´â€œmax stack size exceededâ€é”™è¯¯,æ‰€ä»¥è¯·ç¡®ä¿é€’å½’è°ƒç”¨æ˜¯æ¡ä»¶æ€§çš„(ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªæœ€ç»ˆä¼šå¾—åˆ°<code>false</code>çš„<code>v-if</code>)ã€‚</p>
<blockquote>
<ul>
<li><strong>ç»„ä»¶ä¹‹é—´çš„å¾ªç¯å¼•ç”¨</strong></li>
</ul>
</blockquote>
<p>å‡è®¾ä½ éœ€è¦æ„å»ºä¸€ä¸ªæ–‡ä»¶ç›®å½•æ ‘,åƒè®¿è¾¾æˆ–èµ„æºç®¡ç†å™¨é‚£æ ·çš„ã€‚ä½ å¯èƒ½æœ‰ä¸€ä¸ª<code>&lt;tree-folder&gt;</code>ç»„ä»¶,æ¨¡æ¿æ˜¯è¿™æ ·çš„:</p>
<pre><code class="html">&lt;p&gt;
    &lt;span&gt;{{ folder.name }}&lt;/span&gt;
    &lt;tree-folder-contents :children=&quot;folder.children&quot;/&gt;
&lt;/p&gt;
</code></pre>

<p>è¿˜æœ‰ä¸€ä¸ª<code>&lt;tree-folder-contents&gt;</code>ç»„ä»¶,æ¨¡æ¿æ˜¯è¿™æ ·çš„:</p>
<pre><code class="html">&lt;ul&gt;
    &lt;li v-for=&quot;child in children&quot;&gt;
        &lt;tree-folder v-if=&quot;child.children&quot; :folder=&quot;child&quot;/&gt;
        &lt;span v-else&gt;{{ child.name }}&lt;/span&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>å½“ä½ ä»”ç»†è§‚å¯Ÿçš„æ—¶å€™,ä½ ä¼šå‘ç°è¿™äº›ç»„ä»¶åœ¨æ¸²æŸ“æ ‘ä¸­äº’ä¸ºå¯¹æ–¹çš„åä»£å’Œç¥–å…ˆâ€”â€”ä¸€ä¸ªæ‚–è®º!å½“é€šè¿‡<code>Vue.component</code>å…¨å±€æ³¨å†Œç»„ä»¶çš„æ—¶å€™,è¿™ä¸ªæ‚–è®ºä¼šè¢«è‡ªåŠ¨è§£å¼€ã€‚å¦‚æœä½ æ˜¯è¿™æ ·åšçš„,é‚£ä¹ˆä½ å¯ä»¥è·³è¿‡è¿™é‡Œã€‚</p>
<p>ç„¶è€Œ,å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªæ¨¡å—ç³»ç»Ÿä¾èµ–/å¯¼å…¥ç»„ä»¶,ä¾‹å¦‚é€šè¿‡webpackæˆ–Browserify,ä½ ä¼šé‡åˆ°ä¸€ä¸ªé”™è¯¯:</p>
<pre><code class="html">Failed to mount component: template or render function not defined.
</code></pre>

<p>ä¸ºäº†è§£é‡Šè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆ,æˆ‘ä»¬å…ˆæŠŠä¸¤ä¸ªç»„ä»¶ç§°ä¸º<code>A</code>å’Œ<code>B</code>ã€‚æ¨¡å—ç³»ç»Ÿå‘ç°å®ƒéœ€è¦<code>A</code>,ä½†æ˜¯é¦–å…ˆ<code>A</code>ä¾èµ–<code>B</code>,ä½†æ˜¯<code>B</code>åˆä¾èµ–<code>A</code>,ä½†æ˜¯<code>A</code>åˆä¾èµ–<code>B</code>,å¦‚æ­¤å¾€å¤ã€‚è¿™å˜æˆäº†ä¸€ä¸ªå¾ªç¯,ä¸çŸ¥é“å¦‚ä½•ä¸ç»è¿‡å…¶ä¸­ä¸€ä¸ªç»„ä»¶è€Œå®Œå…¨è§£æå‡ºå¦ä¸€ä¸ªç»„ä»¶ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬éœ€è¦ç»™æ¨¡å—ç³»ç»Ÿä¸€ä¸ªç‚¹,åœ¨é‚£é‡Œâ€œ<code>A</code>åæ­£æ˜¯éœ€è¦<code>B</code>çš„,ä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦å…ˆè§£æ<code>B</code>ã€‚â€</p>
<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­,æŠŠ<code>&lt;tree-folder&gt;</code>ç»„ä»¶è®¾ä¸ºäº†é‚£ä¸ªç‚¹ã€‚æˆ‘ä»¬çŸ¥é“é‚£ä¸ªäº§ç”Ÿæ‚–è®ºçš„å­ç»„ä»¶æ˜¯<code>&lt;tree-folder-contents&gt;</code> ç»„ä»¶,æ‰€ä»¥æˆ‘ä»¬ä¼šç­‰åˆ°ç”Ÿå‘½å‘¨æœŸé’©å­<code>beforeCreate</code>æ—¶å»æ³¨å†Œå®ƒ:</p>
<pre><code class="javascript">beforeCreate: function () {
    this.$options.components.TreeFolderContents = require('./tree-folder-contents.vue').default
}
</code></pre>

<p>æˆ–è€…,åœ¨æœ¬åœ°æ³¨å†Œç»„ä»¶çš„æ—¶å€™,ä½ å¯ä»¥ä½¿ç”¨ webpack çš„å¼‚æ­¥ import:</p>
<pre><code class="javascript">components: {
    TreeFolderContents: () =&gt; import('./tree-folder-contents.vue')
}
</code></pre>

<p>è¿™æ ·é—®é¢˜å°±è§£å†³äº†!</p>
<ul>
<li><strong>æ¨¡æ¿å®šä¹‰çš„æ›¿ä»£å“</strong></li>
</ul>
<blockquote>
<ul>
<li><strong>å†…è”æ¨¡æ¿</strong></li>
</ul>
</blockquote>
<p>å½“<code>inline-template</code>è¿™ä¸ªç‰¹æ®Šçš„ç‰¹æ€§å‡ºç°åœ¨ä¸€ä¸ªå­ç»„ä»¶ä¸Šæ—¶,è¿™ä¸ªç»„ä»¶å°†ä¼šä½¿ç”¨å…¶é‡Œé¢çš„å†…å®¹ä½œä¸ºæ¨¡æ¿,è€Œä¸æ˜¯å°†å…¶ä½œä¸ºè¢«åˆ†å‘çš„å†…å®¹ã€‚è¿™ä½¿å¾—æ¨¡æ¿çš„æ’°å†™å·¥ä½œæ›´åŠ çµæ´»ã€‚</p>
<pre><code class="html">&lt;my-component inline-template&gt;
    &lt;div&gt;
        &lt;p&gt;These are compiled as the component's own template.&lt;/p&gt;
        &lt;p&gt;Not parent's transclusion content.&lt;/p&gt;
    &lt;/div&gt;
&lt;/my-component&gt;
</code></pre>

<p>å†…è”æ¨¡æ¿éœ€è¦å®šä¹‰åœ¨Vueæ‰€å±çš„<code>DOM</code>å…ƒç´ å†…ã€‚</p>
<p>ä¸è¿‡,<code>inline-template</code>ä¼šè®©æ¨¡æ¿çš„ä½œç”¨åŸŸå˜å¾—æ›´åŠ éš¾ä»¥ç†è§£ã€‚æ‰€ä»¥ä½œä¸ºæœ€ä½³å®è·µ,è¯·åœ¨ç»„ä»¶å†…ä¼˜å…ˆé€‰æ‹©<code>template</code>é€‰é¡¹æˆ–<code>.vue</code>æ–‡ä»¶é‡Œçš„ä¸€ä¸ª<code>&lt;template&gt;</code>å…ƒç´ æ¥å®šä¹‰æ¨¡æ¿ã€‚</p>
<blockquote>
<ul>
<li><strong><code>X-Template</code></strong></li>
</ul>
</blockquote>
<p>å¦ä¸€ä¸ªå®šä¹‰æ¨¡æ¿çš„æ–¹å¼æ˜¯åœ¨ä¸€ä¸ª<code>&lt;script&gt;</code>å…ƒç´ ä¸­,å¹¶ä¸ºå…¶å¸¦ä¸Š<code>text/x-template</code>çš„ç±»å‹,ç„¶åé€šè¿‡ä¸€ä¸ª<code>id</code>å°†æ¨¡æ¿å¼•ç”¨è¿‡å»ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;script type=&quot;text/x-template&quot; id=&quot;hello-world-template&quot;&gt;
    &lt;p&gt;Hello hello hello&lt;/p&gt;
&lt;/script&gt;
Vue.component('hello-world', {
    template: '#hello-world-template'
})
</code></pre>

<p><code>x-template</code>éœ€è¦å®šä¹‰åœ¨Vueæ‰€å±çš„<code>DOM</code>å…ƒç´ å¤–ã€‚</p>
<p>è¿™äº›å¯ä»¥ç”¨äºæ¨¡æ¿ç‰¹åˆ«å¤§çš„demoæˆ–æå°å‹çš„åº”ç”¨,ä½†æ˜¯å…¶å®ƒæƒ…å†µä¸‹è¯·é¿å…ä½¿ç”¨,å› ä¸ºè¿™ä¼šå°†æ¨¡æ¿å’Œè¯¥ç»„ä»¶çš„å…¶å®ƒå®šä¹‰åˆ†ç¦»å¼€ã€‚</p>
<ul>
<li><strong>æ§åˆ¶æ›´æ–°</strong></li>
</ul>
<p>æ„Ÿè°¢Vueçš„å“åº”å¼ç³»ç»Ÿ,å®ƒå§‹ç»ˆçŸ¥é“ä½•æ—¶è¿›è¡Œæ›´æ–°(å¦‚æœä½ ç”¨å¯¹äº†çš„è¯)ã€‚ä¸è¿‡è¿˜æ˜¯æœ‰ä¸€äº›è¾¹ç•Œæƒ…å†µ,ä½ æƒ³è¦å¼ºåˆ¶æ›´æ–°,å°½ç®¡è¡¨é¢ä¸Šçœ‹å“åº”å¼çš„æ•°æ®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚ä¹Ÿæœ‰ä¸€äº›æƒ…å†µæ˜¯ä½ æƒ³é˜»æ­¢ä¸å¿…è¦çš„æ›´æ–°ã€‚</p>
<blockquote>
<ul>
<li><strong>å¼ºåˆ¶æ›´æ–°</strong></li>
</ul>
</blockquote>
<p>å¦‚æœä½ å‘ç°ä½ è‡ªå·±éœ€è¦åœ¨ Vue ä¸­åšä¸€æ¬¡å¼ºåˆ¶æ›´æ–°,99.9%çš„æƒ…å†µ,æ˜¯ä½ åœ¨æŸä¸ªåœ°æ–¹åšé”™äº†äº‹ã€‚</p>
<p>ä½ å¯èƒ½è¿˜æ²¡æœ‰ç•™æ„åˆ°æ•°ç»„æˆ–å¯¹è±¡çš„å˜æ›´æ£€æµ‹æ³¨æ„äº‹é¡¹,æˆ–è€…ä½ å¯èƒ½ä¾èµ–äº†ä¸€ä¸ªæœªè¢«Vueçš„å“åº”å¼ç³»ç»Ÿè¿½è¸ªçš„çŠ¶æ€ã€‚ç„¶è€Œ,å¦‚æœä½ å·²ç»åšåˆ°äº†ä¸Šè¿°çš„äº‹é¡¹ä»ç„¶å‘ç°åœ¨æå°‘æ•°çš„æƒ…å†µä¸‹éœ€è¦æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°,é‚£ä¹ˆä½ å¯ä»¥é€šè¿‡<code>$forceUpdate</code>æ¥åšè¿™ä»¶äº‹ã€‚</p>
<blockquote>
<ul>
<li><strong>é€šè¿‡<code>v-once</code>åˆ›å»ºä½å¼€é”€çš„é™æ€ç»„ä»¶</strong></li>
</ul>
</blockquote>
<p>æ¸²æŸ“æ™®é€šçš„HTMLå…ƒç´ åœ¨Vueä¸­æ˜¯éå¸¸å¿«é€Ÿçš„,ä½†æœ‰çš„æ—¶å€™ä½ å¯èƒ½æœ‰ä¸€ä¸ªç»„ä»¶,è¿™ä¸ªç»„ä»¶åŒ…å«äº†å¤§é‡é™æ€å†…å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ å¯ä»¥åœ¨æ ¹å…ƒç´ ä¸Šæ·»åŠ <code>v-once</code>ç‰¹æ€§ä»¥ç¡®ä¿è¿™äº›å†…å®¹åªè®¡ç®—ä¸€æ¬¡ç„¶åç¼“å­˜èµ·æ¥,å°±åƒè¿™æ ·:</p>
<pre><code class="javascript">Vue.component('terms-of-service', {
    template: `
        &lt;div v-once&gt;
            &lt;h1&gt;Terms of Service&lt;/h1&gt;
            ... a lot of static content ...
        &lt;/div&gt;
    `
})
</code></pre>

<p>å†è¯´ä¸€æ¬¡,è¯•ç€ä¸è¦è¿‡åº¦ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ã€‚å½“ä½ éœ€è¦æ¸²æŸ“å¤§é‡é™æ€å†…å®¹æ—¶,æå°‘æ•°çš„æƒ…å†µä¸‹å®ƒä¼šç»™ä½ å¸¦æ¥ä¾¿åˆ©,é™¤éä½ éå¸¸ç•™æ„æ¸²æŸ“å˜æ…¢äº†,ä¸ç„¶å®ƒå®Œå…¨æ˜¯æ²¡æœ‰å¿…è¦çš„â€”â€”å†åŠ ä¸Šå®ƒåœ¨åæœŸä¼šå¸¦æ¥å¾ˆå¤šå›°æƒ‘ã€‚ä¾‹å¦‚,è®¾æƒ³å¦ä¸€ä¸ªå¼€å‘è€…å¹¶ä¸ç†Ÿæ‚‰<code>v-once</code>æˆ–æ¼çœ‹äº†å®ƒåœ¨æ¨¡æ¿ä¸­,ä»–ä»¬å¯èƒ½ä¼šèŠ±å¾ˆå¤šä¸ªå°æ—¶å»æ‰¾å‡ºæ¨¡æ¿ä¸ºä»€ä¹ˆæ— æ³•æ­£ç¡®æ›´æ–°ã€‚</p>
<h2 id="_3">ä¸‰ã€è¿‡æ¸¡&amp;åŠ¨ç”»</h2>
<h3 id="31">3.1 è¿›å…¥/ç¦»å¼€&amp;åˆ—è¡¨è¿‡æ¸¡</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>
Vueåœ¨æ’å…¥ã€æ›´æ–°æˆ–è€…ç§»é™¤DOMæ—¶,æä¾›å¤šç§ä¸åŒæ–¹å¼çš„åº”ç”¨è¿‡æ¸¡æ•ˆæœã€‚åŒ…æ‹¬ä»¥ä¸‹å·¥å…·:</li>
</ul>
<blockquote>
<ol>
<li>åœ¨<code>CSS</code>è¿‡æ¸¡å’ŒåŠ¨ç”»ä¸­è‡ªåŠ¨åº”ç”¨<code>class</code></li>
<li>å¯ä»¥é…åˆä½¿ç”¨ç¬¬ä¸‰æ–¹<code>CSS</code>åŠ¨ç”»åº“,å¦‚<code>Animate.css</code></li>
<li>åœ¨è¿‡æ¸¡é’©å­å‡½æ•°ä¸­ä½¿ç”¨JavaScriptç›´æ¥æ“ä½œ<code>DOM</code></li>
<li>å¯ä»¥é…åˆä½¿ç”¨ç¬¬ä¸‰æ–¹JavaScriptåŠ¨ç”»åº“,å¦‚<code>Velocity.js</code></li>
</ol>
</blockquote>
<p>åœ¨è¿™é‡Œ,æˆ‘ä»¬åªä¼šè®²åˆ°è¿›å…¥ã€ç¦»å¼€å’Œåˆ—è¡¨çš„è¿‡æ¸¡,ä½ ä¹Ÿå¯ä»¥çœ‹ä¸‹ä¸€èŠ‚çš„ç®¡ç†è¿‡æ¸¡çŠ¶æ€ã€‚</p>
<ul>
<li><strong>å•å…ƒç´ /ç»„ä»¶çš„è¿‡æ¸¡</strong></li>
</ul>
<p>Vueæä¾›äº†transitionçš„å°è£…ç»„ä»¶,åœ¨ä¸‹åˆ—æƒ…å½¢ä¸­,å¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥/ç¦»å¼€è¿‡æ¸¡:æ¡ä»¶æ¸²æŸ“(ä½¿ç”¨<code>v-if</code>),æ¡ä»¶å±•ç¤º(ç”¨<code>v-show</code>),åŠ¨æ€ç»„ä»¶,ç»„ä»¶æ ¹èŠ‚ç‚¹ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­:</p>
<pre><code class="html">&lt;div id=&quot;demo&quot;&gt;
    &lt;button v-on:click=&quot;show = !show&quot;&gt;
        Toggle
    &lt;/button&gt;
    &lt;transition name=&quot;fade&quot;&gt;
        &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;
    &lt;/transition&gt;
&lt;/div&gt;
new Vue({
    el: '#demo',
    data: {
        show: true
    }
})
.fade-enter-active, .fade-leave-active {
    transition: opacity .5s;
}
.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {
    opacity: 0;
}
</code></pre>

<p>å½“æ’å…¥æˆ–åˆ é™¤åŒ…å«åœ¨<code>transition</code>ç»„ä»¶ä¸­çš„å…ƒç´ æ—¶,Vueå°†ä¼šåšä»¥ä¸‹å¤„ç†:</p>
<blockquote>
<ol>
<li>è‡ªåŠ¨å—…æ¢ç›®æ ‡å…ƒç´ æ˜¯å¦åº”ç”¨äº†CSSè¿‡æ¸¡æˆ–åŠ¨ç”»,å¦‚æœæ˜¯,åœ¨æ°å½“çš„æ—¶æœºæ·»åŠ /åˆ é™¤CSSç±»åã€‚</li>
<li>å¦‚æœè¿‡æ¸¡ç»„ä»¶æä¾›äº†JavaScripté’©å­å‡½æ•°,è¿™äº›é’©å­å‡½æ•°å°†åœ¨æ°å½“çš„æ—¶æœºè¢«è°ƒç”¨ã€‚</li>
<li>
<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°JavaScripté’©å­å¹¶ä¸”ä¹Ÿæ²¡æœ‰æ£€æµ‹åˆ°<code>CSS</code>è¿‡æ¸¡/åŠ¨ç”»,<code>DOM</code>æ“ä½œ(æ’å…¥/åˆ é™¤)åœ¨ä¸‹ä¸€å¸§ä¸­ç«‹å³æ‰§è¡Œã€‚(æ³¨æ„:æ­¤æŒ‡æµè§ˆå™¨é€å¸§åŠ¨ç”»æœºåˆ¶,å’ŒVueçš„nextTickæ¦‚å¿µä¸åŒ)</p>
</li>
<li>
<p><strong>è¿‡æ¸¡çš„ç±»å</strong></p>
</li>
</ol>
</blockquote>
<p>åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­,ä¼šæœ‰6ä¸ª<code>class</code>åˆ‡æ¢ã€‚</p>
<blockquote>
<ol>
<li><code>v-enter</code>:å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆ,åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚</li>
<li><code>v-enter-active</code>:å®šä¹‰è¿›å…¥è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨,åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆ,åœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´,å»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</li>
<li><code>v-enter-to</code>: å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ(ä¸æ­¤åŒæ—¶<code>v-enter</code>è¢«ç§»é™¤),åœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</li>
<li><code>v-leave</code>: å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆ,ä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚</li>
<li><code>v-leave-active</code>:å®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨,åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆ,åœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´,å»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚</li>
<li><code>v-leave-to</code>: å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ(ä¸æ­¤åŒæ—¶<code>v-leave</code>è¢«åˆ é™¤),åœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚</li>
</ol>
</blockquote>
<p><img alt="" src="http://cn.vuejs.org/images/transition.png" /></p>
<p>å¯¹äºè¿™äº›åœ¨è¿‡æ¸¡ä¸­åˆ‡æ¢çš„ç±»åæ¥è¯´,å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰åå­—çš„<code>&lt;transition&gt;</code>,åˆ™<code>v-</code>æ˜¯è¿™äº›ç±»åçš„é»˜è®¤å‰ç¼€ã€‚å¦‚æœä½ ä½¿ç”¨äº†<code>&lt;transition name="my-transition"&gt;</code>,é‚£ä¹ˆ<code>v-enter</code>ä¼šæ›¿æ¢ä¸º<code>my-transition-enter</code>ã€‚</p>
<p><code>v-enter-active</code>å’Œ<code>v-leave-active</code>å¯ä»¥æ§åˆ¶è¿›å…¥/ç¦»å¼€è¿‡æ¸¡çš„ä¸åŒçš„ç¼“å’Œæ›²çº¿,åœ¨ä¸‹é¢ç« èŠ‚ä¼šæœ‰ä¸ªç¤ºä¾‹è¯´æ˜ã€‚</p>
<blockquote>
<ul>
<li><strong><code>CSS</code>è¿‡æ¸¡</strong></li>
</ul>
</blockquote>
<p>å¸¸ç”¨çš„è¿‡æ¸¡éƒ½æ˜¯ä½¿ç”¨<code>CSS</code>è¿‡æ¸¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•ä¾‹å­:</p>
<pre><code class="javascript">&lt;div id=&quot;example-1&quot;&gt;
    &lt;button @click=&quot;show = !show&quot;&gt;
        Toggle render
    &lt;/button&gt;
    &lt;transition name=&quot;slide-fade&quot;&gt;
        &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;
    &lt;/transition&gt;
&lt;/div&gt;
new Vue({
    el: '#example-1',
    data: {
        show: true
    }
})
/* å¯ä»¥è®¾ç½®ä¸åŒçš„è¿›å…¥å’Œç¦»å¼€åŠ¨ç”» */
/* è®¾ç½®æŒç»­æ—¶é—´å’ŒåŠ¨ç”»å‡½æ•° */
.slide-fade-enter-active {
    transition: all .3s ease;
}
.slide-fade-leave-active {
    transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);
}
.slide-fade-enter, .slide-fade-leave-to
    /* .slide-fade-leave-active for below version 2.1.8 */ {
    transform: translateX(10px);
    opacity: 0;
}
</code></pre>

<blockquote>
<ul>
<li><strong><code>CSS</code>åŠ¨ç”»</strong></li>
</ul>
</blockquote>
<p><code>CSS</code>åŠ¨ç”»ç”¨æ³•åŒ<code>CSS</code>è¿‡æ¸¡,åŒºåˆ«æ˜¯åœ¨åŠ¨ç”»ä¸­<code>v-enter</code>ç±»ååœ¨èŠ‚ç‚¹æ’å…¥<code>DOM</code>åä¸ä¼šç«‹å³åˆ é™¤,è€Œæ˜¯åœ¨<code>animationend</code>äº‹ä»¶è§¦å‘æ—¶åˆ é™¤ã€‚</p>
<p>ç¤ºä¾‹:(çœç•¥äº†å…¼å®¹æ€§å‰ç¼€)</p>
<pre><code class="html">&lt;div id=&quot;example-2&quot;&gt;
    &lt;button @click=&quot;show = !show&quot;&gt;Toggle show&lt;/button&gt;
    &lt;transition name=&quot;bounce&quot;&gt;
        &lt;p v-if=&quot;show&quot;&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.&lt;/p&gt;
    &lt;/transition&gt;
&lt;/div&gt;
new Vue({
    el: '#example-2',
    data: {
        show: true
    }
})
.bounce-enter-active {
    animation: bounce-in .5s;
}
.bounce-leave-active {
    animation: bounce-in .5s reverse;
}
@keyframes bounce-in {
    0% {
        transform: scale(0);
    }
    50% {
        transform: scale(1.5);
    }
    100% {
        transform: scale(1);
    }
}
</code></pre>

<blockquote>
<ul>
<li><strong>è‡ªå®šä¹‰è¿‡æ¸¡çš„ç±»å</strong></li>
</ul>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ç‰¹æ€§æ¥è‡ªå®šä¹‰è¿‡æ¸¡ç±»å:<code>enter-class</code>,<code>enter-active-class</code>,<code>enter-to-class</code>,<code>leave-class</code>,<code>leave-active-class</code>å’Œ<code>leave-to-class</code>ã€‚</p>
<p>ä»–ä»¬çš„ä¼˜å…ˆçº§é«˜äºæ™®é€šçš„ç±»å,è¿™å¯¹äºVueçš„è¿‡æ¸¡ç³»ç»Ÿå’Œå…¶ä»–ç¬¬ä¸‰æ–¹<code>CSS</code>åŠ¨ç”»åº“,å¦‚<code>Animate.css</code>ç»“åˆä½¿ç”¨ååˆ†æœ‰ç”¨ã€‚ç¤ºä¾‹:</p>
<pre><code class="html">&lt;link href=&quot;https://cdn.jsdelivr.net/npm/animate.css@3.5.1&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;

&lt;div id=&quot;example-3&quot;&gt;
  &lt;button @click=&quot;show = !show&quot;&gt;
    Toggle render
  &lt;/button&gt;
  &lt;transition
    name=&quot;custom-classes-transition&quot;
    enter-active-class=&quot;animated tada&quot;
    leave-active-class=&quot;animated bounceOutRight&quot;
  &gt;
    &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;
  &lt;/transition&gt;
&lt;/div&gt;
new Vue({
  el: '#example-3',
  data: {
    show: true
  }
})
</code></pre>

<blockquote>
<ul>
<li><strong>åŒæ—¶ä½¿ç”¨è¿‡æ¸¡å’ŒåŠ¨ç”»</strong></li>
</ul>
</blockquote>
<p>Vueä¸ºäº†çŸ¥é“è¿‡æ¸¡çš„å®Œæˆ,å¿…é¡»è®¾ç½®ç›¸åº”çš„äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥æ˜¯<code>transitionend</code>æˆ–<code>animationend</code>,è¿™å–å†³äºç»™å…ƒç´ åº”ç”¨çš„<code>CSS</code>è§„åˆ™ã€‚å¦‚æœä½ ä½¿ç”¨å…¶ä¸­ä»»ä½•ä¸€ç§,Vueèƒ½è‡ªåŠ¨è¯†åˆ«ç±»å‹å¹¶è®¾ç½®ç›‘å¬ã€‚</p>
<p>ä½†æ˜¯,åœ¨ä¸€äº›åœºæ™¯ä¸­,ä½ éœ€è¦ç»™åŒä¸€ä¸ªå…ƒç´ åŒæ—¶è®¾ç½®ä¸¤ç§è¿‡æ¸¡åŠ¨æ•ˆ,æ¯”å¦‚<code>animation</code>å¾ˆå¿«çš„è¢«è§¦å‘å¹¶å®Œæˆäº†,è€Œ<code>transition</code>æ•ˆæœè¿˜æ²¡ç»“æŸã€‚åœ¨è¿™ç§æƒ…å†µä¸­,ä½ å°±éœ€è¦ä½¿ç”¨<code>type</code>ç‰¹æ€§å¹¶è®¾ç½®<code>animation</code>æˆ–<code>transition</code>æ¥æ˜ç¡®å£°æ˜ä½ éœ€è¦Vueç›‘å¬çš„ç±»å‹ã€‚</p>
<blockquote>
<ul>
<li><strong>æ˜¾æ€§çš„è¿‡æ¸¡æŒç»­æ—¶é—´</strong></li>
</ul>
</blockquote>
<p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹,Vueå¯ä»¥è‡ªåŠ¨å¾—å‡ºè¿‡æ¸¡æ•ˆæœçš„å®Œæˆæ—¶æœºã€‚é»˜è®¤æƒ…å†µä¸‹,Vueä¼šç­‰å¾…å…¶åœ¨è¿‡æ¸¡æ•ˆæœçš„æ ¹å…ƒç´ çš„ç¬¬ä¸€ä¸ª<code>transitionend</code>æˆ–<code>animationend</code>äº‹ä»¶ã€‚ç„¶è€Œä¹Ÿå¯ä»¥ä¸è¿™æ ·è®¾å®šâ€”â€”æ¯”å¦‚,æˆ‘ä»¬å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªç²¾å¿ƒç¼–æ’çš„ä¸€ç³»åˆ—è¿‡æ¸¡æ•ˆæœ,å…¶ä¸­ä¸€äº›åµŒå¥—çš„å†…éƒ¨å…ƒç´ ç›¸æ¯”äºè¿‡æ¸¡æ•ˆæœçš„æ ¹å…ƒç´ æœ‰å»¶è¿Ÿçš„æˆ–æ›´é•¿çš„è¿‡æ¸¡æ•ˆæœã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥ç”¨<code>&lt;transition&gt;</code>ç»„ä»¶ä¸Šçš„<code>duration</code>å±æ€§å®šåˆ¶ä¸€ä¸ªæ˜¾æ€§çš„è¿‡æ¸¡æŒç»­æ—¶é—´(ä»¥æ¯«ç§’è®¡):</p>
<pre><code class="html">&lt;transition :duration=&quot;1000&quot;&gt;...&lt;/transition&gt;
</code></pre>

<p>ä½ ä¹Ÿå¯ä»¥å®šåˆ¶è¿›å…¥å’Œç§»å‡ºçš„æŒç»­æ—¶é—´:</p>
<pre><code class="html">&lt;transition :duration=&quot;{ enter: 500, leave: 800 }&quot;&gt;...&lt;/transition&gt;
</code></pre>

<blockquote>
<ul>
<li><strong>JavaScripté’©å­</strong></li>
</ul>
</blockquote>
<p>å¯ä»¥åœ¨å±æ€§ä¸­å£°æ˜JavaScripté’©å­</p>
<pre><code class="html">&lt;transition
    v-on:before-enter=&quot;beforeEnter&quot;
    v-on:enter=&quot;enter&quot;
    v-on:after-enter=&quot;afterEnter&quot;
    v-on:enter-cancelled=&quot;enterCancelled&quot;

    v-on:before-leave=&quot;beforeLeave&quot;
    v-on:leave=&quot;leave&quot;
    v-on:after-leave=&quot;afterLeave&quot;
    v-on:leave-cancelled=&quot;leaveCancelled&quot;
&gt;
    &lt;!-- ... --&gt;
&lt;/transition&gt;
// ...
methods: {
    // è¿›å…¥ä¸­
    beforeEnter: function (el) {
        // ...
    },
    // å½“ä¸CSSç»“åˆä½¿ç”¨æ—¶
    // å›è°ƒå‡½æ•°doneæ˜¯å¯é€‰çš„
    enter: function (el, done) {
        // ...
        done()
    },
    afterEnter: function (el) {
        // ...
    },
    enterCancelled: function (el) {
        // ...
    },

    // ç¦»å¼€æ—¶
    beforeLeave: function (el) {
        // ...
    },
    // å½“ä¸CSSç»“åˆä½¿ç”¨æ—¶
    // å›è°ƒå‡½æ•°doneæ˜¯å¯é€‰çš„
    leave: function (el, done) {
        // ...
        done()
    },
    afterLeave: function (el) {
        // ...
    },
    // leaveCancelledåªç”¨äºv-showä¸­
    leaveCancelled: function (el) {
        // ...
    }
}
</code></pre>

<p>è¿™äº›é’©å­å‡½æ•°å¯ä»¥ç»“åˆCSS <code>transitions/animations</code>ä½¿ç”¨,ä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚</p>
<p>å½“åªç”¨JavaScriptè¿‡æ¸¡çš„æ—¶å€™,åœ¨<code>enter</code>å’Œ<code>leave</code>ä¸­å¿…é¡»ä½¿ç”¨<code>done</code>è¿›è¡Œå›è°ƒã€‚å¦åˆ™,å®ƒä»¬å°†è¢«åŒæ­¥è°ƒç”¨,è¿‡æ¸¡ä¼šç«‹å³å®Œæˆã€‚</p>
<p>æ¨èå¯¹äºä»…ä½¿ç”¨JavaScriptè¿‡æ¸¡çš„å…ƒç´ æ·»åŠ <code>v-bind:css="false"</code>,Vueä¼šè·³è¿‡CSSçš„æ£€æµ‹ã€‚è¿™ä¹Ÿå¯ä»¥é¿å…è¿‡æ¸¡è¿‡ç¨‹ä¸­CSSçš„å½±å“ã€‚</p>
<p>ä¸€ä¸ªä½¿ç”¨<code>Velocity.js</code>çš„ç®€å•ä¾‹å­:</p>
<pre><code class="html">&lt;!-- Velocityå’ŒjQuery.animateçš„å·¥ä½œæ–¹å¼ç±»ä¼¼,ä¹Ÿæ˜¯ç”¨æ¥å®ç°JavaScriptåŠ¨ç”»çš„ä¸€ä¸ªå¾ˆæ£’çš„é€‰æ‹© --&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;example-4&quot;&gt;
    &lt;button @click=&quot;show = !show&quot;&gt;
        Toggle
    &lt;/button&gt;
    &lt;transition
        v-on:before-enter=&quot;beforeEnter&quot;
        v-on:enter=&quot;enter&quot;
        v-on:leave=&quot;leave&quot;
        v-bind:css=&quot;false&quot;
    &gt;
        &lt;p v-if=&quot;show&quot;&gt;
            Demo
        &lt;/p&gt;
    &lt;/transition&gt;
&lt;/div&gt;
new Vue({
    el: '#example-4',
    data: {
        show: false
    },
    methods: {
        beforeEnter: function (el) {
            el.style.opacity = 0
            el.style.transformOrigin = 'left'
        },
        enter: function (el, done) {
            Velocity(el, { opacity: 1, fontSize: '1.4em' }, { duration: 300 })
            Velocity(el, { fontSize: '1em' }, { complete: done })
        },
        leave: function (el, done) {
            Velocity(el, { translateX: '15px', rotateZ: '50deg' }, { duration: 600 })
            Velocity(el, { rotateZ: '100deg' }, { loop: 2 })
            Velocity(el, {
                rotateZ: '45deg',
                translateY: '30px',
                translateX: '30px',
                opacity: 0
                }, { complete: done })
        }
    }
})
</code></pre>

<ul>
<li><strong>åˆå§‹æ¸²æŸ“çš„è¿‡æ¸¡</strong></li>
</ul>
<p>å¯ä»¥é€šè¿‡<code>appear</code>ç‰¹æ€§è®¾ç½®èŠ‚ç‚¹åœ¨åˆå§‹æ¸²æŸ“çš„è¿‡æ¸¡</p>
<pre><code class="html">&lt;transition appear&gt;
    &lt;!-- ... --&gt;
&lt;/transition&gt;
</code></pre>

<p>è¿™é‡Œé»˜è®¤å’Œè¿›å…¥/ç¦»å¼€è¿‡æ¸¡ä¸€æ ·,åŒæ ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰CSSç±»åã€‚</p>
<pre><code class="html">&lt;transition
    appear
    appear-class=&quot;custom-appear-class&quot;
    appear-to-class=&quot;custom-appear-to-class&quot; (2.1.8+)
    appear-active-class=&quot;custom-appear-active-class&quot;
&gt;
    &lt;!-- ... --&gt;
&lt;/transition&gt;
</code></pre>

<p>è‡ªå®šä¹‰JavaScripté’©å­:</p>
<pre><code class="html">&lt;transition
    appear
    v-on:before-appear=&quot;customBeforeAppearHook&quot;
    v-on:appear=&quot;customAppearHook&quot;
    v-on:after-appear=&quot;customAfterAppearHook&quot;
    v-on:appear-cancelled=&quot;customAppearCancelledHook&quot;
&gt;
    &lt;!-- ... --&gt;
&lt;/transition&gt;
</code></pre>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,æ— è®ºæ˜¯<code>appear</code>ç‰¹æ€§è¿˜æ˜¯<code>v-on:appear</code>é’©å­éƒ½ä¼šç”Ÿæˆåˆå§‹æ¸²æŸ“è¿‡æ¸¡ã€‚</p>
<ul>
<li><strong>å¤šä¸ªå…ƒç´ çš„è¿‡æ¸¡</strong></li>
</ul>
<p>æˆ‘ä»¬ä¹‹åè®¨è®ºå¤šä¸ªç»„ä»¶çš„è¿‡æ¸¡,å¯¹äºåŸç”Ÿæ ‡ç­¾å¯ä»¥ä½¿ç”¨<code>v-if/v-else</code>ã€‚æœ€å¸¸è§çš„å¤šæ ‡ç­¾è¿‡æ¸¡æ˜¯ä¸€ä¸ªåˆ—è¡¨å’Œæè¿°è¿™ä¸ªåˆ—è¡¨ä¸ºç©ºæ¶ˆæ¯çš„å…ƒç´ :</p>
<pre><code class="html">&lt;transition&gt;
    &lt;table v-if=&quot;items.length &gt; 0&quot;&gt;
        &lt;!-- ... --&gt;
    &lt;/table&gt;
    &lt;p v-else&gt;Sorry, no items found.&lt;/p&gt;
&lt;/transition&gt;
</code></pre>

<p>å¯ä»¥è¿™æ ·ä½¿ç”¨,ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„:</p>
<p><strong>å½“æœ‰ç›¸åŒæ ‡ç­¾åçš„å…ƒç´ åˆ‡æ¢æ—¶,éœ€è¦é€šè¿‡<code>key</code>ç‰¹æ€§è®¾ç½®å”¯ä¸€çš„å€¼æ¥æ ‡è®°ä»¥è®©VueåŒºåˆ†å®ƒä»¬,å¦åˆ™Vueä¸ºäº†æ•ˆç‡åªä¼šæ›¿æ¢ç›¸åŒæ ‡ç­¾å†…éƒ¨çš„å†…å®¹ã€‚å³ä½¿åœ¨æŠ€æœ¯ä¸Šæ²¡æœ‰å¿…è¦,ç»™åœ¨<code>&lt;transition&gt;</code>ç»„ä»¶ä¸­çš„å¤šä¸ªå…ƒç´ è®¾ç½®<code>key</code>æ˜¯ä¸€ä¸ªæ›´å¥½çš„å®è·µã€‚</strong></p>
<p>ç¤ºä¾‹:</p>
<pre><code class="html">&lt;transition&gt;
    &lt;button v-if=&quot;isEditing&quot; key=&quot;save&quot;&gt;
        Save
    &lt;/button&gt;
    &lt;button v-else key=&quot;edit&quot;&gt;
        Edit
    &lt;/button&gt;
&lt;/transition&gt;
</code></pre>

<p>åœ¨ä¸€äº›åœºæ™¯ä¸­,ä¹Ÿå¯ä»¥é€šè¿‡ç»™åŒä¸€ä¸ªå…ƒç´ çš„<code>key</code>ç‰¹æ€§è®¾ç½®ä¸åŒçš„çŠ¶æ€æ¥ä»£æ›¿<code>v-if</code>å’Œ<code>v-else</code>,ä¸Šé¢çš„ä¾‹å­å¯ä»¥é‡å†™ä¸º:</p>
<pre><code class="html">&lt;transition&gt;
    &lt;button v-bind:key=&quot;isEditing&quot;&gt;
        {{ isEditing ? 'Save' : 'Edit' }}
    &lt;/button&gt;
&lt;/transition&gt;
</code></pre>

<p>ä½¿ç”¨å¤šä¸ª<code>v-if</code>çš„å¤šä¸ªå…ƒç´ çš„è¿‡æ¸¡å¯ä»¥é‡å†™ä¸ºç»‘å®šäº†åŠ¨æ€å±æ€§çš„å•ä¸ªå…ƒç´ è¿‡æ¸¡ã€‚ä¾‹å¦‚:</p>
<pre><code class="html">&lt;transition&gt;
    &lt;button v-if=&quot;docState === 'saved'&quot; key=&quot;saved&quot;&gt;
        Edit
    &lt;/button&gt;
    &lt;button v-if=&quot;docState === 'edited'&quot; key=&quot;edited&quot;&gt;
        Save
    &lt;/button&gt;
    &lt;button v-if=&quot;docState === 'editing'&quot; key=&quot;editing&quot;&gt;
        Cancel
    &lt;/button&gt;
&lt;/transition&gt;
</code></pre>

<p>å¯ä»¥é‡å†™ä¸º:</p>
<pre><code class="html">&lt;transition&gt;
    &lt;button v-bind:key=&quot;docState&quot;&gt;
        {{ buttonMessage }}
    &lt;/button&gt;
&lt;/transition&gt;
// ...
computed: {
    buttonMessage: function () {
        switch (this.docState) {
            case 'saved': return 'Edit'
            case 'edited': return 'Save'
            case 'editing': return 'Cancel'
        }
    }
}
</code></pre>

<blockquote>
<ul>
<li><strong>è¿‡æ¸¡æ¨¡å¼</strong></li>
</ul>
</blockquote>
<p>åŒæ—¶ç”Ÿæ•ˆçš„è¿›å…¥å’Œç¦»å¼€çš„è¿‡æ¸¡ä¸èƒ½æ»¡è¶³æ‰€æœ‰è¦æ±‚,æ‰€ä»¥Vueæä¾›äº†è¿‡æ¸¡æ¨¡å¼</p>
<blockquote>
<ol>
<li><code>in-out</code>:æ–°å…ƒç´ å…ˆè¿›è¡Œè¿‡æ¸¡,å®Œæˆä¹‹åå½“å‰å…ƒç´ è¿‡æ¸¡ç¦»å¼€ã€‚</li>
<li><code>out-in</code>:å½“å‰å…ƒç´ å…ˆè¿›è¡Œè¿‡æ¸¡,å®Œæˆä¹‹åæ–°å…ƒç´ è¿‡æ¸¡è¿›å…¥ã€‚</li>
</ol>
</blockquote>
<p>ç”¨<code>out-in</code>é‡å†™ä¹‹å‰çš„å¼€å…³æŒ‰é’®è¿‡æ¸¡:</p>
<pre><code class="html">&lt;transition name=&quot;fade&quot; mode=&quot;out-in&quot;&gt;
    &lt;!-- ... the buttons ... --&gt;
&lt;/transition&gt;
</code></pre>

<p>åªç”¨æ·»åŠ ä¸€ä¸ªç®€å•çš„ç‰¹æ€§,å°±è§£å†³äº†ä¹‹å‰çš„è¿‡æ¸¡é—®é¢˜è€Œæ— éœ€ä»»ä½•é¢å¤–çš„ä»£ç ã€‚<code>in-out</code>æ¨¡å¼ä¸æ˜¯ç»å¸¸ç”¨åˆ°,ä½†å¯¹äºä¸€äº›ç¨å¾®ä¸åŒçš„è¿‡æ¸¡æ•ˆæœè¿˜æ˜¯æœ‰ç”¨çš„ã€‚</p>
<ul>
<li><strong>å¤šä¸ªç»„ä»¶çš„è¿‡æ¸¡</strong></li>
</ul>
<p>å¤šä¸ªç»„ä»¶çš„è¿‡æ¸¡ç®€å•å¾ˆå¤š - æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨<code>key</code>ç‰¹æ€§ã€‚ç›¸å,æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨åŠ¨æ€ç»„ä»¶:</p>
<pre><code class="javascript">&lt;transition name=&quot;component-fade&quot; mode=&quot;out-in&quot;&gt;
    &lt;component v-bind:is=&quot;view&quot;&gt;&lt;/component&gt;
&lt;/transition&gt;
new Vue({
    el: '#transition-components-demo',
    data: {
        view: 'v-a'
    },
    components: {
        'v-a': {
            template: '&lt;div&gt;Component A&lt;/div&gt;'
        },
        'v-b': {
            template: '&lt;div&gt;Component B&lt;/div&gt;'
        }
    }
})
.component-fade-enter-active, .component-fade-leave-active {
    transition: opacity .3s ease;
}
.component-fade-enter, .component-fade-leave-to
    /* .component-fade-leave-active for below version 2.1.8 */ {
    opacity: 0;
}
</code></pre>

<ul>
<li><strong>åˆ—è¡¨è¿‡æ¸¡</strong></li>
</ul>
<p>ç›®å‰ä¸ºæ­¢,å…³äºè¿‡æ¸¡æˆ‘ä»¬å·²ç»è®²åˆ°:å•ä¸ªèŠ‚ç‚¹å’ŒåŒä¸€æ—¶é—´æ¸²æŸ“å¤šä¸ªèŠ‚ç‚¹ä¸­çš„ä¸€ä¸ªã€‚é‚£ä¹ˆæ€ä¹ˆåŒæ—¶æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨,æ¯”å¦‚ä½¿ç”¨<code>v-for</code>?åœ¨è¿™ç§åœºæ™¯ä¸­,ä½¿ç”¨<code>&lt;transition-group&gt;</code>ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬æ·±å…¥ä¾‹å­ä¹‹å‰,å…ˆäº†è§£å…³äºè¿™ä¸ªç»„ä»¶çš„å‡ ä¸ªç‰¹ç‚¹:</p>
<blockquote>
<ol>
<li>ä¸åŒäº<code>&lt;transition&gt;</code>,å®ƒä¼šä»¥ä¸€ä¸ªçœŸå®å…ƒç´ å‘ˆç°:é»˜è®¤ä¸ºä¸€ä¸ª<code>&lt;span&gt;</code>ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡tagç‰¹æ€§æ›´æ¢ä¸ºå…¶ä»–å…ƒç´ ã€‚</li>
<li>è¿‡æ¸¡æ¨¡å¼ä¸å¯ç”¨,å› ä¸ºæˆ‘ä»¬ä¸å†ç›¸äº’åˆ‡æ¢ç‰¹æœ‰çš„å…ƒç´ ã€‚</li>
<li>å†…éƒ¨å…ƒç´ æ€»æ˜¯éœ€è¦æä¾›å”¯ä¸€çš„<code>key</code>å±æ€§å€¼ã€‚</li>
<li>
<p>CSSè¿‡æ¸¡çš„ç±»å°†ä¼šåº”ç”¨åœ¨å†…éƒ¨çš„å…ƒç´ ä¸­,è€Œä¸æ˜¯è¿™ä¸ªç»„/å®¹å™¨æœ¬èº«ã€‚</p>
</li>
<li>
<p><strong>åˆ—è¡¨çš„è¿›å…¥/ç¦»å¼€è¿‡æ¸¡</strong></p>
</li>
</ol>
</blockquote>
<p>ç°åœ¨è®©æˆ‘ä»¬ç”±ä¸€ä¸ªç®€å•çš„ä¾‹å­æ·±å…¥,è¿›å…¥å’Œç¦»å¼€çš„è¿‡æ¸¡ä½¿ç”¨ä¹‹å‰ä¸€æ ·çš„CSSç±»åã€‚</p>
<pre><code class="html">&lt;div id=&quot;list-demo&quot; class=&quot;demo&quot;&gt;
    &lt;button v-on:click=&quot;add&quot;&gt;Add&lt;/button&gt;
    &lt;button v-on:click=&quot;remove&quot;&gt;Remove&lt;/button&gt;
    &lt;transition-group name=&quot;list&quot; tag=&quot;p&quot;&gt;
        &lt;span v-for=&quot;item in items&quot; v-bind:key=&quot;item&quot; class=&quot;list-item&quot;&gt;
            {{ item }}
        &lt;/span&gt;
    &lt;/transition-group&gt;
&lt;/div&gt;
new Vue({
    el: '#list-demo',
    data: {
        items: [1,2,3,4,5,6,7,8,9],
        nextNum: 10
    },
    methods: {
        randomIndex: function () {
            return Math.floor(Math.random() * this.items.length)
        },
        add: function () {
            this.items.splice(this.randomIndex(), 0, this.nextNum++)
        },
        remove: function () {
            this.items.splice(this.randomIndex(), 1)
        },
    }
})
.list-item {
    display: inline-block;
    margin-right: 10px;
}
.list-enter-active, .list-leave-active {
    transition: all 1s;
}
.list-enter, .list-leave-to
    /* .list-leave-active for below version 2.1.8 */ {
    opacity: 0;
    transform: translateY(30px);
}
</code></pre>

<p>è¿™ä¸ªä¾‹å­æœ‰ä¸ªé—®é¢˜,å½“æ·»åŠ å’Œç§»é™¤å…ƒç´ çš„æ—¶å€™,å‘¨å›´çš„å…ƒç´ ä¼šç¬é—´ç§»åŠ¨åˆ°ä»–ä»¬çš„æ–°å¸ƒå±€çš„ä½ç½®,è€Œä¸æ˜¯å¹³æ»‘çš„è¿‡æ¸¡,æˆ‘ä»¬ä¸‹é¢ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<blockquote>
<ul>
<li><strong>åˆ—è¡¨çš„æ’åºè¿‡æ¸¡</strong></li>
</ul>
</blockquote>
<p><code>&lt;transition-group&gt;</code>ç»„ä»¶è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ã€‚ä¸ä»…å¯ä»¥è¿›å…¥å’Œç¦»å¼€åŠ¨ç”»,è¿˜å¯ä»¥æ”¹å˜å®šä½ã€‚è¦ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½åªéœ€äº†è§£æ–°å¢çš„<code>v-move</code>ç‰¹æ€§,å®ƒä¼šåœ¨å…ƒç´ çš„æ”¹å˜å®šä½çš„è¿‡ç¨‹ä¸­åº”ç”¨ã€‚åƒä¹‹å‰çš„ç±»åä¸€æ ·,å¯ä»¥é€šè¿‡<code>name</code>å±æ€§æ¥è‡ªå®šä¹‰å‰ç¼€,ä¹Ÿå¯ä»¥é€šè¿‡<code>move-class</code>å±æ€§æ‰‹åŠ¨è®¾ç½®ã€‚</p>
<p><code>v-move</code>å¯¹äºè®¾ç½®è¿‡æ¸¡çš„åˆ‡æ¢æ—¶æœºå’Œè¿‡æ¸¡æ›²çº¿éå¸¸æœ‰ç”¨,ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹çš„ä¾‹å­:</p>
<pre><code class="html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.14.1/lodash.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;flip-list-demo&quot; class=&quot;demo&quot;&gt;
    &lt;button v-on:click=&quot;shuffle&quot;&gt;Shuffle&lt;/button&gt;
    &lt;transition-group name=&quot;flip-list&quot; tag=&quot;ul&quot;&gt;
        &lt;li v-for=&quot;item in items&quot; v-bind:key=&quot;item&quot;&gt;
            {{ item }}
        &lt;/li&gt;
    &lt;/transition-group&gt;
&lt;/div&gt;
new Vue({
    el: '#flip-list-demo',
    data: {
        items: [1,2,3,4,5,6,7,8,9]
    },
    methods: {
        shuffle: function () {
            this.items = _.shuffle(this.items)
        }
    }
})
.flip-list-move {
    transition: transform 1s;
}
</code></pre>

<p>è¿™ä¸ªçœ‹èµ·æ¥å¾ˆç¥å¥‡,å†…éƒ¨çš„å®ç°,Vueä½¿ç”¨äº†ä¸€ä¸ªå«<code>FLIP</code>ç®€å•çš„åŠ¨ç”»é˜Ÿåˆ—ä½¿ç”¨<code>transforms</code>å°†å…ƒç´ ä»ä¹‹å‰çš„ä½ç½®å¹³æ»‘è¿‡æ¸¡æ–°çš„ä½ç½®ã€‚</p>
<p>æˆ‘ä»¬å°†ä¹‹å‰å®ç°çš„ä¾‹å­å’Œè¿™ä¸ªæŠ€æœ¯ç»“åˆ,ä½¿æˆ‘ä»¬åˆ—è¡¨çš„ä¸€åˆ‡å˜åŠ¨éƒ½ä¼šæœ‰åŠ¨ç”»è¿‡æ¸¡ã€‚</p>
<pre><code class="html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.14.1/lodash.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;list-complete-demo&quot; class=&quot;demo&quot;&gt;
    &lt;button v-on:click=&quot;shuffle&quot;&gt;Shuffle&lt;/button&gt;
    &lt;button v-on:click=&quot;add&quot;&gt;Add&lt;/button&gt;
    &lt;button v-on:click=&quot;remove&quot;&gt;Remove&lt;/button&gt;
    &lt;transition-group name=&quot;list-complete&quot; tag=&quot;p&quot;&gt;
        &lt;span
            v-for=&quot;item in items&quot;
            v-bind:key=&quot;item&quot;
            class=&quot;list-complete-item&quot;
        &gt;
            {{ item }}
        &lt;/span&gt;
    &lt;/transition-group&gt;
&lt;/div&gt;
new Vue({
    el: '#list-complete-demo',
    data: {
        items: [1,2,3,4,5,6,7,8,9],
        nextNum: 10
    },
    methods: {
        randomIndex: function () {
            return Math.floor(Math.random() * this.items.length)
        },
        add: function () {
            this.items.splice(this.randomIndex(), 0, this.nextNum++)
        },
        remove: function () {
            this.items.splice(this.randomIndex(), 1)
        },  
        shuffle: function () {
            this.items = _.shuffle(this.items)
        }
    }
})
.list-complete-item {
    transition: all 1s;
    display: inline-block;
    margin-right: 10px;
}
.list-complete-enter, .list-complete-leave-to
    /* .list-complete-leave-active for below version 2.1.8 */ {
    opacity: 0;
    transform: translateY(30px);
}
.list-complete-leave-active {
    position: absolute;
}
</code></pre>

<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨<code>FLIP</code>è¿‡æ¸¡çš„å…ƒç´ ä¸èƒ½è®¾ç½®ä¸º<code>display: inline</code>ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆ,å¯ä»¥è®¾ç½®ä¸º<code>display: inline-block</code>æˆ–è€…æ”¾ç½®äº<code>flex</code>ä¸­</strong></p>
<p><code>FLIP</code>åŠ¨ç”»ä¸ä»…å¯ä»¥å®ç°å•åˆ—è¿‡æ¸¡,<a href="https://jsfiddle.net/chrisvfritz/sLrhk1bc/">å¤šç»´ç½‘æ ¼ä¹ŸåŒæ ·å¯ä»¥è¿‡æ¸¡</a>ã€‚</p>
<blockquote>
<ul>
<li><strong>åˆ—è¡¨çš„äº¤é”™è¿‡æ¸¡</strong></li>
</ul>
</blockquote>
<p>é€šè¿‡<code>data</code>å±æ€§ä¸JavaScripté€šä¿¡,å°±å¯ä»¥å®ç°åˆ—è¡¨çš„äº¤é”™è¿‡æ¸¡:</p>
<pre><code class="html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;staggered-list-demo&quot;&gt;
    &lt;input v-model=&quot;query&quot;&gt;
    &lt;transition-group
        name=&quot;staggered-fade&quot;
        tag=&quot;ul&quot;
        v-bind:css=&quot;false&quot;
        v-on:before-enter=&quot;beforeEnter&quot;
        v-on:enter=&quot;enter&quot;
        v-on:leave=&quot;leave&quot;
    &gt;
        &lt;li
            v-for=&quot;(item, index) in computedList&quot;
            v-bind:key=&quot;item.msg&quot;
            v-bind:data-index=&quot;index&quot;
            &gt;{{ item.msg }}&lt;/li&gt;
    &lt;/transition-group&gt;
&lt;/div&gt;
new Vue({
    el: '#staggered-list-demo',
    data: {
        query: '',
        list: [
            { msg: 'Bruce Lee' },
            { msg: 'Jackie Chan' },
            { msg: 'Chuck Norris' },
            { msg: 'Jet Li' },
            { msg: 'Kung Fury' }
        ]
    },
    computed: {
        computedList: function () {
            var vm = this
            return this.list.filter(function (item) {
                return item.msg.toLowerCase().indexOf(vm.query.toLowerCase()) !== -1
            })
        }
    },
    methods: {
        beforeEnter: function (el) {
            el.style.opacity = 0
            el.style.height = 0
        },
        enter: function (el, done) {
            var delay = el.dataset.index * 150
            setTimeout(function () {
                Velocity(
                    el,
                    { opacity: 1, height: '1.6em' },
                    { complete: done }
                )
            }, delay)
        },
        leave: function (el, done) {
            var delay = el.dataset.index * 150
            setTimeout(function () {
                Velocity(
                    el,
                    { opacity: 0, height: 0 },
                    { complete: done }
                )
            }, delay)
        }
    }
})
</code></pre>

<ul>
<li><strong>å¯å¤ç”¨çš„è¿‡æ¸¡</strong></li>
</ul>
<p>è¿‡æ¸¡å¯ä»¥é€šè¿‡Vueçš„ç»„ä»¶ç³»ç»Ÿå®ç°å¤ç”¨ã€‚è¦åˆ›å»ºä¸€ä¸ªå¯å¤ç”¨è¿‡æ¸¡ç»„ä»¶,ä½ éœ€è¦åšçš„å°±æ˜¯å°†<code>&lt;transition&gt;</code>æˆ–è€…<code>&lt;transition-group&gt;</code>ä½œä¸ºæ ¹ç»„ä»¶,ç„¶åå°†ä»»ä½•å­ç»„ä»¶æ”¾ç½®åœ¨å…¶ä¸­å°±å¯ä»¥äº†ã€‚</p>
<p>ä½¿ç”¨<code>template</code>çš„ç®€å•ä¾‹å­:</p>
<pre><code class="html">Vue.component('my-special-transition', {
    template: '\
        &lt;transition\
            name=&quot;very-special-transition&quot;\
            mode=&quot;out-in&quot;\
            v-on:before-enter=&quot;beforeEnter&quot;\
            v-on:after-enter=&quot;afterEnter&quot;\
        &gt;\
            &lt;slot&gt;&lt;/slot&gt;\
        &lt;/transition&gt;\
    ',
    methods: {
        beforeEnter: function (el) {
            // ...
        },
        afterEnter: function (el) {
            // ...
        }
    }
})
</code></pre>

<p>å‡½æ•°å¼ç»„ä»¶æ›´é€‚åˆå®Œæˆè¿™ä¸ªä»»åŠ¡:</p>
<pre><code class="javascript">Vue.component('my-special-transition', {
    functional: true,
    render: function (createElement, context) {
        var data = {
            props: {
                name: 'very-special-transition',
                mode: 'out-in'
            },
            on: {
                beforeEnter: function (el) {
                    // ...
                },
                afterEnter: function (el) {
                    // ...
                }
            }
        }
        return createElement('transition', data, context.children)
    }
})
</code></pre>

<ul>
<li><strong>åŠ¨æ€è¿‡æ¸¡</strong></li>
</ul>
<p>åœ¨Vueä¸­å³ä½¿æ˜¯è¿‡æ¸¡ä¹Ÿæ˜¯æ•°æ®é©±åŠ¨çš„!åŠ¨æ€è¿‡æ¸¡æœ€åŸºæœ¬çš„ä¾‹å­æ˜¯é€šè¿‡<code>name</code>ç‰¹æ€§æ¥ç»‘å®šåŠ¨æ€å€¼ã€‚</p>
<pre><code class="html">&lt;transition v-bind:name=&quot;transitionName&quot;&gt;
    &lt;!-- ... --&gt;
&lt;/transition&gt;
</code></pre>

<p>å½“ä½ æƒ³ç”¨Vueçš„è¿‡æ¸¡ç³»ç»Ÿæ¥å®šä¹‰çš„<code>CSS</code>è¿‡æ¸¡/åŠ¨ç”»åœ¨ä¸åŒè¿‡æ¸¡é—´åˆ‡æ¢ä¼šéå¸¸æœ‰ç”¨ã€‚</p>
<p>æ‰€æœ‰è¿‡æ¸¡ç‰¹æ€§éƒ½å¯ä»¥åŠ¨æ€ç»‘å®š,ä½†æˆ‘ä»¬ä¸ä»…ä»…åªæœ‰ç‰¹æ€§å¯ä»¥åˆ©ç”¨,è¿˜å¯ä»¥é€šè¿‡äº‹ä»¶é’©å­è·å–ä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰æ•°æ®,å› ä¸ºäº‹ä»¶é’©å­éƒ½æ˜¯æ–¹æ³•ã€‚è¿™æ„å‘³ç€,æ ¹æ®ç»„ä»¶çš„çŠ¶æ€ä¸åŒ,ä½ çš„JavaScriptè¿‡æ¸¡ä¼šæœ‰ä¸åŒçš„è¡¨ç°ã€‚</p>
<pre><code class="html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;dynamic-fade-demo&quot; class=&quot;demo&quot;&gt;
    Fade In: &lt;input type=&quot;range&quot; v-model=&quot;fadeInDuration&quot; min=&quot;0&quot; v-bind:max=&quot;maxFadeDuration&quot;&gt;
    Fade Out: &lt;input type=&quot;range&quot; v-model=&quot;fadeOutDuration&quot; min=&quot;0&quot; v-bind:max=&quot;maxFadeDuration&quot;&gt;
    &lt;transition
        v-bind:css=&quot;false&quot;
        v-on:before-enter=&quot;beforeEnter&quot;
        v-on:enter=&quot;enter&quot;
        v-on:leave=&quot;leave&quot;
    &gt;
        &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;
    &lt;/transition&gt;
    &lt;button
        v-if=&quot;stop&quot;
        v-on:click=&quot;stop = false; show = false&quot;
        &gt;Start animating&lt;/button&gt;
    &lt;button
        v-else
        v-on:click=&quot;stop = true&quot;
        &gt;Stop it!&lt;/button&gt;
&lt;/div&gt;
new Vue({
    el: '#dynamic-fade-demo',
    data: {
        show: true,
        fadeInDuration: 1000,
        fadeOutDuration: 1000,
        maxFadeDuration: 1500,
        stop: true
    },
    mounted: function () {
        this.show = false
    },
    methods: {
        beforeEnter: function (el) {
            el.style.opacity = 0
        },
        enter: function (el, done) {
            var vm = this
            Velocity(el,
                { opacity: 1 },
                {
                    duration: this.fadeInDuration,
                    complete: function () {
                        done()
                        if (!vm.stop) vm.show = false
                    }
                }
            )
        },
        leave: function (el, done) {
            var vm = this
            Velocity(el,
                { opacity: 0 },
                {
                    duration: this.fadeOutDuration,
                    complete: function () {
                        done()
                        vm.show = true
                    }
                }
            )
        }
    }
})
</code></pre>

<p>æœ€å,åˆ›å»ºåŠ¨æ€è¿‡æ¸¡çš„æœ€ç»ˆæ–¹æ¡ˆæ˜¯ç»„ä»¶é€šè¿‡æ¥å—<code>props</code>æ¥åŠ¨æ€ä¿®æ”¹ä¹‹å‰çš„è¿‡æ¸¡ã€‚ä¸€å¥è€è¯,å”¯ä¸€çš„é™åˆ¶æ˜¯ä½ çš„æƒ³è±¡åŠ›ã€‚</p>
<h3 id="32">3.2 çŠ¶æ€è¿‡æ¸¡</h3>
<p>Vueçš„è¿‡æ¸¡ç³»ç»Ÿæä¾›äº†éå¸¸å¤šç®€å•çš„æ–¹æ³•è®¾ç½®è¿›å…¥ã€ç¦»å¼€å’Œåˆ—è¡¨çš„åŠ¨æ•ˆã€‚é‚£ä¹ˆå¯¹äºæ•°æ®å…ƒç´ æœ¬èº«çš„åŠ¨æ•ˆå‘¢,æ¯”å¦‚:æ•°å­—å’Œè¿ç®—,é¢œè‰²çš„æ˜¾ç¤º,SVGèŠ‚ç‚¹çš„ä½ç½®å’Œå…ƒç´ çš„å¤§å°å’Œå…¶ä»–çš„å±æ€§ã€‚</p>
<p>è¿™äº›æ•°æ®è¦ä¹ˆæœ¬èº«å°±ä»¥æ•°å€¼å½¢å¼å­˜å‚¨,è¦ä¹ˆå¯ä»¥è½¬æ¢ä¸ºæ•°å€¼ã€‚æœ‰äº†è¿™äº›æ•°å€¼å,æˆ‘ä»¬å°±å¯ä»¥ç»“åˆVueçš„å“åº”å¼å’Œç»„ä»¶ç³»ç»Ÿ,ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥å®ç°åˆ‡æ¢å…ƒç´ çš„è¿‡æ¸¡çŠ¶æ€ã€‚</p>
<ul>
<li><strong>çŠ¶æ€åŠ¨ç”»ä¸ä¾¦å¬å™¨</strong></li>
</ul>
<p>é€šè¿‡ä¾¦å¬å™¨æˆ‘ä»¬èƒ½ç›‘å¬åˆ°ä»»ä½•æ•°å€¼å±æ€§çš„æ•°å€¼æ›´æ–°ã€‚å¯èƒ½å¬èµ·æ¥å¾ˆæŠ½è±¡,æ‰€ä»¥è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä½¿ç”¨GreenSockä¸€ä¸ªä¾‹å­:</p>
<pre><code class="html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;animated-number-demo&quot;&gt;
    &lt;input v-model.number=&quot;number&quot; type=&quot;number&quot; step=&quot;20&quot;&gt;
    &lt;p&gt;{{ animatedNumber }}&lt;/p&gt;
&lt;/div&gt;
new Vue({
    el: '#animated-number-demo',
    data: {
        number: 0,
        tweenedNumber: 0
    },
    computed: {
        animatedNumber: function() {
            return this.tweenedNumber.toFixed(0);
        }
    },
    watch: {
        number: function(newValue) {
            TweenLite.to(this.$data, 0.5, { tweenedNumber: newValue });
        }
    }
})
</code></pre>

<p>å½“ä½ æŠŠæ•°å€¼æ›´æ–°æ—¶,å°±ä¼šè§¦å‘åŠ¨ç”»ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªä¸é”™çš„æ¼”ç¤º,ä½†æ˜¯å¯¹äºä¸èƒ½ç›´æ¥åƒæ•°å­—ä¸€æ ·å­˜å‚¨çš„å€¼,æ¯”å¦‚CSSä¸­çš„<code>color</code>çš„å€¼,é€šè¿‡ä¸‹é¢çš„ä¾‹å­æˆ‘ä»¬æ¥é€šè¿‡Tween.jså’ŒColor.jså®ç°ä¸€ä¸ªä¾‹å­:</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/tween.js@16.3.4&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/color-js@1.0.3&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;example-7&quot;&gt;
    &lt;input
        v-model=&quot;colorQuery&quot;
        v-on:keyup.enter=&quot;updateColor&quot;
        placeholder=&quot;Enter a color&quot;
    &gt;
    &lt;button v-on:click=&quot;updateColor&quot;&gt;Update&lt;/button&gt;
    &lt;p&gt;Preview:&lt;/p&gt;
    &lt;span
        v-bind:style=&quot;{ backgroundColor: tweenedCSSColor }&quot;
        class=&quot;example-7-color-preview&quot;
        &gt;&lt;/span&gt;
    &lt;p&gt;{{ tweenedCSSColor }}&lt;/p&gt;
&lt;/div&gt;
var Color = net.brehaut.Color

new Vue({
    el: '#example-7',
    data: {
        colorQuery: '',
        color: {
            red: 0,
            green: 0,
            blue: 0,
            alpha: 1
        },
        tweenedColor: {}
    },
    created: function () {
        this.tweenedColor = Object.assign({}, this.color)
    },
    watch: {
        color: function () {
            function animate () {
                if (TWEEN.update()) {
                    requestAnimationFrame(animate)
                }
            }

            new TWEEN.Tween(this.tweenedColor)
                .to(this.color, 750)
                .start()

            animate()
        }
    },
    computed: {
        tweenedCSSColor: function () {
            return new Color({
                red: this.tweenedColor.red,
                green: this.tweenedColor.green,
                blue: this.tweenedColor.blue,
                alpha: this.tweenedColor.alpha
                }).toCSS()
        }
    },
    methods: {
        updateColor: function () {
            this.color = new Color(this.colorQuery).toRGB()
            this.colorQuery = ''
        }
    }
})
.example-7-color-preview {
    display: inline-block;
    width: 50px;
    height: 50px;
}
</code></pre>

<ul>
<li><strong>åŠ¨æ€çŠ¶æ€è¿‡æ¸¡</strong></li>
</ul>
<p>å°±åƒVueçš„è¿‡æ¸¡ç»„ä»¶ä¸€æ ·,æ•°æ®èƒŒåçŠ¶æ€è¿‡æ¸¡ä¼šå®æ—¶æ›´æ–°,è¿™å¯¹äºåŸå‹è®¾è®¡ååˆ†æœ‰ç”¨ã€‚å½“ä½ ä¿®æ”¹ä¸€äº›å˜é‡,å³ä½¿æ˜¯ä¸€ä¸ªç®€å•çš„SVGå¤šè¾¹å½¢ä¹Ÿå¯å®ç°å¾ˆå¤šéš¾ä»¥æƒ³è±¡çš„æ•ˆæœã€‚</p>
<p><a href="https://jsfiddle.net/chrisvfritz/65gLu2b6/">demoèƒŒåçš„ä»£ç </a>å¯ä»¥é€šè¿‡è¿™ä¸ªfiddleè¿›è¡Œè¯¦é˜…ã€‚</p>
<ul>
<li><strong>æŠŠè¿‡æ¸¡æ”¾åˆ°ç»„ä»¶é‡Œ</strong></li>
</ul>
<p>ç®¡ç†å¤ªå¤šçš„çŠ¶æ€è¿‡æ¸¡ä¼šå¾ˆå¿«çš„å¢åŠ Vueå®ä¾‹æˆ–è€…ç»„ä»¶çš„å¤æ‚æ€§,å¹¸å¥½å¾ˆå¤šçš„åŠ¨ç”»å¯ä»¥æå–åˆ°ä¸“ç”¨çš„å­ç»„ä»¶ã€‚æˆ‘ä»¬æ¥å°†ä¹‹å‰çš„ç¤ºä¾‹æ”¹å†™ä¸€ä¸‹:</p>
<pre><code class="html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/tween.js@16.3.4&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;example-8&quot;&gt;
    &lt;input v-model.number=&quot;firstNumber&quot; type=&quot;number&quot; step=&quot;20&quot;&gt; +
    &lt;input v-model.number=&quot;secondNumber&quot; type=&quot;number&quot; step=&quot;20&quot;&gt; =
    {{ result }}
    &lt;p&gt;
        &lt;animated-integer v-bind:value=&quot;firstNumber&quot;&gt;&lt;/animated-integer&gt; +
        &lt;animated-integer v-bind:value=&quot;secondNumber&quot;&gt;&lt;/animated-integer&gt; =
        &lt;animated-integer v-bind:value=&quot;result&quot;&gt;&lt;/animated-integer&gt;
    &lt;/p&gt;
&lt;/div&gt;
// è¿™ç§å¤æ‚çš„è¡¥é—´åŠ¨ç”»é€»è¾‘å¯ä»¥è¢«å¤ç”¨
// ä»»ä½•æ•´æ•°éƒ½å¯ä»¥æ‰§è¡ŒåŠ¨ç”»
// ç»„ä»¶åŒ–ä½¿æˆ‘ä»¬çš„ç•Œé¢ååˆ†æ¸…æ™°
// å¯ä»¥æ”¯æŒæ›´å¤šæ›´å¤æ‚çš„åŠ¨æ€è¿‡æ¸¡ç­–ç•¥ã€‚
Vue.component('animated-integer', {
    template: '&lt;span&gt;{{ tweeningValue }}&lt;/span&gt;',
    props: {
        value: {
            type: Number,
            required: true
        }
    },
    data: function () {
        return {
            tweeningValue: 0
        }
    },
    watch: {
        value: function (newValue, oldValue) {
            this.tween(oldValue, newValue)
        }
    },
    mounted: function () {
        this.tween(0, this.value)
    },
    methods: {
        tween: function (startValue, endValue) {
            var vm = this
            function animate () {
                if (TWEEN.update()) {
                    requestAnimationFrame(animate)
                }
            }

            new TWEEN.Tween({ tweeningValue: startValue })
                .to({ tweeningValue: endValue }, 500)
                .onUpdate(function () {
                    vm.tweeningValue = this.tweeningValue.toFixed(0)
                })
                .start()

            animate()
        }
    }
})

// æ‰€æœ‰çš„å¤æ‚åº¦éƒ½å·²ç»ä»Vueçš„ä¸»å®ä¾‹ä¸­ç§»é™¤ï¼
new Vue({
    el: '#example-8',
    data: {
        firstNumber: 20,
        secondNumber: 40
    },
    computed: {
        result: function () {
            return this.firstNumber + this.secondNumber
        }
    }
})
</code></pre>

<p>æˆ‘ä»¬èƒ½åœ¨ç»„ä»¶ä¸­ç»“åˆä½¿ç”¨è¿™ä¸€èŠ‚è®²åˆ°å„ç§è¿‡æ¸¡ç­–ç•¥å’ŒVueå†…å»ºçš„è¿‡æ¸¡ç³»ç»Ÿã€‚æ€»ä¹‹,å¯¹äºå®Œæˆå„ç§è¿‡æ¸¡åŠ¨æ•ˆå‡ ä¹æ²¡æœ‰é˜»ç¢ã€‚</p>
<ul>
<li><strong>èµ‹äºˆè®¾è®¡ä»¥ç”Ÿå‘½</strong></li>
</ul>
<p>åªè¦ä¸€ä¸ªåŠ¨ç”»,å°±å¯ä»¥å¸¦æ¥ç”Ÿå‘½ã€‚ä¸å¹¸çš„æ˜¯,å½“è®¾è®¡å¸ˆåˆ›å»ºå›¾æ ‡ã€logoå’Œå‰ç¥¥ç‰©çš„æ—¶å€™,ä»–ä»¬äº¤ä»˜çš„é€šå¸¸éƒ½æ˜¯å›¾ç‰‡æˆ–é™æ€çš„SVGã€‚æ‰€ä»¥,è™½ç„¶GitHubçš„ç« é±¼çŒ«ã€Twitterçš„å°é¸Ÿä»¥åŠå…¶å®ƒè®¸å¤šlogoç±»ä¼¼äºç”Ÿçµ,å®ƒä»¬çœ‹ä¸Šå»å®é™…ä¸Šå¹¶ä¸æ˜¯æ´»ç€çš„ã€‚</p>
<p>Vueå¯ä»¥å¸®åˆ°ä½ ã€‚å› ä¸ºSVGçš„æœ¬è´¨æ˜¯æ•°æ®,æˆ‘ä»¬åªéœ€è¦è¿™äº›åŠ¨ç‰©å…´å¥‹ã€æ€è€ƒæˆ–è­¦æˆ’çš„æ ·ä¾‹ã€‚ç„¶åVueå°±å¯ä»¥è¾…åŠ©å®Œæˆè¿™å‡ ç§çŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡åŠ¨ç”»,æ¥åˆ¶ä½œä½ çš„æ¬¢è¿é¡µé¢ã€åŠ è½½æŒ‡ç¤ºã€ä»¥åŠæ›´åŠ å¸¦æœ‰æƒ…æ„Ÿçš„æç¤ºã€‚</p>
<p>Sarah Drasnerå±•ç¤ºäº†ä¸‹é¢è¿™ä¸ª<a href="https://vuejs.bootcss.com/v2/guide/transitioning-state.html">demo</a>,è¿™ä¸ª demoç»“åˆäº†æ—¶é—´å’Œäº¤äº’ç›¸å…³çš„çŠ¶æ€æ”¹å˜:</p>
<h3 id="33">3.3 æ·±å…¥å“åº”å¼åŸç†</h3>
<p>ç°åœ¨æ˜¯æ—¶å€™æ·±å…¥ä¸€ä¸‹äº†!Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€,æ˜¯å…¶éä¾µå…¥æ€§çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JavaScriptå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶,è§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ç›´æ¥,ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦,è¿™æ ·ä½ å¯ä»¥é¿å¼€ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚åœ¨è¿™ä¸ªç« èŠ‚,æˆ‘ä»¬å°†ç ”ç©¶ä¸€ä¸‹Vueå“åº”å¼ç³»ç»Ÿçš„åº•å±‚çš„ç»†èŠ‚ã€‚</p>
<ul>
<li><strong>å¦‚ä½•è¿½è¸ªå˜åŒ–</strong></li>
</ul>
<p>å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„JavaScriptå¯¹è±¡ä¼ å…¥Vueå®ä¾‹ä½œä¸ºdataé€‰é¡¹,Vueå°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§,å¹¶ä½¿ç”¨<code>Object.defineProperty</code>æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º<code>getter/setter</code>ã€‚<code>Object.defineProperty</code>æ˜¯ES5ä¸­ä¸€ä¸ªæ— æ³•<code>shim</code>çš„ç‰¹æ€§,è¿™ä¹Ÿå°±æ˜¯<code>Vue</code>ä¸æ”¯æŒIE8ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚</p>
<p>è¿™äº›<code>getter/setter</code>å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„,ä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®©Vueèƒ½å¤Ÿè¿½è¸ªä¾èµ–,åœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜æ›´ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒæµè§ˆå™¨åœ¨æ§åˆ¶å°æ‰“å°æ•°æ®å¯¹è±¡æ—¶å¯¹<code>getter/setter</code>çš„æ ¼å¼åŒ–å¹¶ä¸åŒ,æ‰€ä»¥å»ºè®®å®‰è£…<code>vue-devtools</code>æ¥è·å–å¯¹æ£€æŸ¥æ•°æ®æ›´åŠ å‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€‚</p>
<p>æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª<code>watcher</code>å®ä¾‹,å®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ®å±æ€§è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„<code>setter</code>è§¦å‘æ—¶,ä¼šé€šçŸ¥<code>watcher</code>,ä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p>
<p><img alt="" src="http://vuejs.bootcss.com/images/data.png" /></p>
<ul>
<li><strong>æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹</strong></li>
</ul>
<p>å—ç°ä»£JavaScriptçš„é™åˆ¶(è€Œä¸”<code>Object.observe</code>ä¹Ÿå·²ç»è¢«åºŸå¼ƒ),Vueæ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ã€‚ç”±äºVueä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ<code>getter/setter</code>è½¬åŒ–,æ‰€ä»¥å±æ€§å¿…é¡»åœ¨<code>data</code>å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®©Vueå°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">var vm = new Vue({
    data:{
        a:1
    }
})

// vm.aæ˜¯å“åº”å¼çš„
vm.b = 2

// vm.bæ˜¯éå“åº”å¼çš„
</code></pre>

<p>å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹,Vueä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§ã€‚ä½†æ˜¯,å¯ä»¥ä½¿ç”¨<code>Vue.set(object, propertyName, value)</code>æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ã€‚ä¾‹å¦‚,å¯¹äº:</p>
<pre><code class="javascript">Vue.set(vm.someObject, 'b', 2)
</code></pre>

<p>è¿˜å¯ä»¥ä½¿ç”¨<code>vm.$set</code>å®ä¾‹æ–¹æ³•,è¿™ä¹Ÿæ˜¯å…¨å±€<code>Vue.set</code>æ–¹æ³•çš„åˆ«å:</p>
<pre><code class="javascript">this.$set(this.someObject,'b',2)
</code></pre>

<p>æœ‰æ—¶ä½ å¯èƒ½éœ€è¦ä¸ºå·²æœ‰å¯¹è±¡èµ‹å€¼å¤šä¸ªæ–°å±æ€§,æ¯”å¦‚ä½¿ç”¨<code>Object.assign()</code>æˆ–<code>_.extend()</code>ã€‚ä½†æ˜¯,è¿™æ ·æ·»åŠ åˆ°å¯¹è±¡ä¸Šçš„æ–°å±æ€§ä¸ä¼šè§¦å‘æ›´æ–°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,ä½ åº”è¯¥ç”¨åŸå¯¹è±¡ä¸è¦æ··åˆè¿›å»çš„å¯¹è±¡çš„å±æ€§ä¸€èµ·åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
<pre><code class="javascript">// ä»£æ›¿Object.assign(this.someObject, { a: 1, b: 2 })
this.someObject = Object.assign({}, this.someObject, { a: 1, b: 2 })
</code></pre>

<p>ä¹Ÿæœ‰ä¸€äº›æ•°ç»„ç›¸å…³çš„æ³¨æ„äº‹é¡¹,ä¹‹å‰å·²ç»åœ¨åˆ—è¡¨æ¸²æŸ“ä¸­è®²è¿‡ã€‚</p>
<ul>
<li><strong>å£°æ˜å“åº”å¼å±æ€§</strong></li>
</ul>
<p>ç”±äºVueä¸å…è®¸åŠ¨æ€æ·»åŠ æ ¹çº§å“åº”å¼å±æ€§,æ‰€ä»¥ä½ å¿…é¡»åœ¨åˆå§‹åŒ–å®ä¾‹å‰å£°æ˜æ‰€æœ‰æ ¹çº§å“åº”å¼å±æ€§,å“ªæ€•åªæ˜¯ä¸€ä¸ªç©ºå€¼:</p>
<pre><code class="javascript">var vm = new Vue({
    data: {
        // å£°æ˜messageä¸ºä¸€ä¸ªç©ºå€¼å­—ç¬¦ä¸²
        message: ''
    },
    template: '&lt;div&gt;{{ message }}&lt;/div&gt;'
})
// ä¹‹åè®¾ç½®message
vm.message = 'Hello!'
</code></pre>

<p>å¦‚æœä½ æœªåœ¨<code>data</code>é€‰é¡¹ä¸­å£°æ˜<code>message</code>,Vueå°†è­¦å‘Šä½ æ¸²æŸ“å‡½æ•°æ­£åœ¨è¯•å›¾è®¿é—®ä¸å­˜åœ¨çš„å±æ€§ã€‚</p>
<p>è¿™æ ·çš„é™åˆ¶åœ¨èƒŒåæ˜¯æœ‰å…¶æŠ€æœ¯åŸå› çš„,å®ƒæ¶ˆé™¤äº†åœ¨ä¾èµ–é¡¹è·Ÿè¸ªç³»ç»Ÿä¸­çš„ä¸€ç±»è¾¹ç•Œæƒ…å†µ,ä¹Ÿä½¿Vueå®ä¾‹èƒ½æ›´å¥½åœ°é…åˆç±»å‹æ£€æŸ¥ç³»ç»Ÿå·¥ä½œã€‚ä½†ä¸æ­¤åŒæ—¶åœ¨ä»£ç å¯ç»´æŠ¤æ€§æ–¹é¢ä¹Ÿæœ‰ä¸€ç‚¹é‡è¦çš„è€ƒè™‘:data å¯¹è±¡å°±åƒç»„ä»¶çŠ¶æ€çš„ç»“æ„(schema)ã€‚æå‰å£°æ˜æ‰€æœ‰çš„å“åº”å¼å±æ€§,å¯ä»¥è®©ç»„ä»¶ä»£ç åœ¨æœªæ¥ä¿®æ”¹æˆ–ç»™å…¶ä»–å¼€å‘äººå‘˜é˜…è¯»æ—¶æ›´æ˜“äºç†è§£ã€‚</p>
<ul>
<li><strong>å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—</strong></li>
</ul>
<p>å¯èƒ½ä½ è¿˜æ²¡æœ‰æ³¨æ„åˆ°,Vueåœ¨æ›´æ–°DOMæ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–,Vueå°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—,å¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª<code>watcher</code>è¢«å¤šæ¬¡è§¦å‘,åªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ<code>DOM</code>æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ç„¶å,åœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­,Vueåˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™…(å·²å»é‡çš„)å·¥ä½œã€‚Vueåœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„<code>Promise.then</code>ã€<code>MutationObserver</code>å’Œ<code>setImmediate</code>,å¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒ,åˆ™ä¼šé‡‡ç”¨<code>setTimeout(fn, 0)</code>ä»£æ›¿ã€‚</p>
<p>ä¾‹å¦‚,å½“ä½ è®¾ç½®<code>vm.someData = 'new value'</code>,è¯¥ç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ã€‚å½“åˆ·æ–°é˜Ÿåˆ—æ—¶,ç»„ä»¶ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯â€œtickâ€ä¸­æ›´æ–°ã€‚å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹,ä½†æ˜¯å¦‚æœä½ æƒ³åŸºäºæ›´æ–°åçš„DOMçŠ¶æ€æ¥åšç‚¹ä»€ä¹ˆ,è¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚è™½ç„¶Vue.jsé€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒ,é¿å…ç›´æ¥æ¥è§¦DOM,ä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦è¿™ä¹ˆåšã€‚ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾…Vueå®Œæˆæ›´æ–°DOM,å¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨<code>Vue.nextTick(callback)</code>ã€‚è¿™æ ·å›è°ƒå‡½æ•°å°†åœ¨DOMæ›´æ–°å®Œæˆåè¢«è°ƒç”¨ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">&lt;div id=&quot;example&quot;&gt;{{message}}&lt;/div&gt;
var vm = new Vue({
    el: '#example',
    data: {
        message: '123'
    }
})
vm.message = 'new message' // æ›´æ”¹æ•°æ®
vm.$el.textContent === 'new message' // false
Vue.nextTick(function () {
    vm.$el.textContent === 'new message' // true
})
</code></pre>

<p>åœ¨ç»„ä»¶å†…ä½¿ç”¨<code>vm.$nextTick()</code>å®ä¾‹æ–¹æ³•ç‰¹åˆ«æ–¹ä¾¿,å› ä¸ºå®ƒä¸éœ€è¦å…¨å±€Vue,å¹¶ä¸”å›è°ƒå‡½æ•°ä¸­çš„<code>this</code>å°†è‡ªåŠ¨ç»‘å®šåˆ°å½“å‰çš„Vue å®ä¾‹ä¸Š:</p>
<pre><code class="javascript">Vue.component('example', {
    template: '&lt;span&gt;{{ message }}&lt;/span&gt;',
    data: function () {
        return {
            message: 'æœªæ›´æ–°'
        }
    },
    methods: {
        updateMessage: function () {
            this.message = 'å·²æ›´æ–°'
            console.log(this.$el.textContent) // =&gt; 'æœªæ›´æ–°'
            this.$nextTick(function () {
                console.log(this.$el.textContent) // =&gt; 'å·²æ›´æ–°'
            })
        }
    }
})
</code></pre>

<p>å› ä¸º<code>$nextTick()</code>è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡,æ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨æ–°çš„ES2017 <code>async/await</code>è¯­æ³•å®Œæˆç›¸åŒçš„äº‹æƒ…:</p>
<pre><code class="javascript">methods: {
    updateMessage: async function () {
        this.message = 'å·²æ›´æ–°'
        console.log(this.$el.textContent) // =&gt; 'æœªæ›´æ–°'
        await this.$nextTick()
        console.log(this.$el.textContent) // =&gt; 'å·²æ›´æ–°'
  }
}
</code></pre>

<h2 id="vue-router">å››ã€Vue Router</h2>
<h3 id="41">4.1 èµ·æ­¥</h3>
<p>ç”¨Vue.js+Vue Routeråˆ›å»ºå•é¡µåº”ç”¨,æ˜¯éå¸¸ç®€å•çš„ã€‚ä½¿ç”¨Vue.js,æˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ç»„åˆç»„ä»¶æ¥ç»„æˆåº”ç”¨ç¨‹åº,å½“ä½ è¦æŠŠVue Routeræ·»åŠ è¿›æ¥,æˆ‘ä»¬éœ€è¦åšçš„æ˜¯å°†ç»„ä»¶(components)æ˜ å°„åˆ°è·¯ç”±(routes),ç„¶åå‘Šè¯‰Vue Routeråœ¨å“ªé‡Œæ¸²æŸ“å®ƒä»¬ã€‚ä¸‹é¢æ˜¯ä¸ªåŸºæœ¬ä¾‹å­:</p>
<ul>
<li><strong>HTML</strong></li>
</ul>
<pre><code class="html">&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;app&quot;&gt;
  &lt;h1&gt;Hello App!&lt;/h1&gt;
  &lt;p&gt;
    &lt;!-- ä½¿ç”¨router-linkç»„ä»¶æ¥å¯¼èˆª. --&gt;
    &lt;!-- é€šè¿‡ä¼ å…¥toå±æ€§æŒ‡å®šé“¾æ¥. --&gt;
    &lt;!-- &lt;router-link&gt;é»˜è®¤ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ª&lt;a&gt;æ ‡ç­¾ --&gt;
    &lt;router-link to=&quot;/foo&quot;&gt;Go to Foo&lt;/router-link&gt;
    &lt;router-link to=&quot;/bar&quot;&gt;Go to Bar&lt;/router-link&gt;
  &lt;/p&gt;
  &lt;!-- è·¯ç”±å‡ºå£ --&gt;
  &lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt;
  &lt;router-view&gt;&lt;/router-view&gt;
&lt;/div&gt;
</code></pre>

<ul>
<li><strong>JavaScript</strong></li>
</ul>
<pre><code class="javascript">// 0. å¦‚æœä½¿ç”¨æ¨¡å—åŒ–æœºåˆ¶ç¼–ç¨‹,å¯¼å…¥Vueå’ŒVueRouter,è¦è°ƒç”¨Vue.use(VueRouter)

// 1. å®šä¹‰(è·¯ç”±)ç»„ä»¶ã€‚
// å¯ä»¥ä»å…¶ä»–æ–‡ä»¶importè¿›æ¥
const Foo = { template: '&lt;div&gt;foo&lt;/div&gt;' }
const Bar = { template: '&lt;div&gt;bar&lt;/div&gt;' }

// 2. å®šä¹‰è·¯ç”±
// æ¯ä¸ªè·¯ç”±åº”è¯¥æ˜ å°„ä¸€ä¸ªç»„ä»¶ã€‚å…¶ä¸­&quot;component&quot;å¯ä»¥æ˜¯
// é€šè¿‡Vue.extend()åˆ›å»ºçš„ç»„ä»¶æ„é€ å™¨,
// æˆ–è€…,åªæ˜¯ä¸€ä¸ªç»„ä»¶é…ç½®å¯¹è±¡ã€‚
// æˆ‘ä»¬æ™šç‚¹å†è®¨è®ºåµŒå¥—è·¯ç”±ã€‚
const routes = [
  { path: '/foo', component: Foo },
  { path: '/bar', component: Bar }
]

// 3. åˆ›å»ºrouterå®ä¾‹,ç„¶åä¼ routesé…ç½®
// ä½ è¿˜å¯ä»¥ä¼ åˆ«çš„é…ç½®å‚æ•°,ä¸è¿‡å…ˆè¿™ä¹ˆç®€å•ç€å§ã€‚
const router = new VueRouter({
  routes // (ç¼©å†™)ç›¸å½“äºroutes: routes
})

// 4. åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹ã€‚
// è®°å¾—è¦é€šè¿‡routeré…ç½®å‚æ•°æ³¨å…¥è·¯ç”±,
// ä»è€Œè®©æ•´ä¸ªåº”ç”¨éƒ½æœ‰è·¯ç”±åŠŸèƒ½
const app = new Vue({
  router
}).$mount('#app')

// ç°åœ¨,åº”ç”¨å·²ç»å¯åŠ¨äº†ï¼
</code></pre>

<p>é€šè¿‡æ³¨å…¥è·¯ç”±å™¨,æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶å†…é€šè¿‡<code>this.$router</code>è®¿é—®è·¯ç”±å™¨,ä¹Ÿå¯ä»¥é€šè¿‡<code>this.$route</code>è®¿é—®å½“å‰è·¯ç”±:</p>
<pre><code class="javascript">// Home.vue
export default {
  computed: {
    username() {
      // æˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°paramsæ˜¯ä»€ä¹ˆ
      return this.$route.params.username
    }
  },
  methods: {
    goBack() {
      window.history.length &gt; 1 ? this.$router.go(-1) : this.$router.push('/')
    }
  }
}
</code></pre>

<p>è¯¥æ–‡æ¡£é€šç¯‡éƒ½å¸¸ä½¿ç”¨routerå®ä¾‹ã€‚ç•™æ„ä¸€ä¸‹<code>this.$router</code>å’Œ<code>router</code>ä½¿ç”¨èµ·æ¥å®Œå…¨ä¸€æ ·ã€‚æˆ‘ä»¬ä½¿ç”¨<code>this.$router</code>çš„åŸå› æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³åœ¨æ¯ä¸ªç‹¬ç«‹éœ€è¦å°è£…è·¯ç”±çš„ç»„ä»¶ä¸­éƒ½å¯¼å…¥è·¯ç”±ã€‚ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ª<a href="https://jsfiddle.net/yyx990803/xgrjzsup/">åœ¨çº¿çš„ä¾‹å­</a>ã€‚</p>
<p>è¦æ³¨æ„,å½“<code>&lt;router-link\&gt;</code>å¯¹åº”çš„è·¯ç”±åŒ¹é…æˆåŠŸ,å°†è‡ªåŠ¨è®¾ç½®<code>class</code>å±æ€§å€¼<code>.router-link-active</code>ã€‚æŸ¥çœ‹<a href="https://router.vuejs.org/zh/api/#router-link">API æ–‡æ¡£</a>å­¦ä¹ æ›´å¤šç›¸å…³å†…å®¹ã€‚</p>
<h3 id="42">4.2 åŠ¨æ€è·¯ç”±åŒ¹é…</h3>
<p>æˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠæŸç§æ¨¡å¼åŒ¹é…åˆ°çš„æ‰€æœ‰è·¯ç”±,å…¨éƒ½æ˜ å°„åˆ°åŒä¸ªç»„ä»¶ã€‚ä¾‹å¦‚,æˆ‘ä»¬æœ‰ä¸€ä¸ª<code>User</code>ç»„ä»¶,å¯¹äºæ‰€æœ‰IDå„ä¸ç›¸åŒçš„ç”¨æˆ·,éƒ½è¦ä½¿ç”¨è¿™ä¸ªç»„ä»¶æ¥æ¸²æŸ“ã€‚é‚£ä¹ˆ,æˆ‘ä»¬å¯ä»¥åœ¨<code>vue-router</code>çš„è·¯ç”±è·¯å¾„ä¸­ä½¿ç”¨â€œåŠ¨æ€è·¯å¾„å‚æ•°â€(dynamic segment)æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœ:</p>
<pre><code class="javascript">const User = {
  template: '&lt;div&gt;User&lt;/div&gt;'
}

const router = new VueRouter({
  routes: [
    // åŠ¨æ€è·¯å¾„å‚æ•° ä»¥å†’å·å¼€å¤´
    { path: '/user/:id', component: User }
  ]
})
</code></pre>

<p>ç°åœ¨å‘¢,åƒ<code>/user/foo</code>å’Œ<code>/user/bar</code>éƒ½å°†æ˜ å°„åˆ°ç›¸åŒçš„è·¯ç”±ã€‚</p>
<p>ä¸€ä¸ªâ€œè·¯å¾„å‚æ•°â€ä½¿ç”¨å†’å·:æ ‡è®°ã€‚å½“åŒ¹é…åˆ°ä¸€ä¸ªè·¯ç”±æ—¶,å‚æ•°å€¼ä¼šè¢«è®¾ç½®åˆ°<code>this.$route.params</code>,å¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…ä½¿ç”¨ã€‚äºæ˜¯,æˆ‘ä»¬å¯ä»¥æ›´æ–°<code>User</code>çš„æ¨¡æ¿,è¾“å‡ºå½“å‰ç”¨æˆ·çš„<code>ID</code>:</p>
<pre><code class="javascript">const User = {
  template: '&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'
}
</code></pre>

<p>ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ª<a href="https://jsfiddle.net/yyx990803/4xfa2f19/">åœ¨çº¿ä¾‹å­</a>ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ä¸€ä¸ªè·¯ç”±ä¸­è®¾ç½®å¤šæ®µâ€œè·¯å¾„å‚æ•°â€,å¯¹åº”çš„å€¼éƒ½ä¼šè®¾ç½®åˆ°<code>$route.params</code>ä¸­ã€‚ä¾‹å¦‚:</p>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>åŒ¹é…è·¯å¾„</th>
<th><code>$route.params</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/user/:username</code></td>
<td><code>/user/evan</code></td>
<td>`{ username: 'evan' }``</td>
</tr>
<tr>
<td><code>/user/:username/post/:post_id</code></td>
<td><code>/user/evan/post/123</code></td>
<td>`{ username: 'evan', post_id: '123' }``</td>
</tr>
</tbody>
</table>
<p>é™¤äº†<code>$route.params</code>å¤–,<code>$route</code>å¯¹è±¡è¿˜æä¾›äº†å…¶å®ƒæœ‰ç”¨çš„ä¿¡æ¯,ä¾‹å¦‚,<code>$route.query</code>(å¦‚æœURLä¸­æœ‰æŸ¥è¯¢å‚æ•°)ã€<code>$route.hash</code>ç­‰ç­‰ã€‚ä½ å¯ä»¥æŸ¥çœ‹<a href="https://router.vuejs.org/zh/api/#%E8%B7%AF%E7%94%B1%E5%AF%B9%E8%B1%A1">API æ–‡æ¡£</a>çš„è¯¦ç»†è¯´æ˜ã€‚</p>
<ul>
<li><strong>å“åº”è·¯ç”±å‚æ•°çš„å˜åŒ–</strong></li>
</ul>
<p>æé†’ä¸€ä¸‹,å½“ä½¿ç”¨è·¯ç”±å‚æ•°æ—¶,ä¾‹å¦‚ä»<code>/user/foo</code>å¯¼èˆªåˆ°<code>/user/bar</code>,åŸæ¥çš„ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚å› ä¸ºä¸¤ä¸ªè·¯ç”±éƒ½æ¸²æŸ“åŒä¸ªç»„ä»¶,æ¯”èµ·é”€æ¯å†åˆ›å»º,å¤ç”¨åˆ™æ˜¾å¾—æ›´åŠ é«˜æ•ˆã€‚ä¸è¿‡,è¿™ä¹Ÿæ„å‘³ç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸ä¼šå†è¢«è°ƒç”¨ã€‚</p>
<p>å¤ç”¨ç»„ä»¶æ—¶,æƒ³å¯¹è·¯ç”±å‚æ•°çš„å˜åŒ–ä½œå‡ºå“åº”çš„è¯,ä½ å¯ä»¥ç®€å•åœ°watch(ç›‘æµ‹å˜åŒ–)$routeå¯¹è±¡:</p>
<pre><code class="javascript">const User = {
  template: '...',
  watch: {
    '$route' (to, from) {
      // å¯¹è·¯ç”±å˜åŒ–ä½œå‡ºå“åº”...
    }
  }
}
</code></pre>

<p>æˆ–è€…ä½¿ç”¨å¼•å…¥çš„<code>beforeRouteUpdate</code>å¯¼èˆªå®ˆå«:</p>
<pre><code class="javascript">const User = {
  template: '...',
  beforeRouteUpdate (to, from, next) {
    // react to route changes...
    // don't forget to call next()
  }
}
</code></pre>

<ul>
<li><strong>æ•è·æ‰€æœ‰è·¯ç”±æˆ–404 Not foundè·¯ç”±</strong></li>
</ul>
<p>å¸¸è§„å‚æ•°åªä¼šåŒ¹é…è¢«/åˆ†éš”çš„URLç‰‡æ®µä¸­çš„å­—ç¬¦ã€‚å¦‚æœæƒ³åŒ¹é…ä»»æ„è·¯å¾„,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šé…ç¬¦(<code>*</code>):</p>
<pre><code class="javascript">{
  // ä¼šåŒ¹é…æ‰€æœ‰è·¯å¾„
  path: '*'
}
{
  // ä¼šåŒ¹é…ä»¥ `/user-` å¼€å¤´çš„ä»»æ„è·¯å¾„
  path: '/user-*'
}
</code></pre>

<p>å½“ä½¿ç”¨é€šé…ç¬¦è·¯ç”±æ—¶,è¯·ç¡®ä¿è·¯ç”±çš„é¡ºåºæ˜¯æ­£ç¡®çš„,ä¹Ÿå°±æ˜¯è¯´å«æœ‰é€šé…ç¬¦çš„è·¯ç”±åº”è¯¥æ”¾åœ¨æœ€åã€‚è·¯ç”±<code>{ path: '*' }</code>é€šå¸¸ç”¨äºå®¢æˆ·ç«¯<code>404</code>é”™è¯¯ã€‚å¦‚æœä½ ä½¿ç”¨äº†Historyæ¨¡å¼,è¯·ç¡®ä¿æ­£ç¡®é…ç½®ä½ çš„æœåŠ¡å™¨ã€‚</p>
<p>å½“ä½¿ç”¨ä¸€ä¸ªé€šé…ç¬¦æ—¶,<code>$route.params</code>å†…ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªåä¸º<code>pathMatch</code>å‚æ•°ã€‚å®ƒåŒ…å«äº†URLé€šè¿‡é€šé…ç¬¦è¢«åŒ¹é…çš„éƒ¨åˆ†:</p>
<pre><code class="javascript">// ç»™å‡ºä¸€ä¸ªè·¯ç”± { path: '/user-*' }
this.$router.push('/user-admin')
this.$route.params.pathMatch // 'admin'
// ç»™å‡ºä¸€ä¸ªè·¯ç”± { path: '*' }
this.$router.push('/non-existing')
this.$route.params.pathMatch // '/non-existing'
</code></pre>

<ul>
<li><strong>é«˜çº§åŒ¹é…æ¨¡å¼</strong></li>
</ul>
<p><code>vue-router</code>ä½¿ç”¨<a href="https://github.com/pillarjs/path-to-regexp/tree/v1.7.0">path-to-regexp</a>ä½œä¸ºè·¯å¾„åŒ¹é…å¼•æ“,æ‰€ä»¥æ”¯æŒå¾ˆå¤šé«˜çº§çš„åŒ¹é…æ¨¡å¼,ä¾‹å¦‚:å¯é€‰çš„åŠ¨æ€è·¯å¾„å‚æ•°ã€åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ª,ç”šè‡³æ˜¯è‡ªå®šä¹‰æ­£åˆ™åŒ¹é…ã€‚æŸ¥çœ‹å®ƒçš„<a href="https://github.com/pillarjs/path-to-regexp/tree/v1.7.0#parameters">æ–‡æ¡£</a>å­¦ä¹ é«˜é˜¶çš„è·¯å¾„åŒ¹é…,è¿˜æœ‰<a href="https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js">è¿™ä¸ªä¾‹å­</a>å±•ç¤º<code>vue-router</code>æ€ä¹ˆä½¿ç”¨è¿™ç±»åŒ¹é…ã€‚</p>
<ul>
<li><strong>åŒ¹é…ä¼˜å…ˆçº§</strong></li>
</ul>
<p>æœ‰æ—¶å€™,åŒä¸€ä¸ªè·¯å¾„å¯ä»¥åŒ¹é…å¤šä¸ªè·¯ç”±,æ­¤æ—¶,åŒ¹é…çš„ä¼˜å…ˆçº§å°±æŒ‰ç…§è·¯ç”±çš„å®šä¹‰é¡ºåº:è°å…ˆå®šä¹‰çš„,è°çš„ä¼˜å…ˆçº§å°±æœ€é«˜ã€‚</p>
<h3 id="43">4.3 åµŒå¥—è·¯ç”±</h3>
<p>å®é™…ç”Ÿæ´»ä¸­çš„åº”ç”¨ç•Œé¢,é€šå¸¸ç”±å¤šå±‚åµŒå¥—çš„ç»„ä»¶ç»„åˆè€Œæˆã€‚åŒæ ·åœ°,URLä¸­å„æ®µåŠ¨æ€è·¯å¾„ä¹ŸæŒ‰æŸç§ç»“æ„å¯¹åº”åµŒå¥—çš„å„å±‚ç»„ä»¶,ä¾‹å¦‚:</p>
<pre><code class="html">/user/foo/profile                     /user/foo/posts
+------------------+                  +-----------------+
| User             |                  | User            |
| +--------------+ |                  | +-------------+ |
| | Profile      | |  +------------&gt;  | | Posts       | |
| |              | |                  | |             | |
| +--------------+ |                  | +-------------+ |
+------------------+                  +-----------------+
</code></pre>

<p>å€ŸåŠ©<code>vue-router</code>,ä½¿ç”¨åµŒå¥—è·¯ç”±é…ç½®,å°±å¯ä»¥å¾ˆç®€å•åœ°è¡¨è¾¾è¿™ç§å…³ç³»ã€‚æ¥ç€ä¸ŠèŠ‚åˆ›å»ºçš„<code>app</code>:</p>
<pre><code class="html">&lt;div id=&quot;app&quot;&gt;
  &lt;router-view&gt;&lt;/router-view&gt;
&lt;/div&gt;
const User = {
  template: '&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'
}

const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User }
  ]
})
</code></pre>

<p>è¿™é‡Œçš„<code>&lt;router-view\&gt;</code>æ˜¯æœ€é¡¶å±‚çš„å‡ºå£,æ¸²æŸ“æœ€é«˜çº§è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶ã€‚åŒæ ·åœ°,ä¸€ä¸ªè¢«æ¸²æŸ“ç»„ä»¶åŒæ ·å¯ä»¥åŒ…å«è‡ªå·±çš„åµŒå¥—<code>&lt;router-view\&gt;</code>ã€‚ä¾‹å¦‚,åœ¨Userç»„ä»¶çš„æ¨¡æ¿æ·»åŠ ä¸€ä¸ª<code>&lt;router-view\&gt;</code>:</p>
<pre><code class="javascript">const User = {
  template: `
    &lt;div class=&quot;user&quot;&gt;
      &lt;h2&gt;User {{ $route.params.id }}&lt;/h2&gt;
      &lt;router-view&gt;&lt;/router-view&gt;
    &lt;/div&gt;
  `
}
</code></pre>

<p>è¦åœ¨åµŒå¥—çš„å‡ºå£ä¸­æ¸²æŸ“ç»„ä»¶,éœ€è¦åœ¨<code>VueRouter</code>çš„å‚æ•°ä¸­ä½¿ç”¨<code>children</code>é…ç½®:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User,
      children: [
        {
          // å½“/user/:id/profileåŒ¹é…æˆåŠŸ,
          // UserProfileä¼šè¢«æ¸²æŸ“åœ¨Userçš„&lt;router-view&gt;ä¸­
          path: 'profile',
          component: UserProfile
        },
        {
          // å½“/user/:id/postsåŒ¹é…æˆåŠŸ
          // UserPostsä¼šè¢«æ¸²æŸ“åœ¨Userçš„&lt;router-view&gt;ä¸­
          path: 'posts',
          component: UserPosts
        }
      ]
    }
  ]
})
</code></pre>

<p>è¦æ³¨æ„,ä»¥<code>/</code>å¼€å¤´çš„åµŒå¥—è·¯å¾„ä¼šè¢«å½“ä½œæ ¹è·¯å¾„ã€‚è¿™è®©ä½ å……åˆ†çš„ä½¿ç”¨åµŒå¥—ç»„ä»¶è€Œæ— é¡»è®¾ç½®åµŒå¥—çš„è·¯å¾„ã€‚ä½ ä¼šå‘ç°,<code>children</code>é…ç½®å°±æ˜¯åƒ<code>routes</code>é…ç½®ä¸€æ ·çš„è·¯ç”±é…ç½®æ•°ç»„,æ‰€ä»¥å‘¢,ä½ å¯ä»¥åµŒå¥—å¤šå±‚è·¯ç”±ã€‚</p>
<p>æ­¤æ—¶,åŸºäºä¸Šé¢çš„é…ç½®,å½“ä½ è®¿é—®<code>/user/foo</code>æ—¶,<code>User</code>çš„å‡ºå£æ˜¯ä¸ä¼šæ¸²æŸ“ä»»ä½•ä¸œè¥¿,è¿™æ˜¯å› ä¸ºæ²¡æœ‰åŒ¹é…åˆ°åˆé€‚çš„å­è·¯ç”±ã€‚å¦‚æœä½ æƒ³è¦æ¸²æŸ“ç‚¹ä»€ä¹ˆ,å¯ä»¥æä¾›ä¸€ä¸ªç©ºçš„å­è·¯ç”±:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    {
      path: '/user/:id', component: User,
      children: [
        // å½“/user/:idåŒ¹é…æˆåŠŸ,
        // UserHomeä¼šè¢«æ¸²æŸ“åœ¨Userçš„&lt;router-view&gt;ä¸­
        { path: '', component: UserHome },

        // ...å…¶ä»–å­è·¯ç”±
      ]
    }
  ]
})
</code></pre>

<p>æä¾›ä»¥ä¸Šæ¡ˆä¾‹çš„å¯è¿è¡Œä»£ç è¯·<a href="https://jsfiddle.net/yyx990803/L7hscd8h/">ç§»æ­¥è¿™é‡Œ</a>ã€‚</p>
<h3 id="44">4.4 ç¼–ç¨‹å¼çš„å¯¼èˆª</h3>
<p>é™¤äº†ä½¿ç”¨<code>&lt;router-link &gt;</code>åˆ›å»ºaæ ‡ç­¾æ¥å®šä¹‰å¯¼èˆªé“¾æ¥,æˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©<code>router</code>çš„å®ä¾‹æ–¹æ³•,é€šè¿‡ç¼–å†™ä»£ç æ¥å®ç°ã€‚</p>
<ul>
<li><strong><code>router.push(location, onComplete?, onAbort?)</code></strong></li>
</ul>
<p>æ³¨æ„:åœ¨Vueå®ä¾‹å†…éƒ¨,ä½ å¯ä»¥é€šè¿‡<code>$router</code>è®¿é—®è·¯ç”±å®ä¾‹ã€‚å› æ­¤ä½ å¯ä»¥è°ƒç”¨<code>this.$router.push</code>ã€‚</p>
<p>æƒ³è¦å¯¼èˆªåˆ°ä¸åŒçš„URL,åˆ™ä½¿ç”¨<code>router.push</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå‘historyæ ˆæ·»åŠ ä¸€ä¸ªæ–°çš„è®°å½•,æ‰€ä»¥,å½“ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®æ—¶,åˆ™å›åˆ°ä¹‹å‰çš„URLã€‚å½“ä½ ç‚¹å‡»<code>&lt;router-link &gt;</code>æ—¶,è¿™ä¸ªæ–¹æ³•ä¼šåœ¨å†…éƒ¨è°ƒç”¨,æ‰€ä»¥è¯´,ç‚¹å‡»<code>&lt;router-link :to="..."\&gt;</code>ç­‰åŒäºè°ƒç”¨<code>router.push(...)</code>ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å£°æ˜å¼</th>
<th>ç¼–ç¨‹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>&lt;router-link :to="..."\&gt;</code></td>
<td><code>router.push(...)</code></td>
</tr>
</tbody>
</table>
<p>è¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è·¯å¾„,æˆ–è€…ä¸€ä¸ªæè¿°åœ°å€çš„å¯¹è±¡ã€‚ä¾‹å¦‚:</p>
<pre><code class="javascript">// å­—ç¬¦ä¸²
router.push('home')

// å¯¹è±¡
router.push({ path: 'home' })

// å‘½åçš„è·¯ç”±
router.push({ name: 'user', params: { userId: '123' }})

// å¸¦æŸ¥è¯¢å‚æ•°,å˜æˆ/register?plan=private
router.push({ path: 'register', query: { plan: 'private' }})
</code></pre>

<p>æ³¨æ„:å¦‚æœæä¾›äº†<code>path</code>,<code>params</code>ä¼šè¢«å¿½ç•¥,ä¸Šè¿°ä¾‹å­ä¸­çš„queryå¹¶ä¸å±äºè¿™ç§æƒ…å†µã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¸‹é¢ä¾‹å­çš„åšæ³•,ä½ éœ€è¦æä¾›è·¯ç”±çš„nameæˆ–æ‰‹å†™å®Œæ•´çš„å¸¦æœ‰å‚æ•°çš„<code>path</code>:</p>
<pre><code class="javascript">const userId = '123'
router.push({ name: 'user', params: { userId }}) // -&gt; /user/123
router.push({ path: `/user/${userId}` }) // -&gt; /user/123
// è¿™é‡Œçš„paramsä¸ç”Ÿæ•ˆ
router.push({ path: '/user', params: { userId }}) // -&gt; /user
</code></pre>

<p>åŒæ ·çš„è§„åˆ™ä¹Ÿé€‚ç”¨äº<code>router-link</code>ç»„ä»¶çš„<code>to</code>å±æ€§ã€‚</p>
<p>å¯é€‰çš„åœ¨<code>router.push</code>æˆ–<code>router.replace</code>ä¸­æä¾›<code>onComplete</code>å’Œ<code>onAbort</code>å›è°ƒä½œä¸ºç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ã€‚è¿™äº›å›è°ƒå°†ä¼šåœ¨å¯¼èˆªæˆåŠŸå®Œæˆ(åœ¨æ‰€æœ‰çš„å¼‚æ­¥é’©å­è¢«è§£æä¹‹å)æˆ–ç»ˆæ­¢(å¯¼èˆªåˆ°ç›¸åŒçš„è·¯ç”±ã€æˆ–åœ¨å½“å‰å¯¼èˆªå®Œæˆä¹‹å‰å¯¼èˆªåˆ°å¦ä¸€ä¸ªä¸åŒçš„è·¯ç”±)çš„æ—¶å€™è¿›è¡Œç›¸åº”çš„è°ƒç”¨ã€‚åœ¨3.1.0+,å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°,æ­¤æ—¶å¦‚æœæ”¯æŒ<code>Promise,router.push</code>æˆ–<code>router.replace</code>å°†è¿”å›ä¸€ä¸ª<code>Promise</code>ã€‚</p>
<p>æ³¨æ„: å¦‚æœç›®çš„åœ°å’Œå½“å‰è·¯ç”±ç›¸åŒ,åªæœ‰å‚æ•°å‘ç”Ÿäº†æ”¹å˜(æ¯”å¦‚ä»ä¸€ä¸ªç”¨æˆ·èµ„æ–™åˆ°å¦ä¸€ä¸ª<code>/users/1 -&gt; /users/2)</code>,ä½ éœ€è¦ä½¿ç”¨<code>beforeRouteUpdate</code>æ¥å“åº”è¿™ä¸ªå˜åŒ–(æ¯”å¦‚æŠ“å–ç”¨æˆ·ä¿¡æ¯)ã€‚</p>
<ul>
<li><strong><code>router.replace(location, onComplete?, onAbort?)</code></strong></li>
</ul>
<p>è·Ÿrouter.pushå¾ˆåƒ,å”¯ä¸€çš„ä¸åŒå°±æ˜¯,å®ƒä¸ä¼šå‘historyæ·»åŠ æ–°è®°å½•,è€Œæ˜¯è·Ÿå®ƒçš„æ–¹æ³•åä¸€æ ·â€”â€”æ›¿æ¢æ‰å½“å‰çš„historyè®°å½•ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å£°æ˜å¼</th>
<th>ç¼–ç¨‹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>&lt;router-link :to="..." replace\&gt;</code></td>
<td><code>router.replace(...)</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong><code>router.go(n)</code></strong></li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°,æ„æ€æ˜¯åœ¨<code>history</code>è®°å½•ä¸­å‘å‰æˆ–è€…åé€€å¤šå°‘æ­¥,ç±»ä¼¼<code>window.history.go(n)</code>ã€‚ä¾‹å­:</p>
<pre><code class="javascript">// åœ¨æµè§ˆå™¨è®°å½•ä¸­å‰è¿›ä¸€æ­¥,ç­‰åŒäºhistory.forward()
router.go(1)

// åé€€ä¸€æ­¥è®°å½•,ç­‰åŒäºhistory.back()
router.go(-1)

// å‰è¿›3æ­¥è®°å½•
router.go(3)

// å¦‚æœhistoryè®°å½•ä¸å¤Ÿç”¨,é‚£å°±é»˜é»˜åœ°å¤±è´¥å‘—
router.go(-100)
router.go(100)
</code></pre>

<ul>
<li><strong>æ“ä½œ<code>History</code></strong></li>
</ul>
<p>ä½ ä¹Ÿè®¸æ³¨æ„åˆ°<code>router.push</code>ã€<code>router.replace</code>å’Œ<code>router.go</code>è·Ÿ<code>window.history.pushState</code>ã€<code>window.history.replaceState</code>å’Œ<code>window.history.go</code>å¥½åƒ,å®é™…ä¸Šå®ƒä»¬ç¡®å®æ˜¯æ•ˆä»¿<code>window.history</code> APIçš„ã€‚</p>
<p>å› æ­¤,å¦‚æœä½ å·²ç»ç†Ÿæ‚‰<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">Browser History APIs</a>,é‚£ä¹ˆåœ¨Vue Routerä¸­æ“ä½œ<code>history</code>å°±æ˜¯è¶…çº§ç®€å•çš„ã€‚è¿˜æœ‰å€¼å¾—æåŠçš„,Vue Routerçš„å¯¼èˆªæ–¹æ³•(<code>push</code>ã€<code>replace</code>ã€<code>go</code>)åœ¨å„ç±»è·¯ç”±æ¨¡å¼(<code>history</code>ã€<code>hash</code>å’Œ<code>abstract</code>)ä¸‹è¡¨ç°ä¸€è‡´ã€‚</p>
<h3 id="45">4.5 å‘½åè·¯ç”±</h3>
<p>æœ‰æ—¶å€™,é€šè¿‡ä¸€ä¸ªåç§°æ¥æ ‡è¯†ä¸€ä¸ªè·¯ç”±æ˜¾å¾—æ›´æ–¹ä¾¿ä¸€äº›,ç‰¹åˆ«æ˜¯åœ¨é“¾æ¥ä¸€ä¸ªè·¯ç”±,æˆ–è€…æ˜¯æ‰§è¡Œä¸€äº›è·³è½¬çš„æ—¶å€™ã€‚ä½ å¯ä»¥åœ¨åˆ›å»ºRouterå®ä¾‹çš„æ—¶å€™,åœ¨<code>routes</code>é…ç½®ä¸­ç»™æŸä¸ªè·¯ç”±è®¾ç½®åç§°ã€‚</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    {
      path: '/user/:userId',
      name: 'user',
      component: User
    }
  ]
})
</code></pre>

<p>è¦é“¾æ¥åˆ°ä¸€ä¸ªå‘½åè·¯ç”±,å¯ä»¥ç»™<code>router-link</code>çš„<code>to</code>å±æ€§ä¼ ä¸€ä¸ªå¯¹è±¡:</p>
<pre><code class="javascript">&lt;router-link :to=&quot;{ name: 'user', params: { userId: 123 }}&quot;&gt;User&lt;/router-link&gt;
</code></pre>

<p>è¿™è·Ÿä»£ç è°ƒç”¨<code>router.push()</code>æ˜¯ä¸€å›äº‹:</p>
<pre><code class="javascript">router.push({ name: 'user', params: { userId: 123 }})
</code></pre>

<p>è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šæŠŠè·¯ç”±å¯¼èˆªåˆ°<code>/user/123</code>è·¯å¾„ã€‚<a href="https://github.com/vuejs/vue-router/blob/dev/examples/named-routes/app.js">å®Œæ•´çš„ä¾‹å­</a>è¯·ç§»æ­¥è¿™é‡Œã€‚</p>
<h3 id="46">4.6 å‘½åè§†å›¾</h3>
<p>æœ‰æ—¶å€™æƒ³åŒæ—¶(åŒçº§)å±•ç¤ºå¤šä¸ªè§†å›¾,è€Œä¸æ˜¯åµŒå¥—å±•ç¤º,ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå¸ƒå±€,æœ‰<code>sidebar</code>(ä¾§å¯¼èˆª)å’Œ<code>main</code>(ä¸»å†…å®¹)ä¸¤ä¸ªè§†å›¾,è¿™ä¸ªæ—¶å€™å‘½åè§†å›¾å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ä½ å¯ä»¥åœ¨ç•Œé¢ä¸­æ‹¥æœ‰å¤šä¸ªå•ç‹¬å‘½åçš„è§†å›¾,è€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªå•ç‹¬çš„å‡ºå£ã€‚å¦‚æœ<code>router-view</code>æ²¡æœ‰è®¾ç½®åå­—,é‚£ä¹ˆé»˜è®¤ä¸ºdefaultã€‚</p>
<pre><code class="javascript">&lt;router-view class=&quot;view one&quot;&gt;&lt;/router-view&gt;
&lt;router-view class=&quot;view two&quot; name=&quot;a&quot;&gt;&lt;/router-view&gt;
&lt;router-view class=&quot;view three&quot; name=&quot;b&quot;&gt;&lt;/router-view&gt;
</code></pre>

<p>ä¸€ä¸ªè§†å›¾ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ¸²æŸ“,å› æ­¤å¯¹äºåŒä¸ªè·¯ç”±,å¤šä¸ªè§†å›¾å°±éœ€è¦å¤šä¸ªç»„ä»¶ã€‚ç¡®ä¿æ­£ç¡®ä½¿ç”¨<code>components</code>é…ç½®(å¸¦ä¸Šs):</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    {
      path: '/',
      components: {
        default: Foo,
        a: Bar,
        b: Baz
      }
    }
  ]
})
</code></pre>

<p>ä»¥ä¸Šæ¡ˆä¾‹ç›¸å…³çš„å¯è¿è¡Œä»£ç è¯·<a href="https://jsfiddle.net/posva/6du90epg/">ç§»æ­¥è¿™é‡Œ</a>ã€‚</p>
<ul>
<li><strong>åµŒå¥—å‘½åè§†å›¾</strong></li>
</ul>
<p>æˆ‘ä»¬ä¹Ÿæœ‰å¯èƒ½ä½¿ç”¨å‘½åè§†å›¾åˆ›å»ºåµŒå¥—è§†å›¾çš„å¤æ‚å¸ƒå±€ã€‚è¿™æ—¶ä½ ä¹Ÿéœ€è¦å‘½åç”¨åˆ°çš„åµŒå¥—<code>router-view</code>ç»„ä»¶ã€‚æˆ‘ä»¬ä»¥ä¸€ä¸ªè®¾ç½®é¢æ¿ä¸ºä¾‹:</p>
<pre><code class="html">/settings/emails                                       /settings/profile
+-----------------------------------+                  +------------------------------+
| UserSettings                      |                  | UserSettings                 |
| +-----+-------------------------+ |                  | +-----+--------------------+ |
| | Nav | UserEmailsSubscriptions | |  +------------&gt;  | | Nav | UserProfile        | |
| |     +-------------------------+ |                  | |     +--------------------+ |
| |     |                         | |                  | |     | UserProfilePreview | |
| +-----+-------------------------+ |                  | +-----+--------------------+ |
+-----------------------------------+                  +------------------------------+
</code></pre>

<blockquote>
<ol>
<li><code>Nav</code>åªæ˜¯ä¸€ä¸ªå¸¸è§„ç»„ä»¶ã€‚</li>
<li><code>UserSettings</code>æ˜¯ä¸€ä¸ªè§†å›¾ç»„ä»¶ã€‚</li>
<li><code>UserEmailsSubscriptions</code>ã€<code>UserProfile</code>ã€<code>UserProfilePreview</code>æ˜¯åµŒå¥—çš„è§†å›¾ç»„ä»¶ã€‚</li>
</ol>
</blockquote>
<p>æ³¨æ„:æˆ‘ä»¬å…ˆå¿˜è®°HTML/CSSå…·ä½“çš„å¸ƒå±€çš„æ ·å­,åªä¸“æ³¨åœ¨ç”¨åˆ°çš„ç»„ä»¶ä¸Šã€‚</p>
<p><code>UserSettings</code>ç»„ä»¶çš„<code>&lt;template\&gt;</code>éƒ¨åˆ†åº”è¯¥æ˜¯ç±»ä¼¼ä¸‹é¢çš„è¿™æ®µä»£ç :</p>
<pre><code class="html">&lt;!-- UserSettings.vue --&gt;
&lt;div&gt;
  &lt;h1&gt;User Settings&lt;/h1&gt;
  &lt;NavBar/&gt;
  &lt;router-view/&gt;
  &lt;router-view name=&quot;helper&quot;/&gt;
&lt;/div&gt;
</code></pre>

<p>åµŒå¥—çš„è§†å›¾ç»„ä»¶åœ¨æ­¤å·²ç»è¢«å¿½ç•¥äº†,ä½†æ˜¯ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„æºä»£ç ã€‚ç„¶åä½ å¯ä»¥ç”¨è¿™ä¸ªè·¯ç”±é…ç½®å®Œæˆè¯¥å¸ƒå±€:</p>
<pre><code class="javascript">{
  path: '/settings',
  // ä½ ä¹Ÿå¯ä»¥åœ¨é¡¶çº§è·¯ç”±å°±é…ç½®å‘½åè§†å›¾
  component: UserSettings,
  children: [{
    path: 'emails',
    component: UserEmailsSubscriptions
  }, {
    path: 'profile',
    components: {
      default: UserProfile,
      helper: UserProfilePreview
    }
  }]
}
</code></pre>

<p>ä¸€ä¸ªå¯ä»¥å·¥ä½œçš„ç¤ºä¾‹çš„<a href="https://jsfiddle.net/posva/22wgksa3/">demo</a>åœ¨è¿™é‡Œã€‚</p>
<h3 id="47">4.7 é‡å®šå‘å’Œåˆ«å</h3>
<ul>
<li><strong>é‡å®šå‘</strong></li>
</ul>
<p>é‡å®šå‘ä¹Ÿæ˜¯é€šè¿‡<code>routes</code>é…ç½®æ¥å®Œæˆ,ä¸‹é¢ä¾‹å­æ˜¯ä»/aé‡å®šå‘åˆ°/b:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/a', redirect: '/b' }
  ]
})
</code></pre>

<p>é‡å®šå‘çš„ç›®æ ‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘½åçš„è·¯ç”±:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/a', redirect: { name: 'foo' }}
  ]
})
</code></pre>

<p>ç”šè‡³æ˜¯ä¸€ä¸ªæ–¹æ³•,åŠ¨æ€è¿”å›é‡å®šå‘ç›®æ ‡:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/a', redirect: to =&gt; {
      // æ–¹æ³•æ¥æ”¶ç›®æ ‡è·¯ç”±ä½œä¸ºå‚æ•°
      // returné‡å®šå‘çš„å­—ç¬¦ä¸²è·¯å¾„/è·¯å¾„å¯¹è±¡
    }}
  ]
})
</code></pre>

<p>æ³¨æ„å¯¼èˆªå®ˆå«å¹¶æ²¡æœ‰åº”ç”¨åœ¨è·³è½¬è·¯ç”±ä¸Š,è€Œä»…ä»…åº”ç”¨åœ¨å…¶ç›®æ ‡ä¸Šã€‚åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­,ä¸º<code>/a</code>è·¯ç”±æ·»åŠ ä¸€ä¸ª<code>beforeEach</code>æˆ–<code>beforeLeave</code>å®ˆå«å¹¶ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚</p>
<ul>
<li><strong>åˆ«å</strong></li>
</ul>
<p>â€œé‡å®šå‘â€çš„æ„æ€æ˜¯,å½“ç”¨æˆ·è®¿é—®<code>/a</code>æ—¶,URLå°†ä¼šè¢«æ›¿æ¢æˆ<code>/b</code>,ç„¶ååŒ¹é…è·¯ç”±ä¸º<code>/b</code>,é‚£ä¹ˆâ€œåˆ«åâ€åˆæ˜¯ä»€ä¹ˆå‘¢?<code>/a</code>çš„åˆ«åæ˜¯<code>/b</code>,æ„å‘³ç€,å½“ç”¨æˆ·è®¿é—®<code>/b</code>æ—¶,URLä¼šä¿æŒä¸º<code>/b</code>,ä½†æ˜¯è·¯ç”±åŒ¹é…åˆ™ä¸º<code>/a</code>,å°±åƒç”¨æˆ·è®¿é—®<code>/a</code>ä¸€æ ·ã€‚</p>
<p>ä¸Šé¢å¯¹åº”çš„è·¯ç”±é…ç½®ä¸º:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/a', component: A, alias: '/b' }
  ]
})
</code></pre>

<p>â€œåˆ«åâ€çš„åŠŸèƒ½è®©ä½ å¯ä»¥è‡ªç”±åœ°å°†UIç»“æ„æ˜ å°„åˆ°ä»»æ„çš„URL,è€Œä¸æ˜¯å—é™äºé…ç½®çš„åµŒå¥—è·¯ç”±ç»“æ„ã€‚</p>
<p>æ›´å¤šé«˜çº§ç”¨æ³•,è¯·æŸ¥çœ‹<a href="https://github.com/vuejs/vue-router/blob/dev/examples/route-alias/app.js">ä¾‹å­</a>ã€‚</p>
<h3 id="48">4.8 è·¯ç”±ç»„ä»¶ä¼ å‚</h3>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨<code>$route</code>ä¼šä½¿ä¹‹ä¸å…¶å¯¹åº”è·¯ç”±å½¢æˆé«˜åº¦è€¦åˆ,ä»è€Œä½¿ç»„ä»¶åªèƒ½åœ¨æŸäº›ç‰¹å®šçš„URLä¸Šä½¿ç”¨,é™åˆ¶äº†å…¶çµæ´»æ€§ã€‚</p>
<p>ä½¿ç”¨<code>props</code>å°†ç»„ä»¶å’Œè·¯ç”±è§£è€¦:</p>
<blockquote>
<ol>
<li>å–ä»£ä¸<code>$route</code>çš„è€¦åˆ</li>
</ol>
</blockquote>
<pre><code class="javascript">const User = {
  template: '&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'
}
const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User }
  ]
})
</code></pre>

<blockquote>
<ol>
<li>é€šè¿‡<code>props</code>è§£è€¦</li>
</ol>
</blockquote>
<pre><code class="javascript">const User = {
  props: ['id'],
  template: '&lt;div&gt;User {{ id }}&lt;/div&gt;'
}
const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User, props: true },

    // å¯¹äºåŒ…å«å‘½åè§†å›¾çš„è·¯ç”±,ä½ å¿…é¡»åˆ†åˆ«ä¸ºæ¯ä¸ªå‘½åè§†å›¾æ·»åŠ propsé€‰é¡¹:
    {
      path: '/user/:id',
      components: { default: User, sidebar: Sidebar },
      props: { default: true, sidebar: false }
    }
  ]
})
</code></pre>

<p>è¿™æ ·ä½ ä¾¿å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¯¥ç»„ä»¶,ä½¿å¾—è¯¥ç»„ä»¶æ›´æ˜“äºé‡ç”¨å’Œæµ‹è¯•ã€‚</p>
<ul>
<li><strong>å¸ƒå°”æ¨¡å¼</strong></li>
</ul>
<p>å¦‚æœ<code>props</code>è¢«è®¾ç½®ä¸º<code>true</code>,<code>route.params</code>å°†ä¼šè¢«è®¾ç½®ä¸ºç»„ä»¶å±æ€§ã€‚</p>
<ul>
<li><strong>å¯¹è±¡æ¨¡å¼</strong></li>
</ul>
<p>å¦‚æœ<code>props</code>æ˜¯ä¸€ä¸ªå¯¹è±¡,å®ƒä¼šè¢«æŒ‰åŸæ ·è®¾ç½®ä¸ºç»„ä»¶å±æ€§ã€‚å½“<code>props</code>æ˜¯é™æ€çš„æ—¶å€™æœ‰ç”¨ã€‚</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/promotion/from-newsletter', component: Promotion, props: { newsletterPopup: false } }
  ]
})
</code></pre>

<ul>
<li><strong>å‡½æ•°æ¨¡å¼</strong></li>
</ul>
<p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿”å›<code>props</code>ã€‚è¿™æ ·ä½ ä¾¿å¯ä»¥å°†å‚æ•°è½¬æ¢æˆå¦ä¸€ç§ç±»å‹,å°†é™æ€å€¼ä¸åŸºäºè·¯ç”±çš„å€¼ç»“åˆç­‰ç­‰ã€‚</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/search', component: SearchUser, props: (route) =&gt; ({ query: route.query.q }) }
  ]
})
</code></pre>

<p>URL <code>/search?q=vue</code>ä¼šå°†<code>{query: 'vue'}</code>ä½œä¸ºå±æ€§ä¼ é€’ç»™<code>SearchUser</code>ç»„ä»¶ã€‚</p>
<p>è¯·å°½å¯èƒ½ä¿æŒ<code>props</code>å‡½æ•°ä¸ºæ— çŠ¶æ€çš„,å› ä¸ºå®ƒåªä¼šåœ¨è·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶èµ·ä½œç”¨ã€‚å¦‚æœä½ éœ€è¦çŠ¶æ€æ¥å®šä¹‰<code>props</code>,è¯·ä½¿ç”¨åŒ…è£…ç»„ä»¶,è¿™æ ·Vueæ‰å¯ä»¥å¯¹çŠ¶æ€å˜åŒ–åšå‡ºååº”ã€‚æ›´å¤šé«˜çº§ç”¨æ³•,è¯·æŸ¥çœ‹<a href="https://github.com/vuejs/vue-router/blob/dev/examples/route-props/app.js">ä¾‹å­</a>ã€‚</p>
<h3 id="49-html5-history">4.9 HTML5 <code>History</code>æ¨¡å¼</h3>
<p><code>vue-router</code>é»˜è®¤<code>hash</code>æ¨¡å¼â€”â€” ä½¿ç”¨URLçš„<code>hash</code>æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„<code>URL</code>,äºæ˜¯å½“URLæ”¹å˜æ—¶,é¡µé¢ä¸ä¼šé‡æ–°åŠ è½½ã€‚</p>
<p>å¦‚æœä¸æƒ³è¦å¾ˆä¸‘çš„<code>hash</code>,æˆ‘ä»¬å¯ä»¥ç”¨è·¯ç”±çš„<code>history</code>æ¨¡å¼,è¿™ç§æ¨¡å¼å……åˆ†åˆ©ç”¨<code>history.pushState</code> APIæ¥å®ŒæˆURLè·³è½¬è€Œæ— é¡»é‡æ–°åŠ è½½é¡µé¢ã€‚</p>
<pre><code class="javascript">const router = new VueRouter({
  mode: 'history',
  routes: [...]
})
</code></pre>

<p>å½“ä½ ä½¿ç”¨<code>history</code>æ¨¡å¼æ—¶,URLå°±åƒæ­£å¸¸çš„<code>url</code>,ä¾‹å¦‚<code>http://yoursite.com/user/id</code>,ä¹Ÿå¥½çœ‹!ä¸è¿‡è¿™ç§æ¨¡å¼è¦ç©å¥½,è¿˜éœ€è¦åå°é…ç½®æ”¯æŒã€‚å› ä¸ºæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸ªå•é¡µå®¢æˆ·ç«¯åº”ç”¨,å¦‚æœåå°æ²¡æœ‰æ­£ç¡®çš„é…ç½®,å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ç›´æ¥è®¿é—®<code>http://oursite.com/user/id</code>å°±ä¼šè¿”å›<code>404</code>,è¿™å°±ä¸å¥½çœ‹äº†ã€‚</p>
<p>æ‰€ä»¥å‘¢,ä½ è¦åœ¨æœåŠ¡ç«¯å¢åŠ ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„å€™é€‰èµ„æº:å¦‚æœURLåŒ¹é…ä¸åˆ°ä»»ä½•é™æ€èµ„æº,åˆ™åº”è¯¥è¿”å›åŒä¸€ä¸ª<code>index.html</code>é¡µé¢,è¿™ä¸ªé¡µé¢å°±æ˜¯ä½ appä¾èµ–çš„é¡µé¢ã€‚</p>
<ul>
<li><strong>åç«¯é…ç½®ä¾‹å­</strong></li>
</ul>
<blockquote>
<ul>
<li><strong><code>Apache</code></strong></li>
</ul>
</blockquote>
<pre><code class="html">&lt;IfModule mod_rewrite.c&gt;
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
&lt;/IfModule&gt;
</code></pre>

<p>é™¤äº†<code>mod_rewrite</code>,ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>FallbackResource</code>ã€‚</p>
<blockquote>
<ul>
<li><strong>nginx</strong></li>
</ul>
</blockquote>
<pre><code class="html">location / {
  try_files $uri $uri/ /index.html;
}
</code></pre>

<blockquote>
<ul>
<li><strong>åŸç”Ÿ<code>Node.js</code></strong></li>
</ul>
</blockquote>
<pre><code class="javascript">const http = require('http')
const fs = require('fs')
const httpPort = 80

http.createServer((req, res) =&gt; {
  fs.readFile('index.htm', 'utf-8', (err, content) =&gt; {
    if (err) {
      console.log('We cannot open &quot;index.htm&quot; file.')
    }

    res.writeHead(200, {
      'Content-Type': 'text/html; charset=utf-8'
    })

    res.end(content)
  })
}).listen(httpPort, () =&gt; {
  console.log('Server listening on: http://localhost:%s', httpPort)
})
</code></pre>

<blockquote>
<ul>
<li><strong>åŸºäº<code>Node.js</code>çš„<code>Express</code></strong></li>
</ul>
</blockquote>
<p>å¯¹äº<code>Node.js/Express</code>,è¯·è€ƒè™‘ä½¿ç”¨<a href="https://github.com/bripkens/connect-history-api-fallback"><code>connect-history-api-fallback</code>ä¸­é—´ä»¶</a>ã€‚</p>
<blockquote>
<ul>
<li><strong><code>Internet Information Services(IIS)</code></strong></li>
</ul>
</blockquote>
<p>å®‰è£…<code>IIS UrlRewrite</code>,åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>web.config</code>æ–‡ä»¶,å†…å®¹å¦‚ä¸‹:</p>
<pre><code class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;rewrite&gt;
      &lt;rules&gt;
        &lt;rule name=&quot;Handle History Mode and custom 404/500&quot; stopProcessing=&quot;true&quot;&gt;
          &lt;match url=&quot;(.*)&quot; /&gt;
          &lt;conditions logicalGrouping=&quot;MatchAll&quot;&gt;
            &lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsFile&quot; negate=&quot;true&quot; /&gt;
            &lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsDirectory&quot; negate=&quot;true&quot; /&gt;
          &lt;/conditions&gt;
          &lt;action type=&quot;Rewrite&quot; url=&quot;/&quot; /&gt;
        &lt;/rule&gt;
      &lt;/rules&gt;
    &lt;/rewrite&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
#Caddy
rewrite {
    regexp .*
    to {path} /
}
</code></pre>

<blockquote>
<ul>
<li><strong><code>Firebase</code>ä¸»æœº</strong></li>
</ul>
</blockquote>
<p>åœ¨ä½ çš„<code>firebase.json</code>ä¸­åŠ å…¥:</p>
<pre><code class="javascript">{
  &quot;hosting&quot;: {
    &quot;public&quot;: &quot;dist&quot;,
    &quot;rewrites&quot;: [
      {
        &quot;source&quot;: &quot;**&quot;,
        &quot;destination&quot;: &quot;/index.html&quot;
      }
    ]
  }
}
</code></pre>

<ul>
<li><strong>è­¦å‘Š</strong></li>
</ul>
<p>ç»™ä¸ªè­¦å‘Š,å› ä¸ºè¿™ä¹ˆåšä»¥å,ä½ çš„æœåŠ¡å™¨å°±ä¸å†è¿”å›<code>404</code>é”™è¯¯é¡µé¢,å› ä¸ºå¯¹äºæ‰€æœ‰è·¯å¾„éƒ½ä¼šè¿”å›<code>index.html</code>æ–‡ä»¶ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µ,ä½ åº”è¯¥åœ¨Vueåº”ç”¨é‡Œé¢è¦†ç›–æ‰€æœ‰çš„è·¯ç”±æƒ…å†µ,ç„¶ååœ¨ç»™å‡ºä¸€ä¸ª404é¡µé¢ã€‚</p>
<pre><code class="javascript">const router = new VueRouter({
  mode: 'history',
  routes: [
    { path: '*', component: NotFoundComponent }
  ]
})
</code></pre>

<p>æˆ–è€…,å¦‚æœä½ ä½¿ç”¨<code>Node.js</code>æœåŠ¡å™¨,ä½ å¯ä»¥ç”¨æœåŠ¡ç«¯è·¯ç”±åŒ¹é…åˆ°æ¥çš„URL,å¹¶åœ¨æ²¡æœ‰åŒ¹é…åˆ°è·¯ç”±çš„æ—¶å€™è¿”å›<code>404</code>,ä»¥å®ç°å›é€€ã€‚æ›´å¤šè¯¦æƒ…è¯·æŸ¥é˜…<a href="https://ssr.vuejs.org/zh/">VueæœåŠ¡ç«¯æ¸²æŸ“æ–‡æ¡£</a>ã€‚</p>
<h3 id="410">4.10 å¯¼èˆªå®ˆå«</h3>
<p>â€œå¯¼èˆªâ€è¡¨ç¤ºè·¯ç”±æ­£åœ¨å‘ç”Ÿæ”¹å˜ã€‚æ­£å¦‚å…¶å,<code>vue-router</code>æä¾›çš„å¯¼èˆªå®ˆå«ä¸»è¦ç”¨æ¥é€šè¿‡è·³è½¬æˆ–å–æ¶ˆçš„æ–¹å¼å®ˆå«å¯¼èˆªã€‚æœ‰å¤šç§æœºä¼šæ¤å…¥è·¯ç”±å¯¼èˆªè¿‡ç¨‹ä¸­:å…¨å±€çš„,å•ä¸ªè·¯ç”±ç‹¬äº«çš„,æˆ–è€…ç»„ä»¶çº§çš„ã€‚è®°ä½å‚æ•°æˆ–æŸ¥è¯¢çš„æ”¹å˜å¹¶ä¸ä¼šè§¦å‘è¿›å…¥/ç¦»å¼€çš„å¯¼èˆªå®ˆå«ã€‚ä½ å¯ä»¥é€šè¿‡è§‚å¯Ÿ<code>$route</code>å¯¹è±¡æ¥åº”å¯¹è¿™äº›å˜åŒ–,æˆ–ä½¿ç”¨<code>beforeRouteUpdate</code>çš„ç»„ä»¶å†…å®ˆå«ã€‚</p>
<ul>
<li><strong>å…¨å±€å‰ç½®å®ˆå«</strong></li>
</ul>
<p>ä½ å¯ä»¥ä½¿ç”¨router.beforeEachæ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«:</p>
<pre><code class="javascript">const router = new VueRouter({ ... })

router.beforeEach((to, from, next) =&gt; {
  // ...
})
</code></pre>

<p>å½“ä¸€ä¸ªå¯¼èˆªè§¦å‘æ—¶,å…¨å±€å‰ç½®å®ˆå«æŒ‰ç…§åˆ›å»ºé¡ºåºè°ƒç”¨ã€‚å®ˆå«æ˜¯å¼‚æ­¥è§£ææ‰§è¡Œ,æ­¤æ—¶å¯¼èˆªåœ¨æ‰€æœ‰å®ˆå«resolveå®Œä¹‹å‰ä¸€ç›´å¤„äºç­‰å¾…ä¸­ã€‚</p>
<p>æ¯ä¸ªå®ˆå«æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°:</p>
<blockquote>
<ol>
<li><code>to</code>: <code>Route</code>,å³å°†è¦è¿›å…¥çš„ç›®æ ‡è·¯ç”±å¯¹è±¡</li>
<li><code>from</code>: <code>Route</code>,å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±</li>
<li><code>next</code>: <code>Function</code>,ä¸€å®šè¦è°ƒç”¨è¯¥æ–¹æ³•æ¥<code>resolve</code>è¿™ä¸ªé’©å­ã€‚æ‰§è¡Œæ•ˆæœä¾èµ–<code>next</code>æ–¹æ³•çš„è°ƒç”¨å‚æ•°ã€‚</li>
<li><code>next()</code>: è¿›è¡Œç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªé’©å­ã€‚å¦‚æœå…¨éƒ¨é’©å­æ‰§è¡Œå®Œäº†,åˆ™å¯¼èˆªçš„çŠ¶æ€å°±æ˜¯<code>confirmed</code>(ç¡®è®¤çš„)ã€‚</li>
<li><code>next(false)</code>: ä¸­æ–­å½“å‰çš„å¯¼èˆªã€‚å¦‚æœæµè§ˆå™¨çš„URLæ”¹å˜äº†(å¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–è€…æµè§ˆå™¨åé€€æŒ‰é’®),é‚£ä¹ˆURLåœ°å€ä¼šé‡ç½®åˆ°<code>from</code>è·¯ç”±å¯¹åº”çš„åœ°å€ã€‚</li>
<li><code>next('/')</code>æˆ–è€…<code>next({ path: '/' })</code>: è·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ã€‚å½“å‰çš„å¯¼èˆªè¢«ä¸­æ–­,ç„¶åè¿›è¡Œä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚ä½ å¯ä»¥å‘nextä¼ é€’ä»»æ„ä½ç½®å¯¹è±¡,ä¸”å…è®¸è®¾ç½®è¯¸å¦‚<code>replace: true</code>ã€<code>name: 'home'</code>ä¹‹ç±»çš„é€‰é¡¹ä»¥åŠä»»ä½•ç”¨åœ¨<code>router-link</code>çš„<code>to prop</code>æˆ–<code>router.push</code>ä¸­çš„é€‰é¡¹ã€‚</li>
<li><code>next(error)</code>: å¦‚æœä¼ å…¥<code>next</code>çš„å‚æ•°æ˜¯ä¸€ä¸ª<code>Error</code>å®ä¾‹,åˆ™å¯¼èˆªä¼šè¢«ç»ˆæ­¢ä¸”è¯¥é”™è¯¯ä¼šè¢«ä¼ é€’ç»™<code>router.onError()</code>æ³¨å†Œè¿‡çš„å›è°ƒã€‚</li>
</ol>
</blockquote>
<p>ç¡®ä¿è¦è°ƒç”¨<code>next</code>æ–¹æ³•,å¦åˆ™é’©å­å°±ä¸ä¼šè¢«<code>resolved</code>ã€‚</p>
<ul>
<li><strong>å…¨å±€è§£æå®ˆå«</strong></li>
</ul>
<p>åœ¨2.5.0+ä½ å¯ä»¥ç”¨<code>router.beforeResolve</code>æ³¨å†Œä¸€ä¸ªå…¨å±€å®ˆå«ã€‚è¿™å’Œ<code>router.beforeEach</code>ç±»ä¼¼,åŒºåˆ«æ˜¯åœ¨å¯¼èˆªè¢«ç¡®è®¤ä¹‹å‰,åŒæ—¶åœ¨æ‰€æœ‰ç»„ä»¶å†…å®ˆå«å’Œå¼‚æ­¥è·¯ç”±ç»„ä»¶è¢«è§£æä¹‹å,è§£æå®ˆå«å°±è¢«è°ƒç”¨ã€‚</p>
<ul>
<li><strong>å…¨å±€åç½®é’©å­</strong></li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥æ³¨å†Œå…¨å±€åç½®é’©å­,ç„¶è€Œå’Œå®ˆå«ä¸åŒçš„æ˜¯,è¿™äº›é’©å­ä¸ä¼šæ¥å—nextå‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜å¯¼èˆªæœ¬èº«:</p>
<pre><code class="javascript">router.afterEach((to, from) =&gt; {
  // ...
})
</code></pre>

<ul>
<li><strong>è·¯ç”±ç‹¬äº«çš„å®ˆå«</strong></li>
</ul>
<p>ä½ å¯ä»¥åœ¨è·¯ç”±é…ç½®ä¸Šç›´æ¥å®šä¹‰<code>beforeEnter</code>å®ˆå«:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    {
      path: '/foo',
      component: Foo,
      beforeEnter: (to, from, next) =&gt; {
        // ...
      }
    }
  ]
})
</code></pre>

<p>è¿™äº›å®ˆå«ä¸å…¨å±€å‰ç½®å®ˆå«çš„æ–¹æ³•å‚æ•°æ˜¯ä¸€æ ·çš„ã€‚</p>
<ul>
<li><strong>ç»„ä»¶å†…çš„å®ˆå«</strong></li>
</ul>
<p>æœ€å,ä½ å¯ä»¥åœ¨è·¯ç”±ç»„ä»¶å†…ç›´æ¥å®šä¹‰ä»¥ä¸‹è·¯ç”±å¯¼èˆªå®ˆå«:<code>beforeRouteEnter</code>,<code>beforeRouteUpdate</code>,<code>beforeRouteLeave</code>ã€‚</p>
<pre><code class="javascript">const Foo = {
  template: `...`,
  beforeRouteEnter (to, from, next) {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«confirmå‰è°ƒç”¨
    // ä¸èƒ½ è·å–ç»„ä»¶å®ä¾‹this
    // å› ä¸ºå½“å®ˆå«æ‰§è¡Œå‰,ç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»º
  },
  beforeRouteUpdate (to, from, next) {
    // åœ¨å½“å‰è·¯ç”±æ”¹å˜,ä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    // ä¸¾ä¾‹æ¥è¯´,å¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„/foo/:id,åœ¨/foo/1å’Œ/foo/2ä¹‹é—´è·³è½¬çš„æ—¶å€™,
    // ç”±äºä¼šæ¸²æŸ“åŒæ ·çš„Fooç»„ä»¶,å› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚
    // å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹this
  },
  beforeRouteLeave (to, from, next) {
    // å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    // å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹this
  }
}
</code></pre>

<p><code>beforeRouteEnter</code>å®ˆå«ä¸èƒ½è®¿é—®<code>this</code>,å› ä¸ºå®ˆå«åœ¨å¯¼èˆªç¡®è®¤å‰è¢«è°ƒç”¨,å› æ­¤å³å°†ç™»åœºçš„æ–°ç»„ä»¶è¿˜æ²¡è¢«åˆ›å»ºã€‚ä¸è¿‡,ä½ å¯ä»¥é€šè¿‡ä¼ ä¸€ä¸ªå›è°ƒç»™<code>next</code>æ¥è®¿é—®ç»„ä»¶å®ä¾‹ã€‚åœ¨å¯¼èˆªè¢«ç¡®è®¤çš„æ—¶å€™æ‰§è¡Œå›è°ƒ,å¹¶ä¸”æŠŠç»„ä»¶å®ä¾‹ä½œä¸ºå›è°ƒæ–¹æ³•çš„å‚æ•°ã€‚</p>
<pre><code class="javascript">beforeRouteEnter (to, from, next) {
  next(vm =&gt; {
    // é€šè¿‡ `vm` è®¿é—®ç»„ä»¶å®ä¾‹
  })
}
</code></pre>

<p>æ³¨æ„<code>beforeRouteEnter</code>æ˜¯æ”¯æŒç»™<code>next</code>ä¼ é€’å›è°ƒçš„å”¯ä¸€å®ˆå«ã€‚å¯¹äº<code>beforeRouteUpdate</code>å’Œ<code>beforeRouteLeave</code>æ¥è¯´,<code>this</code>å·²ç»å¯ç”¨äº†,æ‰€ä»¥ä¸æ”¯æŒä¼ é€’å›è°ƒ,å› ä¸ºæ²¡æœ‰å¿…è¦äº†ã€‚</p>
<pre><code class="javascript">beforeRouteUpdate (to, from, next) {
  // just use `this`
  this.name = to.params.name
  next()
}
</code></pre>

<p>è¿™ä¸ªç¦»å¼€å®ˆå«é€šå¸¸ç”¨æ¥ç¦æ­¢ç”¨æˆ·åœ¨è¿˜æœªä¿å­˜ä¿®æ”¹å‰çªç„¶ç¦»å¼€ã€‚è¯¥å¯¼èˆªå¯ä»¥é€šè¿‡<code>next(false)</code>æ¥å–æ¶ˆã€‚</p>
<pre><code class="javascript">beforeRouteLeave (to, from , next) {
  const answer = window.confirm('Do you really want to leave? you have unsaved changes!')
  if (answer) {
    next()
  } else {
    next(false)
  }
}
</code></pre>

<ul>
<li><strong>å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹</strong></li>
</ul>
<blockquote>
<ol>
<li>å¯¼èˆªè¢«è§¦å‘ã€‚</li>
<li>åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ç¦»å¼€å®ˆå«ã€‚</li>
<li>è°ƒç”¨å…¨å±€çš„<code>beforeEach</code>å®ˆå«ã€‚</li>
<li>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨<code>beforeRouteUpdate</code>å®ˆå«ã€‚</li>
<li>åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨<code>beforeEnter</code>ã€‚</li>
<li>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚</li>
<li>åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨<code>beforeRouteEnter</code>ã€‚</li>
<li>è°ƒç”¨å…¨å±€çš„<code>beforeResolve</code>å®ˆå«ã€‚</li>
<li>å¯¼èˆªè¢«ç¡®è®¤ã€‚</li>
<li>è°ƒç”¨å…¨å±€çš„<code>afterEach</code>é’©å­ã€‚</li>
<li>è§¦å‘DOMæ›´æ–°ã€‚</li>
<li>ç”¨åˆ›å»ºå¥½çš„å®ä¾‹è°ƒç”¨<code>beforeRouteEnter</code>å®ˆå«ä¸­ä¼ ç»™<code>next</code>çš„å›è°ƒå‡½æ•°ã€‚</li>
</ol>
</blockquote>
<h3 id="411">4.11 è·¯ç”±å…ƒä¿¡æ¯</h3>
<p>å®šä¹‰è·¯ç”±çš„æ—¶å€™å¯ä»¥é…ç½®<code>meta</code>å­—æ®µ:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    {
      path: '/foo',
      component: Foo,
      children: [
        {
          path: 'bar',
          component: Bar,
          // a meta field
          meta: { requiresAuth: true }
        }
      ]
    }
  ]
})
</code></pre>

<p>é‚£ä¹ˆå¦‚ä½•è®¿é—®è¿™ä¸ª<code>meta</code>å­—æ®µå‘¢?é¦–å…ˆ,æˆ‘ä»¬ç§°å‘¼<code>routes</code>é…ç½®ä¸­çš„æ¯ä¸ªè·¯ç”±å¯¹è±¡ä¸ºè·¯ç”±è®°å½•ã€‚è·¯ç”±è®°å½•å¯ä»¥æ˜¯åµŒå¥—çš„,å› æ­¤,å½“ä¸€ä¸ªè·¯ç”±åŒ¹é…æˆåŠŸå,ä»–å¯èƒ½åŒ¹é…å¤šä¸ªè·¯ç”±è®°å½•ã€‚ä¾‹å¦‚,æ ¹æ®ä¸Šé¢çš„è·¯ç”±é…ç½®,<code>/foo/bar</code>è¿™ä¸ªURLå°†ä¼šåŒ¹é…çˆ¶è·¯ç”±è®°å½•ä»¥åŠå­è·¯ç”±è®°å½•ã€‚</p>
<p>ä¸€ä¸ªè·¯ç”±åŒ¹é…åˆ°çš„æ‰€æœ‰è·¯ç”±è®°å½•ä¼šæš´éœ²ä¸º<code>$route</code>å¯¹è±¡(è¿˜æœ‰åœ¨å¯¼èˆªå®ˆå«ä¸­çš„è·¯ç”±å¯¹è±¡)çš„<code>$route.matched</code>æ•°ç»„ã€‚å› æ­¤,æˆ‘ä»¬éœ€è¦éå†<code>$route.matched</code>æ¥æ£€æŸ¥è·¯ç”±è®°å½•ä¸­çš„<code>meta</code>å­—æ®µã€‚</p>
<p>ä¸‹é¢ä¾‹å­å±•ç¤ºåœ¨å…¨å±€å¯¼èˆªå®ˆå«ä¸­æ£€æŸ¥å…ƒå­—æ®µ:</p>
<pre><code class="javascript">router.beforeEach((to, from, next) =&gt; {
  if (to.matched.some(record =&gt; record.meta.requiresAuth)) {
    // this route requires auth, check if logged in
    // if not, redirect to login page.
    if (!auth.loggedIn()) {
      next({
        path: '/login',
        query: { redirect: to.fullPath }
      })
    } else {
      next()
    }
  } else {
    next() // ç¡®ä¿ä¸€å®šè¦è°ƒç”¨ next()
  }
})
</code></pre>

<h3 id="412">4.12 è¿‡æ¸¡åŠ¨æ•ˆ</h3>
<p><code>&lt;router-view &gt;</code>æ˜¯åŸºæœ¬çš„åŠ¨æ€ç»„ä»¶,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨<code>&lt;transition\&gt;</code>ç»„ä»¶ç»™å®ƒæ·»åŠ ä¸€äº›è¿‡æ¸¡æ•ˆæœ:</p>
<pre><code class="html">&lt;transition&gt;
  &lt;router-view&gt;&lt;/router-view&gt;
&lt;/transition&gt;
</code></pre>

<p><code>Transition</code>çš„æ‰€æœ‰åŠŸèƒ½ åœ¨è¿™é‡ŒåŒæ ·é€‚ç”¨ã€‚</p>
<ul>
<li><strong>å•ä¸ªè·¯ç”±çš„è¿‡æ¸¡</strong></li>
</ul>
<p>ä¸Šé¢çš„ç”¨æ³•ä¼šç»™æ‰€æœ‰è·¯ç”±è®¾ç½®ä¸€æ ·çš„è¿‡æ¸¡æ•ˆæœ,å¦‚æœä½ æƒ³è®©æ¯ä¸ªè·¯ç”±ç»„ä»¶æœ‰å„è‡ªçš„è¿‡æ¸¡æ•ˆæœ,å¯ä»¥åœ¨å„è·¯ç”±ç»„ä»¶å†…ä½¿ç”¨<code>&lt;transition\&gt;</code>å¹¶è®¾ç½®ä¸åŒçš„<code>name</code>ã€‚</p>
<pre><code class="javascript">const Foo = {
  template: `
    &lt;transition name=&quot;slide&quot;&gt;
      &lt;div class=&quot;foo&quot;&gt;...&lt;/div&gt;
    &lt;/transition&gt;
  `
}

const Bar = {
  template: `
    &lt;transition name=&quot;fade&quot;&gt;
      &lt;div class=&quot;bar&quot;&gt;...&lt;/div&gt;
    &lt;/transition&gt;
  `
}
</code></pre>

<ul>
<li><strong>åŸºäºè·¯ç”±çš„åŠ¨æ€è¿‡æ¸¡</strong></li>
</ul>
<p>è¿˜å¯ä»¥åŸºäºå½“å‰è·¯ç”±ä¸ç›®æ ‡è·¯ç”±çš„å˜åŒ–å…³ç³»,åŠ¨æ€è®¾ç½®è¿‡æ¸¡æ•ˆæœ:</p>
<pre><code class="javascript">&lt;!-- ä½¿ç”¨åŠ¨æ€çš„transition name --&gt;
&lt;transition :name=&quot;transitionName&quot;&gt;
  &lt;router-view&gt;&lt;/router-view&gt;
&lt;/transition&gt;
// æ¥ç€åœ¨çˆ¶ç»„ä»¶å†…
// watch $routeå†³å®šä½¿ç”¨å“ªç§è¿‡æ¸¡
watch: {
  '$route' (to, from) {
    const toDepth = to.path.split('/').length
    const fromDepth = from.path.split('/').length
    this.transitionName = toDepth &lt; fromDepth ? 'slide-right' : 'slide-left'
  }
}
</code></pre>

<p>æŸ¥çœ‹å®Œæ•´ä¾‹å­è¯·<a href="https://github.com/vuejs/vue-router/blob/dev/examples/transitions/app.js">ç§»æ­¥è¿™é‡Œ</a>ã€‚</p>
<h3 id="413">4.13 æ•°æ®è·å–</h3>
<p>æœ‰æ—¶å€™,è¿›å…¥æŸä¸ªè·¯ç”±å,éœ€è¦ä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚ä¾‹å¦‚,åœ¨æ¸²æŸ“ç”¨æˆ·ä¿¡æ¯æ—¶,ä½ éœ€è¦ä»æœåŠ¡å™¨è·å–ç”¨æˆ·çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°:</p>
<blockquote>
<ol>
<li>å¯¼èˆªå®Œæˆä¹‹åè·å–:å…ˆå®Œæˆå¯¼èˆª,ç„¶ååœ¨æ¥ä¸‹æ¥çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è·å–æ•°æ®ã€‚åœ¨æ•°æ®è·å–æœŸé—´æ˜¾ç¤ºâ€œåŠ è½½ä¸­â€ä¹‹ç±»çš„æŒ‡ç¤ºã€‚</li>
<li>å¯¼èˆªå®Œæˆä¹‹å‰è·å–:å¯¼èˆªå®Œæˆå‰,åœ¨è·¯ç”±è¿›å…¥çš„å®ˆå«ä¸­è·å–æ•°æ®,åœ¨æ•°æ®è·å–æˆåŠŸåæ‰§è¡Œå¯¼èˆªã€‚</li>
</ol>
</blockquote>
<p>ä»æŠ€æœ¯è§’åº¦è®²,ä¸¤ç§æ–¹å¼éƒ½ä¸é”™â€”â€”å°±çœ‹ä½ æƒ³è¦çš„ç”¨æˆ·ä½“éªŒæ˜¯å“ªç§ã€‚</p>
<ul>
<li><strong>å¯¼èˆªå®Œæˆåè·å–æ•°æ®</strong></li>
</ul>
<p>å½“ä½ ä½¿ç”¨è¿™ç§æ–¹å¼æ—¶,æˆ‘ä»¬ä¼šé©¬ä¸Šå¯¼èˆªå’Œæ¸²æŸ“ç»„ä»¶,ç„¶ååœ¨ç»„ä»¶çš„<code>created</code>é’©å­ä¸­è·å–æ•°æ®ã€‚è¿™è®©æˆ‘ä»¬æœ‰æœºä¼šåœ¨æ•°æ®è·å–æœŸé—´å±•ç¤ºä¸€ä¸ª<code>loading</code>çŠ¶æ€,è¿˜å¯ä»¥åœ¨ä¸åŒè§†å›¾é—´å±•ç¤ºä¸åŒçš„<code>loading</code>çŠ¶æ€ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªPostç»„ä»¶,éœ€è¦åŸºäº<code>$route.params.id</code>è·å–æ–‡ç« æ•°æ®:</p>
<pre><code class="javascript">&lt;template&gt;
  &lt;div class=&quot;post&quot;&gt;
    &lt;div v-if=&quot;loading&quot; class=&quot;loading&quot;&gt;
      Loading...
    &lt;/div&gt;

    &lt;div v-if=&quot;error&quot; class=&quot;error&quot;&gt;
      {{ error }}
    &lt;/div&gt;

    &lt;div v-if=&quot;post&quot; class=&quot;content&quot;&gt;
      &lt;h2&gt;{{ post.title }}&lt;/h2&gt;
      &lt;p&gt;{{ post.body }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
export default {
  data () {
    return {
      loading: false,
      post: null,
      error: null
    }
  },
  created () {
    // ç»„ä»¶åˆ›å»ºå®Œåè·å–æ•°æ®,
    // æ­¤æ—¶dataå·²ç»è¢«observedäº†
    this.fetchData()
  },
  watch: {
    // å¦‚æœè·¯ç”±æœ‰å˜åŒ–,ä¼šå†æ¬¡æ‰§è¡Œè¯¥æ–¹æ³•
    '$route': 'fetchData'
  },
  methods: {
    fetchData () {
      this.error = this.post = null
      this.loading = true
      // replace getPost with your data fetching util / API wrapper
      getPost(this.$route.params.id, (err, post) =&gt; {
        this.loading = false
        if (err) {
          this.error = err.toString()
        } else {
          this.post = post
        }
      })
    }
  }
}
</code></pre>

<ul>
<li><strong>åœ¨å¯¼èˆªå®Œæˆå‰è·å–æ•°æ®</strong></li>
</ul>
<p>é€šè¿‡è¿™ç§æ–¹å¼,æˆ‘ä»¬åœ¨å¯¼èˆªè½¬å…¥æ–°çš„è·¯ç”±å‰è·å–æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ¥ä¸‹æ¥çš„ç»„ä»¶çš„<code>beforeRouteEnter</code>å®ˆå«ä¸­è·å–æ•°æ®,å½“æ•°æ®è·å–æˆåŠŸååªè°ƒç”¨<code>next</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">export default {
  data () {
    return {
      post: null,
      error: null
    }
  },
  beforeRouteEnter (to, from, next) {
    getPost(to.params.id, (err, post) =&gt; {
      next(vm =&gt; vm.setData(err, post))
    })
  },
  // è·¯ç”±æ”¹å˜å‰,ç»„ä»¶å°±å·²ç»æ¸²æŸ“å®Œäº†
  // é€»è¾‘ç¨ç¨ä¸åŒ
  beforeRouteUpdate (to, from, next) {
    this.post = null
    getPost(to.params.id, (err, post) =&gt; {
      this.setData(err, post)
      next()
    })
  },
  methods: {
    setData (err, post) {
      if (err) {
        this.error = err.toString()
      } else {
        this.post = post
      }
    }
  }
}
</code></pre>

<p>åœ¨ä¸ºåé¢çš„è§†å›¾è·å–æ•°æ®æ—¶,ç”¨æˆ·ä¼šåœç•™åœ¨å½“å‰çš„ç•Œé¢,å› æ­¤å»ºè®®åœ¨æ•°æ®è·å–æœŸé—´,æ˜¾ç¤ºä¸€äº›è¿›åº¦æ¡æˆ–è€…åˆ«çš„æŒ‡ç¤ºã€‚å¦‚æœæ•°æ®è·å–å¤±è´¥,åŒæ ·æœ‰å¿…è¦å±•ç¤ºä¸€äº›å…¨å±€çš„é”™è¯¯æé†’ã€‚</p>
<h3 id="414">4.14 æ»šåŠ¨è¡Œä¸º</h3>
<p>ä½¿ç”¨å‰ç«¯è·¯ç”±,å½“åˆ‡æ¢åˆ°æ–°è·¯ç”±æ—¶,æƒ³è¦é¡µé¢æ»šåˆ°é¡¶éƒ¨,æˆ–è€…æ˜¯ä¿æŒåŸå…ˆçš„æ»šåŠ¨ä½ç½®,å°±åƒé‡æ–°åŠ è½½é¡µé¢é‚£æ ·ã€‚vue-routerèƒ½åšåˆ°,è€Œä¸”æ›´å¥½,å®ƒè®©ä½ å¯ä»¥è‡ªå®šä¹‰è·¯ç”±åˆ‡æ¢æ—¶é¡µé¢å¦‚ä½•æ»šåŠ¨ã€‚</p>
<p>æ³¨æ„: è¿™ä¸ªåŠŸèƒ½åªåœ¨æ”¯æŒ<code>history.pushState</code>çš„æµè§ˆå™¨ä¸­å¯ç”¨ã€‚</p>
<p>å½“åˆ›å»ºä¸€ä¸ª<code>Router</code>å®ä¾‹,ä½ å¯ä»¥æä¾›ä¸€ä¸ª<code>scrollBehavior</code>æ–¹æ³•:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [...],
  scrollBehavior (to, from, savedPosition) {
    // returnæœŸæœ›æ»šåŠ¨åˆ°å“ªä¸ªçš„ä½ç½®
  }
})
</code></pre>

<p><code>scrollBehavior</code>æ–¹æ³•æ¥æ”¶<code>to</code>å’Œ<code>from</code>è·¯ç”±å¯¹è±¡ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°<code>savedPosition</code>å½“ä¸”ä»…å½“<code>popstate</code>å¯¼èˆª(é€šè¿‡æµè§ˆå™¨çš„å‰è¿›/åé€€æŒ‰é’®è§¦å‘)æ—¶æ‰å¯ç”¨ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›æ»šåŠ¨ä½ç½®çš„å¯¹è±¡ä¿¡æ¯,é•¿è¿™æ ·:</p>
<pre><code class="javascript">{ x: number, y: number }
{ selector: string, offset? : { x: number, y: number }} (offsetåªåœ¨2.6.0+æ”¯æŒ)
</code></pre>

<p>å¦‚æœè¿”å›ä¸€ä¸ª<code>falsy</code>çš„å€¼,æˆ–è€…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡,é‚£ä¹ˆä¸ä¼šå‘ç”Ÿæ»šåŠ¨ã€‚ä¸¾ä¾‹:</p>
<pre><code class="javascript">scrollBehavior (to, from, savedPosition) {
  return { x: 0, y: 0 }
}
</code></pre>

<p>å¯¹äºæ‰€æœ‰è·¯ç”±å¯¼èˆª,ç®€å•åœ°è®©é¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨ã€‚è¿”å›<code>savedPosition</code>,åœ¨æŒ‰ä¸‹åé€€/å‰è¿›æŒ‰é’®æ—¶,å°±ä¼šåƒæµè§ˆå™¨çš„åŸç”Ÿè¡¨ç°é‚£æ ·:</p>
<pre><code class="javascript">scrollBehavior (to, from, savedPosition) {
  if (savedPosition) {
    return savedPosition
  } else {
    return { x: 0, y: 0 }
  }
}
</code></pre>

<p>å¦‚æœä½ è¦æ¨¡æ‹Ÿâ€œæ»šåŠ¨åˆ°é”šç‚¹â€çš„è¡Œä¸º:</p>
<pre><code class="javascript">scrollBehavior (to, from, savedPosition) {
  if (to.hash) {
    return {
      selector: to.hash
    }
  }
}
</code></pre>

<p>æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨è·¯ç”±å…ƒä¿¡æ¯æ›´ç»†é¢—ç²’åº¦åœ°æ§åˆ¶æ»šåŠ¨ã€‚æŸ¥çœ‹å®Œæ•´ä¾‹å­è¯·<a href="https://github.com/vuejs/vue-router/blob/dev/examples/scroll-behavior/app.js">ç§»æ­¥è¿™é‡Œ</a>ã€‚</p>
<ul>
<li><strong>å¼‚æ­¥æ»šåŠ¨</strong></li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª<code>Promise</code>æ¥å¾—å‡ºé¢„æœŸçš„ä½ç½®æè¿°:</p>
<pre><code class="javascript">scrollBehavior (to, from, savedPosition) {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      resolve({ x: 0, y: 0 })
    }, 500)
  })
}
</code></pre>

<p>å°†å…¶æŒ‚è½½åˆ°ä»é¡µé¢çº§åˆ«çš„è¿‡æ¸¡ç»„ä»¶çš„äº‹ä»¶ä¸Š,ä»¤å…¶æ»šåŠ¨è¡Œä¸ºå’Œé¡µé¢è¿‡æ¸¡ä¸€èµ·è‰¯å¥½è¿è¡Œæ˜¯å¯èƒ½çš„ã€‚ä½†æ˜¯è€ƒè™‘åˆ°ç”¨ä¾‹çš„å¤šæ ·æ€§å’Œå¤æ‚æ€§,æˆ‘ä»¬ä»…æä¾›è¿™ä¸ªåŸå§‹çš„æ¥å£,ä»¥æ”¯æŒä¸åŒç”¨æˆ·åœºæ™¯çš„å…·ä½“å®ç°ã€‚</p>
<h3 id="415">4.15 è·¯ç”±æ‡’åŠ è½½</h3>
<p>å½“æ‰“åŒ…æ„å»ºåº”ç”¨æ—¶,JavaScriptåŒ…ä¼šå˜å¾—éå¸¸å¤§,å½±å“é¡µé¢åŠ è½½ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—,ç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶,è¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚ç»“åˆVueçš„å¼‚æ­¥ç»„ä»¶å’ŒWebpackçš„ä»£ç åˆ†å‰²åŠŸèƒ½,è½»æ¾å®ç°è·¯ç”±ç»„ä»¶çš„æ‡’åŠ è½½ã€‚</p>
<p>é¦–å…ˆ,å¯ä»¥å°†å¼‚æ­¥ç»„ä»¶å®šä¹‰ä¸ºè¿”å›ä¸€ä¸ªPromiseçš„å·¥å‚å‡½æ•°(è¯¥å‡½æ•°è¿”å›çš„<code>Promise</code>åº”è¯¥<code>resolve</code>ç»„ä»¶æœ¬èº«):</p>
<pre><code class="javascript">const Foo = () =&gt; Promise.resolve({ /* ç»„ä»¶å®šä¹‰å¯¹è±¡ */ })
</code></pre>

<p>ç¬¬äºŒ,åœ¨ Webpack 2ä¸­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠ¨æ€importè¯­æ³•æ¥å®šä¹‰ä»£ç åˆ†å—ç‚¹(split point):</p>
<pre><code class="javascript">import('./Foo.vue') // è¿”å› Promise
</code></pre>

<p>æ³¨æ„:å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Babel,ä½ å°†éœ€è¦æ·»åŠ syntax-dynamic-importæ’ä»¶,æ‰èƒ½ä½¿Babelå¯ä»¥æ­£ç¡®åœ°è§£æè¯­æ³•ã€‚</p>
<p>ç»“åˆè¿™ä¸¤è€…,è¿™å°±æ˜¯å¦‚ä½•å®šä¹‰ä¸€ä¸ªèƒ½å¤Ÿè¢«Webpackè‡ªåŠ¨ä»£ç åˆ†å‰²çš„å¼‚æ­¥ç»„ä»¶ã€‚</p>
<pre><code class="javascript">const Foo = () =&gt; import('./Foo.vue')
</code></pre>

<p>åœ¨è·¯ç”±é…ç½®ä¸­ä»€ä¹ˆéƒ½ä¸éœ€è¦æ”¹å˜,åªéœ€è¦åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨<code>Foo</code>:</p>
<pre><code class="javascript">const router = new VueRouter({
  routes: [
    { path: '/foo', component: Foo }
  ]
})
</code></pre>

<ul>
<li><strong>æŠŠç»„ä»¶æŒ‰ç»„åˆ†å—</strong></li>
</ul>
<p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³æŠŠæŸä¸ªè·¯ç”±ä¸‹çš„æ‰€æœ‰ç»„ä»¶éƒ½æ‰“åŒ…åœ¨åŒä¸ªå¼‚æ­¥å—(chunk)ä¸­ã€‚åªéœ€è¦ä½¿ç”¨å‘½åchunk,ä¸€ä¸ªç‰¹æ®Šçš„æ³¨é‡Šè¯­æ³•æ¥æä¾›chunk name(éœ€è¦Webpack &gt; 2.4)ã€‚</p>
<pre><code class="javascript">const Foo = () =&gt; import(/* webpackChunkName: &quot;group-foo&quot; */ './Foo.vue')
const Bar = () =&gt; import(/* webpackChunkName: &quot;group-foo&quot; */ './Bar.vue')
const Baz = () =&gt; import(/* webpackChunkName: &quot;group-foo&quot; */ './Baz.vue')
</code></pre>

<p>Webpackä¼šå°†ä»»ä½•ä¸€ä¸ªå¼‚æ­¥æ¨¡å—ä¸ç›¸åŒçš„å—åç§°ç»„åˆåˆ°ç›¸åŒçš„å¼‚æ­¥å—ä¸­ã€‚</p>
<h2 id="vuex">äº”ã€vuex</h2>
<p>æˆ‘åœ¨ä½¿ç”¨åŸºäºvue.js 2.0çš„UIæ¡†æ¶<code>ElementUI</code>å¼€å‘ç½‘ç«™çš„æ—¶å€™,å°±é‡åˆ°äº†è¿™ç§é—®é¢˜:ä¸€ä¸ªé¡µé¢æœ‰å¾ˆå¤šè¡¨å•,æˆ‘è¯•å›¾å°†è¡¨å•å†™æˆä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶,ä½†æ˜¯è¡¨å•(å­ç»„ä»¶)é‡Œçš„æ•°æ®å’Œé¡µé¢(çˆ¶ç»„ä»¶)æŒ‰é’®äº¤äº’çš„æ—¶å€™,å®ƒä»¬ä¹‹é—´çš„é€šè®¯å¾ˆéº»çƒ¦:</p>
<pre><code class="js">&lt;!--çˆ¶ç»„ä»¶ä¸­å¼•å…¥å­ç»„ä»¶--&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;a href=&quot;javascript:;&quot; @click=&quot;show = true&quot;&gt;ç‚¹å‡»&lt;/a&gt;
    &lt;t-dialog :show.sync=&quot;show&quot;&gt;&lt;/t-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import dialog from './components/dialog.vue'
export default {
  data(){
    return {
      show:false
    }
  },
  components:{
    &quot;t-dialog&quot;:dialog
  }
}
&lt;/script&gt;


&lt;!--å­ç»„ä»¶--&gt;
&lt;template&gt;
  &lt;el-dialog :visible.sync=&quot;currentShow&quot;&gt;&lt;/el-dialog&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props:['show'],
  computed:{
      currentShow:{
          get(){
              return this.show
          },
          set(val){
              this.$emit(&quot;update:show&quot;,val)
          }
      }
  }
}
&lt;/script&gt;
</code></pre>

<p>ä¹‹æ‰€ä»¥è¿™ä¹ˆéº»çƒ¦,æ˜¯å› ä¸ºçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡<code>props</code>ç»™å­ç»„ä»¶ä¼ é€’å‚æ•°,ä½†å­ç»„ä»¶å†…å´ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„å‚æ•°ã€‚è¿™æ—¶å€™,ä½¿ç”¨<code>vuex</code>å°±å¯ä»¥æ¯”è¾ƒæ–¹ä¾¿çš„è§£å†³è¿™ç§é—®é¢˜äº†:</p>
<pre><code class="js">&lt;!--çˆ¶ç»„ä»¶ä¸­å¼•å…¥å­ç»„ä»¶--&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;a href=&quot;javascript:;&quot; @click=&quot;$store.state.show = true&quot;&gt;ç‚¹å‡»&lt;/a&gt;
    &lt;t-dialog&gt;&lt;/t-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import dialog from './components/dialog.vue'
export default {
  components:{
    &quot;t-dialog&quot;:dialog
  }
}
&lt;/script&gt;


&lt;!--å­ç»„ä»¶--&gt;
&lt;template&gt;
  &lt;el-dialog :visible.sync=&quot;$store.state.show&quot;&gt;&lt;/el-dialog&gt;
&lt;/template&gt;

&lt;script&gt;
export default {}
&lt;/script&gt;
</code></pre>

<p>æ˜¯ä¸æ˜¯æ–¹ä¾¿äº†è®¸å¤š,è¿™å°±æ˜¯<code>vuex</code>æœ€ç®€å•çš„åº”ç”¨ã€‚</p>
<h3 id="51-vuex">5.1 å®‰è£…ä½¿ç”¨<code>vuex</code></h3>
<p>é¦–å…ˆåœ¨å¼€å‘ç¯å¢ƒä¸­å®‰è£…<code>vuex</code>:</p>
<pre><code class="shell">npm install vuex --save
</code></pre>

<p>ç„¶å,åœ¨<code>main.js</code>ä¸­åŠ å…¥:</p>
<pre><code class="js">import vuex from 'vuex'
Vue.use(vuex);
var store = new vuex.Store({//storeå¯¹è±¡
    state:{
        show:false
    }
})
</code></pre>

<p>å†ç„¶å,åœ¨å®ä¾‹åŒ–<code>Vue</code>å¯¹è±¡æ—¶åŠ å…¥<code>store</code>å¯¹è±¡:</p>
<pre><code class="js">new Vue({
  el: '#app',
  router,
  store,//ä½¿ç”¨store
  template: '&lt;App/&gt;',
  components: { App }
})
</code></pre>

<p>å®Œæˆåˆ°è¿™ä¸€æ­¥,ä¸Šè¿°ä¾‹å­ä¸­çš„<code>$store.state.show</code>å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h3 id="53-modules">5.3 <code>modules</code></h3>
<p>å‰é¢ä¸ºäº†æ–¹ä¾¿,æˆ‘ä»¬æŠŠ<code>store</code>å¯¹è±¡å†™åœ¨äº†<code>main.js</code>é‡Œé¢,ä½†å®é™…ä¸Šä¸ºäº†ä¾¿äºæ—¥åçš„ç»´æŠ¤,æˆ‘ä»¬åˆ†å¼€å†™æ›´å¥½,æˆ‘ä»¬åœ¨<code>src</code>ç›®å½•ä¸‹,æ–°å»ºä¸€ä¸ª<code>store</code>æ–‡ä»¶å¤¹,ç„¶ååœ¨é‡Œé¢æ–°å»ºä¸€ä¸ª<code>index.js</code>:</p>
<pre><code class="js">import Vue from 'vue'
import vuex from 'vuex'
Vue.use(vuex);

export default new vuex.Store({
    state:{
        show:false
    }
})
é‚£ä¹ˆç›¸åº”çš„ , åœ¨ main.js é‡Œçš„ä»£ç åº”è¯¥æ”¹æˆ :

//vuex
import store from './store'

new Vue({
  el: '#app',
  router,
  store,//ä½¿ç”¨store
  template: '&lt;App/&gt;',
  components: { App }
})
</code></pre>

<p>è¿™æ ·å°±æŠŠ<code>store</code>åˆ†ç¦»å‡ºå»äº†,é‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯:è¿™é‡Œ<code>$store.state.show</code>æ— è®ºå“ªä¸ªç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨,é‚£ç»„ä»¶å¤šäº†ä¹‹å,çŠ¶æ€ä¹Ÿå¤šäº†,è¿™ä¹ˆå¤šçŠ¶æ€éƒ½å †åœ¨<code>store</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>index.js</code>ä¸å¥½ç»´æŠ¤æ€ä¹ˆåŠ?</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>vuex</code>çš„<code>modules</code>,æŠŠ<code>store</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>index.js</code>æ”¹æˆ:</p>
<pre><code class="js">import Vue from 'vue'
import vuex from 'vuex'
Vue.use(vuex);

import dialog_store from '../components/dialog_store.js'; // å¼•å…¥æŸä¸ªstoreå¯¹è±¡

export default new vuex.Store({
    modules: {
        dialog: dialog_store
    }
})
</code></pre>

<p>è¿™é‡Œæˆ‘ä»¬å¼•ç”¨äº†ä¸€ä¸ª<code>dialog_store.js</code>,åœ¨è¿™ä¸ª<code>js</code>æ–‡ä»¶é‡Œæˆ‘ä»¬å°±å¯ä»¥å•ç‹¬å†™<code>dialog</code>ç»„ä»¶çš„çŠ¶æ€äº†:</p>
<pre><code class="js">export default {
    state:{
        show:false
    }
}
</code></pre>

<p>åšå‡ºè¿™æ ·çš„ä¿®æ”¹ä¹‹å,æˆ‘ä»¬å°†ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨çš„<code>$store.state.show</code>ç»Ÿç»Ÿæ”¹ä¸º<code>$store.state.dialog.show</code>å³å¯ã€‚</p>
<p>å¦‚æœè¿˜æœ‰å…¶ä»–çš„ç»„ä»¶éœ€è¦ä½¿ç”¨<code>vuex</code>,å°±æ–°å»ºä¸€ä¸ªå¯¹åº”çš„çŠ¶æ€æ–‡ä»¶,ç„¶åå°†ä»–ä»¬åŠ å…¥<code>store</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>index.js</code>æ–‡ä»¶ä¸­çš„<code>modules</code>ä¸­ã€‚</p>
<pre><code class="js">modules: {
    dialog: dialog_store,
    other: other,//å…¶ä»–ç»„ä»¶
}
</code></pre>

<h3 id="54-mutations">5.4 <code>mutations</code></h3>
<p>å‰é¢æˆ‘ä»¬æåˆ°çš„å¯¹è¯æ¡†ä¾‹å­,æˆ‘ä»¬å¯¹<code>vuex</code>çš„ä¾èµ–ä»…ä»…åªæœ‰ä¸€ä¸ª<code>$store.state.dialog.show</code>ä¸€ä¸ªçŠ¶æ€,ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦è¿›è¡Œä¸€ä¸ªæ“ä½œ,éœ€è¦ä¾èµ–å¾ˆå¤šå¾ˆå¤šä¸ªçŠ¶æ€,é‚£ç®¡ç†èµ·æ¥åˆéº»çƒ¦äº†!</p>
<p><code>mutations</code>ç™»åœº,é—®é¢˜è¿åˆƒè€Œè§£:</p>
<pre><code class="js">export default {
    state:{//state
        show:false
    },
    mutations:{
        switch_dialog(state){ // è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate
            state.show = state.show?false:true;
            // ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–çš„æ“ä½œæ”¹å˜state
        }
    }
}
</code></pre>

<p>ä½¿ç”¨<code>mutations</code>å,åŸå…ˆæˆ‘ä»¬çš„çˆ¶ç»„ä»¶å¯ä»¥æ”¹ä¸º:</p>
<pre><code class="js">&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;a href=&quot;javascript:;&quot; @click=&quot;$store.commit('switch_dialog')&quot;&gt;ç‚¹å‡»&lt;/a&gt;
    &lt;t-dialog&gt;&lt;/t-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import dialog from './components/dialog.vue'
export default {
  components:{
    &quot;t-dialog&quot;:dialog
  }
}
&lt;/script&gt;
</code></pre>

<p>ä½¿ç”¨<code>$store.commit('switch_dialog')</code>æ¥è§¦å‘<code>mutations</code>ä¸­çš„<code>switch_dialog</code>æ–¹æ³•ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯:</p>
<blockquote>
<p><code>mutations</code>ä¸­çš„æ–¹æ³•æ˜¯ä¸åˆ†ç»„ä»¶çš„,å‡å¦‚ä½ åœ¨<code>dialog_stroe.js</code>æ–‡ä»¶ä¸­çš„å®šä¹‰äº†<code>switch_dialog</code>æ–¹æ³•,åœ¨å…¶ä»–æ–‡ä»¶ä¸­çš„ä¸€ä¸ª<code>switch_dialog</code>æ–¹æ³•,é‚£ä¹ˆ<code>$store.commit('switch_dialog')</code>ä¼šæ‰§è¡Œæ‰€æœ‰çš„<code>switch_dialog</code>æ–¹æ³•ã€‚
<br><code>mutations</code>é‡Œçš„æ“ä½œå¿…é¡»æ˜¯åŒæ­¥çš„ã€‚</p>
</blockquote>
<p>ä½ ä¸€å®šå¥½å¥‡,å¦‚æœåœ¨<code>mutations</code>é‡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…,å®é™…ä¸Šå¹¶ä¸ä¼šå‘ç”Ÿä»€ä¹ˆå¥‡æ€ªçš„äº‹æƒ…,åªæ˜¯å®˜æ–¹æ¨è,ä¸è¦åœ¨<code>mutationss</code>é‡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œè€Œå·²ã€‚</p>
<h3 id="55-actions">5.5 <code>actions</code></h3>
<p>å¤šä¸ª<code>state</code>çš„æ“ä½œ,ä½¿ç”¨<code>mutations</code>ä¼šæ¥è§¦å‘ä¼šæ¯”è¾ƒå¥½ç»´æŠ¤,é‚£ä¹ˆéœ€è¦æ‰§è¡Œå¤šä¸ª<code>mutations</code>å°±éœ€è¦ç”¨<code>action</code>äº†:</p>
<pre><code class="js">export default {
    state:{//state
        show:false
    },
    mutations:{
        switch_dialog(state){//è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate
            state.show = state.show?false:true;
            // ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–çš„æ“ä½œæ”¹å˜state
        }
    },
    actions:{
        switch_dialog(context){ // è¿™é‡Œçš„contextå’Œæˆ‘ä»¬ä½¿ç”¨çš„$storeæ‹¥æœ‰ç›¸åŒçš„å¯¹è±¡å’Œæ–¹æ³•
            context.commit('switch_dialog');
            // ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œè§¦å‘å…¶ä»–çš„mutationsæ–¹æ³•
        },
    }
}
</code></pre>

<p>é‚£ä¹ˆ,åœ¨ä¹‹å‰çš„çˆ¶ç»„ä»¶ä¸­,æˆ‘ä»¬éœ€è¦åšä¿®æ”¹,æ¥è§¦å‘<code>action</code>é‡Œçš„<code>switch_dialog</code>æ–¹æ³•:</p>
<pre><code class="js">&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;a href=&quot;javascript:;&quot; @click=&quot;$store.dispatch('switch_dialog')&quot;&gt;ç‚¹å‡»&lt;/a&gt;
    &lt;t-dialog&gt;&lt;/t-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import dialog from './components/dialog.vue'
export default {
  components:{
    &quot;t-dialog&quot;:dialog
  }
}
&lt;/script&gt;
</code></pre>

<p>ä½¿ç”¨<code>$store.dispatch('switch_dialog')</code>æ¥è§¦å‘<code>action</code>ä¸­çš„<code>switch_dialog</code>æ–¹æ³•ã€‚å®˜æ–¹æ¨è,å°†å¼‚æ­¥æ“ä½œæ”¾åœ¨<code>action</code>ä¸­ã€‚</p>
<h3 id="56-getters">5.6 <code>getters</code></h3>
<p><code>getters</code>å’Œ<code>vue</code>ä¸­çš„<code>computed</code>ç±»ä¼¼,éƒ½æ˜¯ç”¨æ¥è®¡ç®—<code>state</code>ç„¶åç”Ÿæˆæ–°çš„æ•°æ®(çŠ¶æ€)çš„ã€‚</p>
<p>è¿˜æ˜¯å‰é¢çš„ä¾‹å­,å‡å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸çŠ¶æ€<code>show</code>åˆšå¥½ç›¸åçš„çŠ¶æ€,ä½¿ç”¨<code>vue</code>ä¸­çš„<code>computed</code>å¯ä»¥è¿™æ ·ç®—å‡ºæ¥:</p>
<pre><code class="js">computed(){
    not_show(){
        return !this.$store.state.dialog.show;
    }
}
</code></pre>

<p>é‚£ä¹ˆ,å¦‚æœå¾ˆå¤šå¾ˆå¤šä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªä¸<code>show</code>åˆšå¥½ç›¸åçš„çŠ¶æ€,é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å†™å¾ˆå¤šå¾ˆå¤šä¸ª<code>not_show</code>,ä½¿ç”¨<code>getters</code>å°±å¯ä»¥è§£å†³è¿™ç§é—®é¢˜:</p>
<pre><code class="js">export default {
    state:{//state
        show:false
    },
    getters:{
        not_show(state){ // è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate
            return !state.show;
        }
    },
    mutations:{
        switch_dialog(state){ // è¿™é‡Œçš„stateå¯¹åº”ç€ä¸Šé¢è¿™ä¸ªstate
            state.show = state.show?false:true;
            // ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–çš„æ“ä½œæ”¹å˜state
        }
    },
    actions:{
        switch_dialog(context){// è¿™é‡Œçš„contextå’Œæˆ‘ä»¬ä½¿ç”¨çš„$storeæ‹¥æœ‰ç›¸åŒçš„å¯¹è±¡å’Œæ–¹æ³•
            context.commit('switch_dialog');
            //ä½ è¿˜å¯ä»¥åœ¨è¿™é‡Œè§¦å‘å…¶ä»–çš„mutationsæ–¹æ³•
        },
    }
}
</code></pre>

<p>æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­ä½¿ç”¨<code>$store.state.dialog.show</code>æ¥è·å¾—çŠ¶æ€<code>show</code>,ç±»ä¼¼çš„,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>$store.getters.not_show</code>æ¥è·å¾—çŠ¶æ€<code>not_show</code>ã€‚</p>
<p><strong>æ³¨æ„:</strong> <code>$store.getters.not_show</code>çš„å€¼æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹çš„,éœ€è¦å¯¹åº”çš„<code>state</code>å‘ç”Ÿå˜åŒ–æ‰èƒ½ä¿®æ”¹ã€‚</p>
<h3 id="57-mapstatemapgettersmapactions">5.7 <code>mapState</code>ã€<code>mapGetters</code>å’Œ<code>mapActions</code></h3>
<p>å¾ˆå¤šæ—¶å€™,<code>$store.state.dialog.show</code>ã€<code>$store.dispatch('switch_dialog')</code>è¿™ç§å†™æ³•åˆé•¿åˆè‡­,å¾ˆä¸æ–¹ä¾¿,æˆ‘ä»¬æ²¡ä½¿ç”¨<code>vuex</code>çš„æ—¶å€™,è·å–ä¸€ä¸ªçŠ¶æ€åªéœ€è¦<code>this.show</code>,æ‰§è¡Œä¸€ä¸ªæ–¹æ³•åªéœ€è¦<code>this.switch_dialog</code>å°±è¡Œäº†,ä½¿ç”¨<code>vuex</code>ä½¿å†™æ³•å˜å¤æ‚äº†?</p>
<p>ä½¿ç”¨<code>mapState</code>ã€<code>mapGetters</code>ã€<code>mapActions</code>å°±ä¸ä¼šè¿™ä¹ˆå¤æ‚äº†ã€‚ä»¥<code>mapState</code>ä¸ºä¾‹:</p>
<pre><code class="js">&lt;template&gt;
  &lt;el-dialog :visible.sync=&quot;show&quot;&gt;&lt;/el-dialog&gt;
&lt;/template&gt;

&lt;script&gt;
import {mapState} from 'vuex';
export default {
  computed:{
    // è¿™é‡Œçš„ä¸‰ç‚¹å«åš:æ‰©å±•è¿ç®—ç¬¦
    ...mapState({
      show:state=&gt;state.dialog.show
    }),
  }
}
&lt;/script&gt;
</code></pre>

<p>ç›¸å½“äº:</p>
<pre><code class="js">&lt;template&gt;
  &lt;el-dialog :visible.sync=&quot;show&quot;&gt;&lt;/el-dialog&gt;
&lt;/template&gt;

&lt;script&gt;
import {mapState} from 'vuex';
export default {
  computed:{
    show(){
        return this.$store.state.dialog.show;
    }
  }
}
&lt;/script&gt;
</code></pre>

<p><code>mapGetters</code>ã€<code>mapActions</code>å’Œ<code>mapState</code>ç±»ä¼¼,<code>mapGetters</code>ä¸€èˆ¬ä¹Ÿå†™åœ¨<code>computed</code>ä¸­,<code>mapActions</code>ä¸€èˆ¬å†™åœ¨<code>methods</code>ä¸­ã€‚</p>

  <br>
    <style>
blockquote{
    font-size: 99%;
}
</style>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  CommonHTML: {
    scale: 100
  }
});
</script>
<script type="text/javascript" async
src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


    
    
      
    

    <br>
</div>

</body>
</html>